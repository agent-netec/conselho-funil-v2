module.exports=[640089,e=>{"use strict";let t;var r=e.i(775371),i=e.i(923901),s=e.i(769877),n=e.i(472419),a=e.i(465742),o=e.i(839704);let l={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e},captureMetaData:!1},u=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",h=RegExp("^"+("["+u+"]["+u)+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function d(e,t){let r=[],i=t.exec(e);for(;i;){let s=[];s.startIndex=t.lastIndex-i[0].length;let n=i.length;for(let e=0;e<n;e++)s.push(i[e]);r.push(s),i=t.exec(e)}return r}let f=function(e){return null!=h.exec(e)};t="function"!=typeof Symbol?"@@xmlMetadata":Symbol("XML Node Metadata");class g{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,r){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),void 0!==r&&(this.child[this.child.length-1][t]={startIndex:r})}static getMetaDataSymbol(){return t}}let c=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t};function p(e,t,r){let i="",s=e[t];if('"'!==s&&"'"!==s)throw Error(`Expected quoted string, found "${s}"`);for(t++;t<e.length&&e[t]!==s;)i+=e[t],t++;if(e[t]!==s)throw Error(`Unterminated ${r} value`);return[++t,i]}function m(e,t,r){for(let i=0;i<t.length;i++)if(t[i]!==e[r+i+1])return!1;return!0}function x(e){if(f(e))return e;throw Error(`Invalid entity name ${e}`)}let b=/^[-+]?0x[a-fA-F0-9]+$/,y=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,E={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},N=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;class w{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,16))}},this.addExternalEntities=S,this.parseXml=C,this.parseTextData=v,this.resolveNameSpace=T,this.buildAttributesMap=A,this.isItStopNode=$,this.replaceEntitiesValue=P,this.readStopNodeData=F,this.saveTextToParentTag=M,this.addChild=O,this.ignoreAttributesFn=function(e){return"function"==typeof e?e:Array.isArray(e)?t=>{for(let r of e)if("string"==typeof r&&t===r||r instanceof RegExp&&r.test(t))return!0}:()=>!1}(this.options.ignoreAttributes)}}function S(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let i=t[r];this.lastEntities[i]={regex:RegExp("&"+i+";","g"),val:e[i]}}}function v(e,t,r,i,s,n,a){if(void 0!==e&&(this.options.trimValues&&!i&&(e=e.trim()),e.length>0)){a||(e=this.replaceEntitiesValue(e));let i=this.options.tagValueProcessor(t,e,r,s,n);return null==i?e:typeof i!=typeof e||i!==e?i:this.options.trimValues||e.trim()===e?V(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function T(e){if(this.options.removeNSPrefix){let t=e.split(":"),r="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=r+t[1])}return e}let I=RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function A(e,t,r){if(!0!==this.options.ignoreAttributes&&"string"==typeof e){let r=d(e,I),i=r.length,s={};for(let e=0;e<i;e++){let i=this.resolveNameSpace(r[e][1]);if(this.ignoreAttributesFn(i,t))continue;let n=r[e][4],a=this.options.attributeNamePrefix+i;if(i.length)if(this.options.transformAttributeName&&(a=this.options.transformAttributeName(a)),"__proto__"===a&&(a="#__proto__"),void 0!==n){this.options.trimValues&&(n=n.trim()),n=this.replaceEntitiesValue(n);let e=this.options.attributeValueProcessor(i,n,t);null==e?s[a]=n:typeof e!=typeof n||e!==n?s[a]=e:s[a]=V(n,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[a]=!0)}if(Object.keys(s).length){if(this.options.attributesGroupName){let e={};return e[this.options.attributesGroupName]=s,e}return s}}}let C=function(e){e=e.replace(/\r\n?/g,"\n");let t=new g("!xml"),r=t,i="",s="";for(let n=0;n<e.length;n++)if("<"===e[n])if("/"===e[n+1]){let t=D(e,">",n,"Closing Tag is not closed."),a=e.substring(n+2,t).trim();if(this.options.removeNSPrefix){let e=a.indexOf(":");-1!==e&&(a=a.substr(e+1))}this.options.transformTagName&&(a=this.options.transformTagName(a)),r&&(i=this.saveTextToParentTag(i,r,s));let o=s.substring(s.lastIndexOf(".")+1);if(a&&-1!==this.options.unpairedTags.indexOf(a))throw Error(`Unpaired tag can not be used as closing tag: </${a}>`);let l=0;o&&-1!==this.options.unpairedTags.indexOf(o)?(l=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=s.lastIndexOf("."),s=s.substring(0,l),r=this.tagsNodeStack.pop(),i="",n=t}else if("?"===e[n+1]){let t=k(e,n,!1,"?>");if(!t)throw Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,r,s),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{let e=new g(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,s,t.tagName)),this.addChild(r,e,s,n)}n=t.closeIndex+1}else if("!--"===e.substr(n+1,3)){let t=D(e,"-->",n+4,"Comment is not closed.");if(this.options.commentPropName){let a=e.substring(n+4,t-2);i=this.saveTextToParentTag(i,r,s),r.add(this.options.commentPropName,[{[this.options.textNodeName]:a}])}n=t}else if("!D"===e.substr(n+1,2)){let t=function(e,t){let r={};if("O"===e[t+3]&&"C"===e[t+4]&&"T"===e[t+5]&&"Y"===e[t+6]&&"P"===e[t+7]&&"E"===e[t+8]){t+=9;let i=1,s=!1,n=!1;for(;t<e.length;t++)if("<"!==e[t]||n)if(">"===e[t]){if(n?"-"===e[t-1]&&"-"===e[t-2]&&(n=!1,i--):i--,0===i)break}else"["===e[t]?s=!0:e[t];else{if(s&&m(e,"!ENTITY",t)){let i,s;t+=7,[i,s,t]=function(e,t){t=c(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t])&&'"'!==e[t]&&"'"!==e[t];)r+=e[t],t++;if(x(r),t=c(e,t),"SYSTEM"===e.substring(t,t+6).toUpperCase())throw Error("External entities are not supported");if("%"===e[t])throw Error("Parameter entities are not supported");let i="";return[t,i]=p(e,t,"entity"),[r,i,--t]}(e,t+1),-1===s.indexOf("&")&&(r[i]={regx:RegExp(`&${i};`,"g"),val:s})}else if(s&&m(e,"!ELEMENT",t)){let{index:r}=function(e,t){t=c(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t]);)r+=e[t],t++;if(!x(r))throw Error(`Invalid element name: "${r}"`);t=c(e,t);let i="";if("E"===e[t]&&m(e,"MPTY",t))t+=4;else if("A"===e[t]&&m(e,"NY",t))t+=2;else if("("===e[t]){for(t++;t<e.length&&")"!==e[t];)i+=e[t],t++;if(")"!==e[t])throw Error("Unterminated content model")}else throw Error(`Invalid Element Expression, found "${e[t]}"`);return{elementName:r,contentModel:i.trim(),index:t}}(e,(t+=8)+1);t=r}else if(s&&m(e,"!ATTLIST",t))t+=8;else if(s&&m(e,"!NOTATION",t)){let{index:r}=function(e,t){t=c(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t]);)r+=e[t],t++;x(r),t=c(e,t);let i=e.substring(t,t+6).toUpperCase();if("SYSTEM"!==i&&"PUBLIC"!==i)throw Error(`Expected SYSTEM or PUBLIC, found "${i}"`);t+=i.length,t=c(e,t);let s=null,n=null;if("PUBLIC"===i)[t,s]=p(e,t,"publicIdentifier"),t=c(e,t),('"'===e[t]||"'"===e[t])&&([t,n]=p(e,t,"systemIdentifier"));else if("SYSTEM"===i&&([t,n]=p(e,t,"systemIdentifier"),!n))throw Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:r,publicIdentifier:s,systemIdentifier:n,index:--t}}(e,(t+=9)+1);t=r}else if(m(e,"!--",t))n=!0;else throw Error("Invalid DOCTYPE");i++}if(0!==i)throw Error("Unclosed DOCTYPE")}else throw Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}(e,n);this.docTypeEntities=t.entities,n=t.i}else if("!["===e.substr(n+1,2)){let t=D(e,"]]>",n,"CDATA is not closed.")-2,a=e.substring(n+9,t);i=this.saveTextToParentTag(i,r,s);let o=this.parseTextData(a,r.tagname,s,!0,!1,!0,!0);void 0==o&&(o=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:a}]):r.add(this.options.textNodeName,o),n=t+2}else{let a=k(e,n,this.options.removeNSPrefix),o=a.tagName,l=a.rawTagName,u=a.tagExp,h=a.attrExpPresent,d=a.closeIndex;this.options.transformTagName&&(o=this.options.transformTagName(o)),r&&i&&"!xml"!==r.tagname&&(i=this.saveTextToParentTag(i,r,s,!1));let f=r;f&&-1!==this.options.unpairedTags.indexOf(f.tagname)&&(r=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),o!==t.tagname&&(s+=s?"."+o:o);let c=n;if(this.isItStopNode(this.options.stopNodes,s,o)){let t="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)"/"===o[o.length-1]?(o=o.substr(0,o.length-1),s=s.substr(0,s.length-1),u=o):u=u.substr(0,u.length-1),n=a.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(o))n=a.closeIndex;else{let r=this.readStopNodeData(e,l,d+1);if(!r)throw Error(`Unexpected end of ${l}`);n=r.i,t=r.tagContent}let i=new g(o);o!==u&&h&&(i[":@"]=this.buildAttributesMap(u,s,o)),t&&(t=this.parseTextData(t,o,s,!0,h,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),i.add(this.options.textNodeName,t),this.addChild(r,i,s,c)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){"/"===o[o.length-1]?(o=o.substr(0,o.length-1),s=s.substr(0,s.length-1),u=o):u=u.substr(0,u.length-1),this.options.transformTagName&&(o=this.options.transformTagName(o));let e=new g(o);o!==u&&h&&(e[":@"]=this.buildAttributesMap(u,s,o)),this.addChild(r,e,s,c),s=s.substr(0,s.lastIndexOf("."))}else{let e=new g(o);this.tagsNodeStack.push(r),o!==u&&h&&(e[":@"]=this.buildAttributesMap(u,s,o)),this.addChild(r,e,s,c),r=e}i="",n=d}}else i+=e[n];return t.child};function O(e,t,r,i){this.options.captureMetaData||(i=void 0);let s=this.options.updateTag(t.tagname,r,t[":@"]);!1===s||("string"==typeof s&&(t.tagname=s),e.addChild(t,i))}let P=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function M(e,t,r,i){return e&&(void 0===i&&(i=0===t.child.length),void 0!==(e=this.parseTextData(e,t.tagname,r,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,i))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function $(e,t,r){let i="*."+r;for(let r in e){let s=e[r];if(i===s||t===s)return!0}return!1}function D(e,t,r,i){let s=e.indexOf(t,r);if(-1!==s)return s+t.length-1;throw Error(i)}function k(e,t,r,i=">"){let s=function(e,t,r=">"){let i,s="";for(let n=t;n<e.length;n++){let t=e[n];if(i)t===i&&(i="");else if('"'===t||"'"===t)i=t;else if(t===r[0]){if(!r[1])return{data:s,index:n};else if(e[n+1]===r[1])return{data:s,index:n}}else"	"===t&&(t=" ");s+=t}}(e,t+1,i);if(!s)return;let n=s.data,a=s.index,o=n.search(/\s/),l=n,u=!0;-1!==o&&(l=n.substring(0,o),n=n.substring(o+1).trimStart());let h=l;if(r){let e=l.indexOf(":");-1!==e&&(u=(l=l.substr(e+1))!==s.data.substr(e+1))}return{tagName:l,tagExp:n,closeIndex:a,attrExpPresent:u,rawTagName:h}}function F(e,t,r){let i=r,s=1;for(;r<e.length;r++)if("<"===e[r])if("/"===e[r+1]){let n=D(e,">",r,`${t} is not closed`);if(e.substring(r+2,n).trim()===t&&0==--s)return{tagContent:e.substring(i,r),i:n};r=n}else if("?"===e[r+1])r=D(e,"?>",r+1,"StopNode is not closed.");else if("!--"===e.substr(r+1,3))r=D(e,"-->",r+3,"StopNode is not closed.");else if("!["===e.substr(r+1,2))r=D(e,"]]>",r,"StopNode is not closed.")-2;else{let i=k(e,r,">");i&&((i&&i.tagName)===t&&"/"!==i.tagExp[i.tagExp.length-1]&&s++,r=i.closeIndex)}}function V(e,t,r){if(t&&"string"==typeof e){let t=e.trim();return"true"===t||"false"!==t&&function(e,t={}){if(t=Object.assign({},E,t),!e||"string"!=typeof e)return e;let r=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(r))return e;{if("0"===e)return 0;if(t.hex&&b.test(r)){var i,s=r;if(parseInt)return parseInt(s,16);if(Number.parseInt)return Number.parseInt(s,16);if(window&&window.parseInt)return window.parseInt(s,16);throw Error("parseInt, Number.parseInt, window.parseInt are not supported")}if(r.includes("e")||r.includes("E"))return function(e,t,r){if(!r.eNotation)return e;let i=t.match(N);if(!i)return e;{let s=i[1]||"",n=-1===i[3].indexOf("e")?"E":"e",a=i[2],o=s?e[a.length+1]===n:e[a.length]===n;return a.length>1&&o?e:1===a.length&&(i[3].startsWith(`.${n}`)||i[3][0]===n)?Number(t):r.leadingZeros&&!o?Number(t=(i[1]||"")+i[3]):e}}(e,r,t);let n=y.exec(r);if(!n)return e;{let s=n[1]||"",a=n[2],o=((i=n[3])&&-1!==i.indexOf(".")&&("."===(i=i.replace(/0+$/,""))?i="0":"."===i[0]?i="0"+i:"."===i[i.length-1]&&(i=i.substring(0,i.length-1))),i),l=s?"."===e[a.length+1]:"."===e[a.length];if(!t.leadingZeros&&(a.length>1||1===a.length&&!l))return e;{let i=Number(r),n=String(i);if(0===i)return i;if(-1!==n.search(/[eE]/))if(t.eNotation)return i;else return e;if(-1!==r.indexOf("."))if("0"===n)return i;else if(n===o)return i;else if(n===`${s}${o}`)return i;else return e;let l=a?o:r;return a?l===n||s+l===n?i:e:l===n||l===s+n?i:e}}}}(e,r)}return void 0!==e?e:""}let z=g.getMetaDataSymbol(),_={allowBooleanAttributes:!1,unpairedTags:[]};function j(e){return" "===e||"	"===e||"\n"===e||"\r"===e}function U(e,t){let r=t;for(;t<e.length;t++)if("?"==e[t]||" "==e[t]){let i=e.substr(r,t-r);if(t>5&&"xml"===i)return R("InvalidXml","XML declaration allowed only at the start of the document.",Q(e,t));if("?"!=e[t]||">"!=e[t+1])continue;t++;break}return t}function L(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let r=1;for(t+=8;t<e.length;t++)if("<"===e[t])r++;else if(">"===e[t]&&0==--r)break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7]){for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}}return t}let B=RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function K(e,t){let r=d(e,B),i={};for(let e=0;e<r.length;e++){if(0===r[e][1].length)return R("InvalidAttr","Attribute '"+r[e][2]+"' has no space in starting.",Y(r[e]));if(void 0!==r[e][3]&&void 0===r[e][4])return R("InvalidAttr","Attribute '"+r[e][2]+"' is without value.",Y(r[e]));if(void 0===r[e][3]&&!t.allowBooleanAttributes)return R("InvalidAttr","boolean attribute '"+r[e][2]+"' is not allowed.",Y(r[e]));let s=r[e][2];if(!f(s))return R("InvalidAttr","Attribute '"+s+"' is an invalid name.",Y(r[e]));if(i.hasOwnProperty(s))return R("InvalidAttr","Attribute '"+s+"' is repeated.",Y(r[e]));i[s]=1}return!0}function R(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function Q(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Y(e){return e.startIndex+e[1].length}let X=new class{constructor(e){this.externalEntities={},this.options=Object.assign({},l,e)}parse(e,t){if("string"==typeof e);else if(e.toString)e=e.toString();else throw Error("XML data is accepted in String or Bytes[] form.");if(t){!0===t&&(t={});let r=function(e,t){t=Object.assign({},_,t);let r=[],i=!1,s=!1;"\uFEFF"===e[0]&&(e=e.substr(1));for(let n=0;n<e.length;n++)if("<"===e[n]&&"?"===e[n+1]){if(n+=2,(n=U(e,n)).err)return n}else if("<"===e[n]){let a=n;if("!"===e[++n]){n=L(e,n);continue}{let o=!1;"/"===e[n]&&(o=!0,n++);let l="";for(;n<e.length&&">"!==e[n]&&" "!==e[n]&&"	"!==e[n]&&"\n"!==e[n]&&"\r"!==e[n];n++)l+=e[n];if("/"===(l=l.trim())[l.length-1]&&(l=l.substring(0,l.length-1),n--),!f(l))return R("InvalidTag",0===l.trim().length?"Invalid space after '<'.":"Tag '"+l+"' is an invalid name.",Q(e,n));let u=function(e,t){let r="",i="",s=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])""===i?i=e[t]:i!==e[t]||(i="");else if(">"===e[t]&&""===i){s=!0;break}r+=e[t]}return""===i&&{value:r,index:t,tagClosed:s}}(e,n);if(!1===u)return R("InvalidAttr","Attributes for '"+l+"' have open quote.",Q(e,n));let h=u.value;if(n=u.index,"/"===h[h.length-1]){let r=n-h.length,s=K(h=h.substring(0,h.length-1),t);if(!0!==s)return R(s.err.code,s.err.msg,Q(e,r+s.err.line));i=!0}else if(o)if(!u.tagClosed)return R("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",Q(e,n));else{if(h.trim().length>0)return R("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",Q(e,a));if(0===r.length)return R("InvalidTag","Closing tag '"+l+"' has not been opened.",Q(e,a));let t=r.pop();if(l!==t.tagName){let r=Q(e,t.tagStartPos);return R("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+r.line+", col "+r.col+") instead of closing tag '"+l+"'.",Q(e,a))}0==r.length&&(s=!0)}else{let o=K(h,t);if(!0!==o)return R(o.err.code,o.err.msg,Q(e,n-h.length+o.err.line));if(!0===s)return R("InvalidXml","Multiple possible root nodes found.",Q(e,n));-1!==t.unpairedTags.indexOf(l)||r.push({tagName:l,tagStartPos:a}),i=!0}for(n++;n<e.length;n++)if("<"===e[n])if("!"===e[n+1]){n=L(e,++n);continue}else if("?"===e[n+1]){if((n=U(e,++n)).err)return n}else break;else if("&"===e[n]){let t=function(e,t){if(";"===e[++t])return -1;if("#"===e[t]){var r=++t;let i=/\d/;for("x"===e[r]&&(r++,i=/[\da-fA-F]/);r<e.length;r++){if(";"===e[r])return r;if(!e[r].match(i))break}return -1}let i=0;for(;t<e.length;t++,i++)if(!e[t].match(/\w/)||!(i<20)){if(";"===e[t])break;return -1}return t}(e,n);if(-1==t)return R("InvalidChar","char '&' is not expected.",Q(e,n));n=t}else if(!0===s&&!j(e[n]))return R("InvalidXml","Extra text at the end",Q(e,n));"<"===e[n]&&n--}}else{if(j(e[n]))continue;return R("InvalidChar","char '"+e[n]+"' is not expected.",Q(e,n))}return i?1==r.length?R("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Q(e,r[0].tagStartPos)):!(r.length>0)||R("InvalidXml","Invalid '"+JSON.stringify(r.map(e=>e.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):R("InvalidXml","Start tag expected.",1)}(e,t);if(!0!==r)throw Error(`${r.err.msg}:${r.err.line}:${r.err.col}`)}let r=new w(this.options);r.addExternalEntities(this.externalEntities);let i=r.parseXml(e);return this.options.preserveOrder||void 0===i?i:function e(t,r,i){let s,n={};for(let a=0;a<t.length;a++){let o=t[a],l=function(e){let t=Object.keys(e);for(let e=0;e<t.length;e++){let r=t[e];if(":@"!==r)return r}}(o),u="";if(u=void 0===i?l:i+"."+l,l===r.textNodeName)void 0===s?s=o[l]:s+=""+o[l];else if(void 0===l)continue;else if(o[l]){let t=e(o[l],r,u),i=function(e,t){let{textNodeName:r}=t,i=Object.keys(e).length;return 0===i||1===i&&(!!e[r]||"boolean"==typeof e[r]||0===e[r])}(t,r);void 0!==o[z]&&(t[z]=o[z]),o[":@"]?function(e,t,r,i){if(t){let s=Object.keys(t),n=s.length;for(let a=0;a<n;a++){let n=s[a];i.isArray(n,r+"."+n,!0,!0)?e[n]=[t[n]]:e[n]=t[n]}}}(t,o[":@"],u,r):1!==Object.keys(t).length||void 0===t[r.textNodeName]||r.alwaysCreateTextNode?0===Object.keys(t).length&&(r.alwaysCreateTextNode?t[r.textNodeName]="":t=""):t=t[r.textNodeName],void 0!==n[l]&&n.hasOwnProperty(l)?(Array.isArray(n[l])||(n[l]=[n[l]]),n[l].push(t)):r.isArray(l,u,i)?n[l]=[t]:n[l]=t}}return"string"==typeof s?s.length>0&&(n[r.textNodeName]=s):void 0!==s&&(n[r.textNodeName]=s),n}(i,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return g.getMetaDataSymbol()}}({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>""===t.trim()&&t.includes("\n")?"":void 0});X.addEntity("#xD","\r"),X.addEntity("#10","\n");var Z=e.i(528376);let q=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&void 0!==e[r][t]?e[r]=e[r][t]:"object"==typeof e[r]&&null!==e[r]&&(e[r]=q(e[r]));return e};var W=e.i(705557),G=e.i(843131),J=e.i(84411);class H extends G.SerdeContextConfig{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new Z.FromStringShapeDeserializer(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,t,r){let i=n.NormalizedSchema.of(e),s=i.getMemberSchemas();if(i.isStructSchema()&&i.isMemberSchema()&&Object.values(s).find(e=>!!e.getMemberTraits().eventPayload)){let e={},r=Object.keys(s)[0];return s[r].isBlobSchema()?e[r]=t:e[r]=this.read(s[r],t),e}let a=(this.serdeContext?.utf8Encoder??W.toUtf8)(t),o=this.parseXml(a);return this.readSchema(e,r?o[r]:o)}readSchema(e,t){let r=n.NormalizedSchema.of(e);if(r.isUnitSchema())return;let i=r.getMergedTraits();if(r.isListSchema()&&!Array.isArray(t))return this.readSchema(r,[t]);if(null==t)return t;if("object"==typeof t){let e=!!i.sparse,s=!!i.xmlFlattened;if(r.isListSchema()){let i=r.getValueSchema(),n=[],a=i.getMergedTraits().xmlName??"member",o=s?t:(t[0]??t)[a];for(let t of Array.isArray(o)?o:[o])(null!=t||e)&&n.push(this.readSchema(i,t));return n}let n={};if(r.isMapSchema()){let i,a=r.getKeySchema(),o=r.getValueSchema();i=s?Array.isArray(t)?t:[t]:Array.isArray(t.entry)?t.entry:[t.entry];let l=a.getMergedTraits().xmlName??"key",u=o.getMergedTraits().xmlName??"value";for(let t of i){let r=t[l],i=t[u];(null!=i||e)&&(n[r]=this.readSchema(o,i))}return n}if(r.isStructSchema()){let e,i=r.isUnionSchema();for(let[s,a]of(i&&(e=new J.UnionSerde(t,n)),r.structIterator())){let r=a.getMergedTraits(),o=r.httpPayload?r.xmlName??a.getName():a.getMemberTraits().xmlName??s;i&&e.mark(o),null!=t[o]&&(n[s]=this.readSchema(a,t[o]))}return i&&e.writeUnknown(),n}if(r.isDocumentSchema())return t;throw Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${r.getName(!0)}`)}return r.isListSchema()?[]:r.isMapSchema()||r.isStructSchema()?{}:this.stringDeserializer.read(r,t)}parseXml(e){if(e.length){let t;try{t=X.parse(e,!0)}catch(t){throw t&&"object"==typeof t&&Object.defineProperty(t,"$responseBodyText",{value:e}),t}let r="#text",i=Object.keys(t)[0],s=t[i];return s[r]&&(s[i]=s[r],delete s[r]),q(s)}return{}}}var ee=e.i(896283),et=e.i(824587),er=e.i(573242),ei=e.i(895998),es=e.i(946980),en=e.i(794123),ea=G;class eo extends ea.SerdeContextConfig{settings;buffer;constructor(e){super(),this.settings=e}write(e,t,r=""){void 0===this.buffer&&(this.buffer="");let i=n.NormalizedSchema.of(e);if(r&&!r.endsWith(".")&&(r+="."),i.isBlobSchema())("string"==typeof t||t instanceof Uint8Array)&&(this.writeKey(r),this.writeValue((this.serdeContext?.base64Encoder??en.toBase64)(t)));else if(i.isBooleanSchema()||i.isNumericSchema()||i.isStringSchema())null!=t?(this.writeKey(r),this.writeValue(String(t))):i.isIdempotencyToken()&&(this.writeKey(r),this.writeValue((0,er.generateIdempotencyToken)()));else if(i.isBigIntegerSchema())null!=t&&(this.writeKey(r),this.writeValue(String(t)));else if(i.isBigDecimalSchema())null!=t&&(this.writeKey(r),this.writeValue(t instanceof ei.NumericValue?t.string:String(t)));else if(i.isTimestampSchema()){if(t instanceof Date)switch(this.writeKey(r),(0,ee.determineTimestampFormat)(i,this.settings)){case 5:this.writeValue(t.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,es.dateToUtcString)(t));break;case 7:this.writeValue(String(t.getTime()/1e3))}}else if(i.isDocumentSchema())Array.isArray(t)?this.write(79,t,r):t instanceof Date?this.write(4,t,r):t instanceof Uint8Array?this.write(21,t,r):t&&"object"==typeof t?this.write(143,t,r):(this.writeKey(r),this.writeValue(String(t)));else if(i.isListSchema()){if(Array.isArray(t))if(0===t.length)this.settings.serializeEmptyLists&&(this.writeKey(r),this.writeValue(""));else{let e=i.getValueSchema(),s=this.settings.flattenLists||i.getMergedTraits().xmlFlattened,n=1;for(let i of t){if(null==i)continue;let t=this.getKey("member",e.getMergedTraits().xmlName),a=s?`${r}${n}`:`${r}${t}.${n}`;this.write(e,i,a),++n}}}else if(i.isMapSchema()){if(t&&"object"==typeof t){let e=i.getKeySchema(),s=i.getValueSchema(),n=i.getMergedTraits().xmlFlattened,a=1;for(let[i,o]of Object.entries(t)){if(null==o)continue;let t=this.getKey("key",e.getMergedTraits().xmlName),l=n?`${r}${a}.${t}`:`${r}entry.${a}.${t}`,u=this.getKey("value",s.getMergedTraits().xmlName),h=n?`${r}${a}.${u}`:`${r}entry.${a}.${u}`;this.write(e,i,l),this.write(s,o,h),++a}}}else if(i.isStructSchema()){if(t&&"object"==typeof t){let e=!1;for(let[s,n]of i.structIterator()){if(null==t[s]&&!n.isIdempotencyToken())continue;let i=this.getKey(s,n.getMergedTraits().xmlName),a=`${r}${i}`;this.write(n,t[s],a),e=!0}if(!e&&i.isUnionSchema()){let{$unknown:e}=t;if(Array.isArray(e)){let[t,i]=e,s=`${r}${t}`;this.write(15,i,s)}}}}else if(i.isUnitSchema());else throw Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${i.getName(!0)}`)}flush(){if(void 0===this.buffer)throw Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let e=this.buffer;return delete this.buffer,e}getKey(e,t){let r=t??e;return this.settings.capitalizeKeys?r[0].toUpperCase()+r.slice(1):r}writeKey(e){e.endsWith(".")&&(e=e.slice(0,e.length-1)),this.buffer+=`&${(0,et.extendedEncodeURIComponent)(e)}=`}writeValue(e){this.buffer+=(0,et.extendedEncodeURIComponent)(e)}}class el extends i.RpcProtocol{options;serializer;deserializer;mixin=new o.ProtocolLib;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;const t={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new eo(t),this.deserializer=new H(t)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw Error("AWSQuery protocol has no payload codec.")}async serializeRequest(e,t,r){let i=await super.serializeRequest(e,t,r);i.path.endsWith("/")||(i.path+="/"),Object.assign(i.headers,{"content-type":"application/x-www-form-urlencoded"}),"unit"!==(0,s.deref)(e.input)&&i.body||(i.body="");let n=e.name.split("#")[1]??e.name;return i.body=`Action=${n}&Version=${this.options.version}`+i.body,i.body.endsWith("&")&&(i.body=i.body.slice(-1)),i}async deserializeResponse(e,t,i){let s=this.deserializer,a=n.NormalizedSchema.of(e.output),o={};if(i.statusCode>=300){let n=await (0,r.collectBody)(i.body,t);n.byteLength>0&&Object.assign(o,await s.read(15,n)),await this.handleError(e,t,i,o,this.deserializeMetadata(i))}for(let e in i.headers){let t=i.headers[e];delete i.headers[e],i.headers[e.toLowerCase()]=t}let l=e.name.split("#")[1]??e.name,u=a.isStructSchema()&&this.useNestedResult()?l+"Result":void 0,h=await (0,r.collectBody)(i.body,t);return h.byteLength>0&&Object.assign(o,await s.read(a,h,u)),{$metadata:this.deserializeMetadata(i),...o}}useNestedResult(){return!0}async handleError(e,t,r,i,s){let o=this.loadQueryErrorCode(r,i)??"Unknown",l=this.loadQueryError(i),u=this.loadQueryErrorMessage(i);l.message=u,l.Error={Type:l.Type,Code:l.Code,Message:u};let{errorSchema:h,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,r,l,s,this.mixin.findQueryCompatibleError),f=n.NormalizedSchema.of(h),g=new(a.TypeRegistry.for(h[1]).getErrorCtor(h)??Error)(u),c={Type:l.Error.Type,Code:l.Error.Code,Error:l.Error};for(let[e,t]of f.structIterator()){let r=t.getMergedTraits().xmlName??e,s=l[r]??i[r];c[e]=this.deserializer.readSchema(t,s)}throw this.mixin.decorateServiceException(Object.assign(g,d,{$fault:f.getMergedTraits().error,message:u},c),i)}loadQueryErrorCode(e,t){let r=(t.Errors?.[0]?.Error??t.Errors?.Error??t.Error)?.Code;return void 0!==r?r:404==e.statusCode?"NotFound":void 0}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){let t=this.loadQueryError(e);return t?.message??t?.Message??e.message??e.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}e.s(["AwsQueryProtocol",()=>el],640089)}];

//# sourceMappingURL=5c86f_%40aws-sdk_core_dist-es_submodules_protocols_query_AwsQueryProtocol_a71c1d68.js.map