{"version":3,"sources":["../../../../../../../../../OneDrive/Desktop/CURSOR/CONSELHO%20DE%20FUNIL/app/src/app/campaigns/%5Bid%5D/page.tsx","../../../../../../../../../OneDrive/Desktop/CURSOR/CONSELHO%20DE%20FUNIL/app/src/components/campaigns/campaign-stepper.tsx","../../../../../../../../../OneDrive/Desktop/CURSOR/CONSELHO%20DE%20FUNIL/app/src/components/campaigns/stage-card.tsx","../../../../../../../../../OneDrive/Desktop/CURSOR/CONSELHO%20DE%20FUNIL/app/src/components/campaigns/monitoring-dashboard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport { doc, onSnapshot, getDoc, collection, query, where, getDocs, limit } from 'firebase/firestore';\r\nimport { db } from '@/lib/firebase/config';\r\nimport { Header } from '@/components/layout/header';\r\nimport { CampaignStepper } from '@/components/campaigns/campaign-stepper';\r\nimport { StageCard } from '@/components/campaigns/stage-card';\r\nimport { CampaignContext } from '@/types/campaign';\r\nimport { \r\n  Target, \r\n  PenTool, \r\n  Share2, \r\n  Palette, \r\n  BarChart3,\r\n  Sparkles,\r\n  Zap,\r\n  ShieldCheck,\r\n  TrendingUp\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { notify } from '@/lib/stores/notification-store';\r\n\r\nimport { MonitoringDashboard, Metric } from '@/components/campaigns/monitoring-dashboard';\r\n\r\nexport default function CampaignCommandCenter() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const [campaign, setCampaign] = useState<CampaignContext | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [completedStages, setCompletedStages] = useState<string[]>([]);\r\n  const [currentStageId, setCurrentStageId] = useState<string>('funnel');\r\n\r\n  // Mock metrics for ST-11.17\r\n  const [metrics] = useState<Metric[]>([\r\n    { label: 'CTR Médio', value: 0.65, target: 1.2, unit: '%', status: 'danger', change: -12 },\r\n    { label: 'CPC Médio', value: 2.45, target: 1.5, unit: 'currency', status: 'warning', change: 8 },\r\n    { label: 'Conversão', value: 3.2, target: 5.0, unit: '%', status: 'warning', change: -5 },\r\n    { label: 'ROAS', value: 2.1, target: 4.0, unit: 'ratio', status: 'danger', change: -15 },\r\n  ]);\r\n\r\n  const [anomalies] = useState<string[]>([\r\n    \"CTR < 0.8%: O Design não está parando o scroll no Meta Ads. O framework C.H.A.P.E.U sugere aumentar o Contraste e a Hierarquia Visual nos primeiros 3 segundos.\",\r\n    \"CPC acima do benchmark: A segmentação de audiência pode estar muito ampla ou a Big Idea da copy não está ressonando com o público 'Inconsciente'.\"\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!params.id) return;\r\n\r\n    const funnelId = params.id as string;\r\n\r\n    // Monitora a Campanha (Manifesto da Linha de Ouro)\r\n    const unsubCampaign = onSnapshot(doc(db, 'campaigns', funnelId), (docSnap) => {\r\n      if (docSnap.exists()) {\r\n        const campaignData = docSnap.data() as CampaignContext;\r\n        updateUnifiedState(campaignData);\r\n      } else {\r\n        // Se a campanha não existe, tenta carregar do Funil\r\n        loadFromFunnelFallback();\r\n      }\r\n    });\r\n\r\n    // Fallback e Merge de Segurança\r\n    async function loadFromFunnelFallback() {\r\n      try {\r\n        const funnelSnap = await getDoc(doc(db, 'funnels', funnelId));\r\n        if (funnelSnap.exists()) {\r\n          const funnelData = funnelSnap.data();\r\n          \r\n          // Scanner de Copy\r\n          const copyRef = collection(db, 'funnels', funnelId, 'copyProposals');\r\n          const copySnap = await getDocs(query(copyRef, where('status', '==', 'approved'), limit(1)));\r\n          const approvedCopy = copySnap.docs.length > 0 ? copySnap.docs[0].data() : null;\r\n\r\n          const virtualCampaign: CampaignContext = {\r\n            id: funnelId,\r\n            funnelId: funnelId,\r\n            brandId: funnelData.brandId || '',\r\n            userId: funnelData.userId || '',\r\n            name: funnelData.name || 'Nova Campanha',\r\n            status: 'active',\r\n            funnel: {\r\n              type: funnelData.type || 'Funnel',\r\n              architecture: funnelData.architecture || '',\r\n              targetAudience: funnelData.targetAudience || funnelData.context?.audience?.who || '',\r\n              mainGoal: funnelData.mainGoal || funnelData.context?.objective || '',\r\n              stages: funnelData.stages || [],\r\n              summary: funnelData.summary || '',\r\n            },\r\n            copywriting: approvedCopy ? {\r\n              bigIdea: approvedCopy.content.primary?.slice(0, 500) || 'Big Idea aprovada',\r\n              headlines: approvedCopy.content.headlines || [],\r\n              mainScript: approvedCopy.content.primary || '',\r\n              tone: approvedCopy.awarenessStage || 'problem_aware',\r\n              keyBenefits: [],\r\n              counselor_reference: approvedCopy.copywriterInsights?.[0]?.copywriterName || 'Conselho de Copy',\r\n            } : undefined,\r\n            createdAt: funnelData.createdAt,\r\n            updatedAt: funnelData.updatedAt,\r\n          };\r\n          updateUnifiedState(virtualCampaign);\r\n        }\r\n      } catch (err) {\r\n        console.error('Erro no scanner de fallback:', err);\r\n      }\r\n    }\r\n\r\n    function updateUnifiedState(data: CampaignContext) {\r\n      // Se por algum motivo o objeto funnel estiver vindo vazio da coleção campaigns,\r\n      // nós mantemos a estrutura básica para não quebrar a UI\r\n      if (!data.funnel) {\r\n        data.funnel = { type: 'Funnel', architecture: '', targetAudience: '', mainGoal: '', stages: [], summary: '' };\r\n      }\r\n      \r\n      setCampaign(data);\r\n      \r\n      // Calculate completed stages\r\n      const completed = [];\r\n      if (data.funnel) completed.push('funnel');\r\n      if (data.copywriting) completed.push('copy');\r\n      if (data.social) completed.push('social');\r\n      if (data.design) completed.push('design');\r\n      if (data.ads) completed.push('ads');\r\n      setCompletedStages(completed);\r\n\r\n      // Determine current stage\r\n      if (!data.copywriting) setCurrentStageId('copy');\r\n      else if (!data.social) setCurrentStageId('social');\r\n      else if (!data.design) setCurrentStageId('design');\r\n      else if (!data.ads) setCurrentStageId('ads');\r\n      else setCurrentStageId('ads');\r\n\r\n      setLoading(false);\r\n    }\r\n\r\n    return () => unsubCampaign();\r\n  }, [params.id]);\r\n\r\n  const handleAction = async (stageId: string) => {\r\n    if (!campaign) return;\r\n    \r\n    notify.info(`Iniciando ${stageId}`, `O Conselho está sendo convocado...`);\r\n    \r\n    // Logic for handoff (ST-11.15) would go here\r\n    // For now, we'll navigate to the specific stage view if it exists\r\n    if (stageId === 'funnel') {\r\n      router.push(`/funnels/${campaign.funnelId}?campaignId=${campaign.id}`);\r\n    } else if (stageId === 'copy') {\r\n      router.push(`/funnels/${campaign.funnelId}/copy?campaignId=${campaign.id}`);\r\n    } else if (stageId === 'social') {\r\n      router.push(`/funnels/${campaign.funnelId}/social?campaignId=${campaign.id}`);\r\n    } else if (stageId === 'design') {\r\n      // US-20.3: Direcionar para a inteligência visual do NanoBanana\r\n      router.push(`/chat?mode=design&funnelId=${campaign.funnelId}&campaignId=${campaign.id}`);\r\n    } else if (stageId === 'ads') {\r\n      // ST-11.16: Convocar Conselho de Tráfego\r\n      router.push(`/chat?mode=ads&funnelId=${campaign.funnelId}&campaignId=${campaign.id}`);\r\n    } else {\r\n      notify.warning('Em desenvolvimento', `A etapa de ${stageId} está sendo preparada.`);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex min-h-screen flex-col bg-black\">\r\n        <Header title=\"Carregando Comando...\" showBack />\r\n        <div className=\"flex-1 flex items-center justify-center\">\r\n          <motion.div\r\n            animate={{ scale: [1, 1.1, 1] }}\r\n            transition={{ duration: 2, repeat: Infinity }}\r\n          >\r\n            <Sparkles className=\"h-12 w-12 text-emerald-500 opacity-20\" />\r\n          </motion.div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!campaign) {\r\n    return (\r\n      <div className=\"flex min-h-screen flex-col bg-black\">\r\n        <Header title=\"Campanha não encontrada\" showBack />\r\n        <div className=\"flex-1 flex items-center justify-center p-8\">\r\n          <div className=\"text-center\">\r\n            <ShieldCheck className=\"h-16 w-16 text-zinc-800 mx-auto mb-4\" />\r\n            <h2 className=\"text-xl font-bold text-white mb-2\">Campanha Extraviada</h2>\r\n            <p className=\"text-zinc-500 max-w-xs mx-auto\">\r\n              Não conseguimos localizar este manifesto estratégico no nosso banco de dados.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen flex-col bg-black overflow-x-hidden\">\r\n      <Header \r\n        title={campaign.name || \"Campanha Sem Nome\"} \r\n        showBack \r\n        subtitle=\"Campaign Command Center\"\r\n      />\r\n\r\n      <div className=\"flex-1 max-w-7xl mx-auto w-full px-4 py-6 sm:px-6 sm:py-8\">\r\n        {/* The Golden Thread Stepper */}\r\n        <section className=\"mb-8 sm:mb-12\">\r\n          <div className=\"flex items-center gap-3 mb-4 sm:mb-6\">\r\n            <Zap className=\"h-4 w-4 sm:h-5 sm:w-5 text-amber-400\" />\r\n            <h2 className=\"text-[10px] sm:text-sm font-bold uppercase tracking-[0.2em] text-zinc-400\">\r\n              The Golden Thread\r\n            </h2>\r\n          </div>\r\n          <CampaignStepper \r\n            currentStageId={currentStageId} \r\n            completedStages={completedStages} \r\n          />\r\n        </section>\r\n\r\n        {/* Action Grid */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-12\">\r\n          <StageCard\r\n            title=\"O Cérebro\"\r\n            description=\"Arquitetura & Estratégia de Funil\"\r\n            icon={Target}\r\n            status={campaign.funnel ? 'approved' : 'empty'}\r\n            summary={campaign.funnel ? [\r\n              `Tipo: ${campaign.funnel.type}`,\r\n              `Objetivo: ${campaign.funnel.mainGoal}`,\r\n              `Público: ${campaign.funnel.targetAudience}`\r\n            ] : []}\r\n            onAction={() => handleAction('funnel')}\r\n            actionLabel={campaign.funnel ? \"Ver Estratégia\" : \"Definir Funil\"}\r\n            isActive={currentStageId === 'funnel'}\r\n          />\r\n\r\n          <StageCard\r\n            title=\"A Voz\"\r\n            description=\"Copywriting Persuasivo\"\r\n            icon={PenTool}\r\n            status={campaign.copywriting ? 'approved' : campaign.funnel ? 'empty' : 'empty'}\r\n            summary={campaign.copywriting ? [\r\n              `Big Idea: ${campaign.copywriting.bigIdea.slice(0, 60)}...`,\r\n              `Tom: ${campaign.copywriting.tone}`,\r\n              `Base: ${campaign.copywriting.counselor_reference || 'Conselho'}`\r\n            ] : []}\r\n            onAction={() => handleAction('copy')}\r\n            actionLabel={campaign.copywriting ? \"Ver Copy\" : \"Gerar Copy\"}\r\n            isActive={currentStageId === 'copy'}\r\n          />\r\n\r\n          <StageCard\r\n            title=\"A Atenção\"\r\n            description=\"Social Media & Hooks\"\r\n            icon={Share2}\r\n            status={campaign.social ? 'approved' : campaign.copywriting ? 'empty' : 'empty'}\r\n            summary={campaign.social ? [\r\n              `${campaign.social.hooks?.length || 0} Hooks estratégicos`,\r\n              `Plataformas: ${campaign.social.platforms?.join(', ') || 'Todas'}`\r\n            ] : []}\r\n            onAction={() => handleAction('social')}\r\n            actionLabel={campaign.social ? \"Ver Hooks\" : \"Gerar Hooks\"}\r\n            isActive={currentStageId === 'social'}\r\n          />\r\n\r\n          <StageCard\r\n            title=\"O Visual\"\r\n            description=\"Design Intelligence (C.H.A.P.E.U)\"\r\n            icon={Palette}\r\n            status={campaign.design ? 'approved' : campaign.social ? 'ready' : 'empty'}\r\n            summary={campaign.design ? [\r\n              `Estilo: ${campaign.design.visualStyle}`,\r\n              `${campaign.design.assetsUrl?.length || 0} Criativo(s) na Linha de Ouro`,\r\n              `Engine: NanoBanana Pro`\r\n            ] : campaign.social ? ['Aguardando definição visual'] : []}\r\n            onAction={() => handleAction('design')}\r\n            actionLabel={campaign.design ? \"Ver Design\" : \"Gerar Visuais\"}\r\n            isActive={currentStageId === 'design'}\r\n          />\r\n\r\n          <StageCard\r\n            title=\"A Escala\"\r\n            description=\"Conselho de Ads & Tráfego\"\r\n            icon={BarChart3}\r\n            status={campaign.ads ? 'approved' : campaign.design ? 'ready' : 'empty'}\r\n            summary={campaign.ads ? [\r\n              `Canais: ${campaign.ads.channels.join(', ')}`,\r\n              `Budget Sugerido: ${campaign.ads.suggestedBudget}`\r\n            ] : campaign.design ? [\r\n              'Design & Copy sincronizados',\r\n              'Pronto para definir canais e budget'\r\n            ] : []}\r\n            onAction={() => handleAction('ads')}\r\n            actionLabel={campaign.ads ? \"Ver Campanha\" : \"Gerar Estrutura Ads\"}\r\n            isActive={currentStageId === 'ads'}\r\n          />\r\n        </div>\r\n\r\n        {/* Monitoring Dashboard (ST-11.17 & ST-11.18) */}\r\n        <section className=\"mt-12\">\r\n          <MonitoringDashboard \r\n            metrics={metrics} \r\n            anomalies={anomalies} \r\n            onRefresh={() => notify.info('Sincronizando', 'Buscando métricas da Meta Ads API...')}\r\n          />\r\n        </section>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { motion } from 'framer-motion';\r\nimport { Check, LucideIcon, Target, PenTool, Share2, Palette, BarChart3 } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\nexport interface CampaignStep {\r\n  id: string;\r\n  title: string;\r\n  icon: LucideIcon;\r\n  status: 'pending' | 'active' | 'completed';\r\n}\r\n\r\nexport const CAMPAIGN_STAGES: CampaignStep[] = [\r\n  { id: 'funnel', title: 'Funil', icon: Target, status: 'pending' },\r\n  { id: 'copy', title: 'Copy', icon: PenTool, status: 'pending' },\r\n  { id: 'social', title: 'Social', icon: Share2, status: 'pending' },\r\n  { id: 'design', title: 'Design', icon: Palette, status: 'pending' },\r\n  { id: 'ads', title: 'Ads', icon: BarChart3, status: 'pending' },\r\n];\r\n\r\ninterface CampaignStepperProps {\r\n  currentStageId: string;\r\n  completedStages: string[];\r\n}\r\n\r\nexport function CampaignStepper({ currentStageId, completedStages }: CampaignStepperProps) {\r\n  return (\r\n    <div className=\"w-full py-4 sm:py-6 overflow-x-auto scrollbar-none\">\r\n      <div className=\"flex items-center justify-between min-w-[340px] max-w-4xl mx-auto px-4 gap-2\">\r\n        {CAMPAIGN_STAGES.map((stage, index) => {\r\n          const isCompleted = completedStages.includes(stage.id);\r\n          const isActive = currentStageId === stage.id;\r\n          \r\n          return (\r\n            <div key={stage.id} className=\"flex items-center flex-1 last:flex-none\">\r\n              <div className=\"flex flex-col items-center relative group\">\r\n                <motion.div\r\n                  initial={false}\r\n                  animate={{\r\n                    backgroundColor: isCompleted \r\n                      ? 'rgb(16, 185, 129)' \r\n                      : isActive \r\n                        ? 'rgba(16, 185, 129, 0.2)' \r\n                        : 'rgba(255, 255, 255, 0.04)',\r\n                    borderColor: isCompleted || isActive ? 'rgb(16, 185, 129)' : 'rgba(255, 255, 255, 0.1)',\r\n                  }}\r\n                  className={cn(\r\n                    'flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl sm:rounded-2xl border-2 transition-all shadow-lg',\r\n                    isCompleted ? 'text-white' : isActive ? 'text-emerald-400' : 'text-zinc-600'\r\n                  )}\r\n                >\r\n                  {isCompleted ? (\r\n                    <Check className=\"h-5 w-5 sm:h-6 sm:w-6\" />\r\n                  ) : (\r\n                    <stage.icon className=\"h-5 w-5 sm:h-6 sm:w-6\" />\r\n                  )}\r\n                </motion.div>\r\n                \r\n                {/* label */}\r\n                <div className={cn(\r\n                  \"absolute -bottom-6 sm:-bottom-8 flex flex-col items-center transition-all duration-300\",\r\n                  isActive ? \"opacity-100 translate-y-0\" : \"opacity-0 sm:opacity-60 translate-y-1\"\r\n                )}>\r\n                  <span className={cn(\r\n                    \"text-[8px] sm:text-xs font-bold uppercase tracking-wider whitespace-nowrap\",\r\n                    isActive ? \"text-emerald-400\" : \"text-zinc-500\"\r\n                  )}>\r\n                    {stage.title}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              \r\n              {index < CAMPAIGN_STAGES.length - 1 && (\r\n                <div className=\"flex-1 mx-2 sm:mx-4 h-[2px] bg-zinc-800 rounded-full relative overflow-hidden\">\r\n                  <motion.div\r\n                    initial={{ width: '0%' }}\r\n                    animate={{ width: isCompleted ? '100%' : '0%' }}\r\n                    className=\"absolute inset-0 bg-emerald-500\"\r\n                    transition={{ duration: 0.5 }}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { motion } from 'framer-motion';\r\nimport { LucideIcon, ChevronRight, Sparkles, AlertCircle } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface StageCardProps {\r\n  title: string;\r\n  description: string;\r\n  icon: LucideIcon;\r\n  status: 'empty' | 'generating' | 'ready' | 'approved';\r\n  summary?: string[];\r\n  onAction: () => void;\r\n  actionLabel: string;\r\n  isActive: boolean;\r\n}\r\n\r\nexport function StageCard({\r\n  title,\r\n  description,\r\n  icon: Icon,\r\n  status,\r\n  summary,\r\n  onAction,\r\n  actionLabel,\r\n  isActive\r\n}: StageCardProps) {\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      className={cn(\r\n        \"card-premium p-6 transition-all duration-300 border-l-4\",\r\n        isActive ? \"border-emerald-500 bg-emerald-500/[0.02]\" : \"border-transparent opacity-80\",\r\n        status === 'ready' && !isActive && \"border-blue-500/50\"\r\n      )}\r\n    >\r\n      <div className=\"flex items-start justify-between mb-4\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className={cn(\r\n            \"p-3 rounded-xl\",\r\n            isActive ? \"bg-emerald-500/10 text-emerald-400\" : \"bg-zinc-800 text-zinc-500\"\r\n          )}>\r\n            <Icon className=\"h-6 w-6\" />\r\n          </div>\r\n          <div>\r\n            <h3 className=\"text-lg font-bold text-white uppercase tracking-tight\">{title}</h3>\r\n            <p className=\"text-sm text-zinc-500\">{description}</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className={cn(\r\n          \"px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest\",\r\n          status === 'approved' ? \"bg-emerald-500/10 text-emerald-400\" :\r\n          status === 'ready' ? \"bg-blue-500/10 text-blue-400\" :\r\n          status === 'generating' ? \"bg-amber-500/10 text-amber-400 animate-pulse\" :\r\n          \"bg-zinc-800 text-zinc-500\"\r\n        )}>\r\n          {status === 'approved' ? 'Aprovado' :\r\n           status === 'ready' ? 'Pronto' :\r\n           status === 'generating' ? 'Gerando...' :\r\n           'Pendente'}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"min-h-[100px] mb-6\">\r\n        {summary && summary.length > 0 ? (\r\n          <ul className=\"space-y-2\">\r\n            {summary.map((item, i) => (\r\n              <li key={i} className=\"flex items-start gap-2 text-sm text-zinc-300\">\r\n                <ChevronRight className=\"h-4 w-4 text-emerald-500 shrink-0 mt-0.5\" />\r\n                <span>{item}</span>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        ) : (\r\n          <div className=\"flex flex-col items-center justify-center h-full py-4 text-center\">\r\n            <AlertCircle className=\"h-8 w-8 text-zinc-700 mb-2\" />\r\n            <p className=\"text-xs text-zinc-600 italic\">\r\n              Aguardando conclusão da etapa anterior\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <Button\r\n        onClick={onAction}\r\n        disabled={status === 'generating' || (!isActive && status === 'empty')}\r\n        className={cn(\r\n          \"w-full font-bold uppercase tracking-wider text-xs h-10 transition-all\",\r\n          isActive \r\n            ? \"bg-emerald-600 hover:bg-emerald-500 text-white shadow-[0_0_20px_rgba(16,185,129,0.2)]\" \r\n            : \"btn-ghost border-zinc-800 text-zinc-500\"\r\n        )}\r\n      >\r\n        {status === 'generating' ? (\r\n          <div className=\"flex items-center gap-2\">\r\n            <motion.div\r\n              animate={{ rotate: 360 }}\r\n              transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\r\n            >\r\n              <Sparkles className=\"h-4 w-4\" />\r\n            </motion.div>\r\n            Consultando Conselho...\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {actionLabel}\r\n            <ChevronRight className=\"h-4 w-4 ml-2\" />\r\n          </>\r\n        )}\r\n      </Button>\r\n    </motion.div>\r\n  );\r\n}\r\n","import { motion } from 'framer-motion';\r\nimport { \r\n  TrendingUp, \r\n  TrendingDown, \r\n  Activity, \r\n  Target, \r\n  MousePointer2, \r\n  RefreshCcw,\r\n  AlertTriangle,\r\n  Lightbulb\r\n} from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Button } from '@/components/ui/button';\r\n\r\nexport interface Metric {\r\n  label: string;\r\n  value: string | number;\r\n  change?: number;\r\n  target?: number;\r\n  unit: string;\r\n  status: 'success' | 'warning' | 'danger' | 'neutral';\r\n}\r\n\r\ninterface MonitoringDashboardProps {\r\n  metrics: Metric[];\r\n  anomalies?: string[];\r\n  onRefresh: () => void;\r\n}\r\n\r\nexport function MonitoringDashboard({ metrics, anomalies, onRefresh }: MonitoringDashboardProps) {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <Activity className=\"h-5 w-5 text-emerald-400\" />\r\n          <h2 className=\"text-lg font-bold text-white uppercase tracking-tight\">Real-Time Performance</h2>\r\n        </div>\r\n        <Button variant=\"ghost\" size=\"sm\" onClick={onRefresh} className=\"text-zinc-500 hover:text-white\">\r\n          <RefreshCcw className=\"h-4 w-4 mr-2\" />\r\n          Atualizar Dados\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Metrics Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        {metrics.map((metric, index) => (\r\n          <motion.div\r\n            key={metric.label}\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: index * 0.1 }}\r\n            className=\"card-premium p-4 border-t-2 border-t-zinc-800\"\r\n          >\r\n            <div className=\"text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1\">\r\n              {metric.label}\r\n            </div>\r\n            <div className=\"flex items-end justify-between\">\r\n              <div className=\"text-2xl font-black text-white\">\r\n                {metric.unit === 'currency' ? `R$ ${metric.value}` : metric.value}{metric.unit === '%' ? '%' : ''}\r\n              </div>\r\n              {metric.change !== undefined && (\r\n                <div className={cn(\r\n                  \"flex items-center text-xs font-bold\",\r\n                  metric.change >= 0 ? \"text-emerald-400\" : \"text-red-400\"\r\n                )}>\r\n                  {metric.change >= 0 ? <TrendingUp className=\"h-3 w-3 mr-1\" /> : <TrendingDown className=\"h-3 w-3 mr-1\" />}\r\n                  {Math.abs(metric.change)}%\r\n                </div>\r\n              )}\r\n            </div>\r\n            {metric.target && (\r\n              <div className=\"mt-3 pt-3 border-t border-white/[0.03]\">\r\n                <div className=\"flex items-center justify-between text-[9px] mb-1\">\r\n                  <span className=\"text-zinc-600 font-bold uppercase\">Meta: {metric.target}{metric.unit === '%' ? '%' : ''}</span>\r\n                  <span className={cn(\r\n                    \"font-bold\",\r\n                    metric.status === 'success' ? \"text-emerald-500\" : \r\n                    metric.status === 'danger' ? \"text-red-500\" : \"text-amber-500\"\r\n                  )}>\r\n                    {metric.status === 'success' ? 'No Alvo' : 'Desvio'}\r\n                  </span>\r\n                </div>\r\n                <div className=\"h-1 bg-zinc-900 rounded-full overflow-hidden\">\r\n                  <div \r\n                    className={cn(\r\n                      \"h-full rounded-full transition-all duration-1000\",\r\n                      metric.status === 'success' ? \"bg-emerald-500\" : \r\n                      metric.status === 'danger' ? \"bg-red-500\" : \"bg-amber-500\"\r\n                    )}\r\n                    style={{ width: `${Math.min((Number(metric.value) / metric.target) * 100, 100)}%` }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </motion.div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* AI Insights & Anomalies (ST-11.18) */}\r\n      {anomalies && anomalies.length > 0 && (\r\n        <motion.div\r\n          initial={{ opacity: 0, scale: 0.98 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          className=\"card-premium p-5 border-l-4 border-l-amber-500 bg-amber-500/[0.02]\"\r\n        >\r\n          <div className=\"flex items-center gap-2 mb-4\">\r\n            <AlertTriangle className=\"h-5 w-5 text-amber-500\" />\r\n            <h3 className=\"text-sm font-bold text-white uppercase tracking-wider\">Detecção de Anomalia Estratégica</h3>\r\n          </div>\r\n          \r\n          <div className=\"space-y-4\">\r\n            {anomalies.map((anomaly, i) => (\r\n              <div key={i} className=\"flex gap-4\">\r\n                <div className=\"h-8 w-8 rounded-full bg-amber-500/10 flex items-center justify-center shrink-0\">\r\n                  <Lightbulb className=\"h-4 w-4 text-amber-500\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm text-zinc-300 leading-relaxed\">\r\n                    {anomaly}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          \r\n          <div className=\"mt-6 pt-4 border-t border-white/[0.05] flex justify-end\">\r\n            <Button size=\"sm\" className=\"btn-accent h-8 text-[10px] uppercase font-bold tracking-widest\">\r\n              Aplicar Ajustes no Funil\r\n            </Button>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}