module.exports=[317953,a=>{"use strict";let b=(0,a.i(47916).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],317953)},749172,a=>{"use strict";let b=(0,a.i(47916).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],749172)},430413,a=>{"use strict";let b=(0,a.i(47916).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);a.s(["TrendingDown",()=>b],430413)},843313,a=>{"use strict";var b=a.i(194327),c=a.i(582583),d=a.i(289036);a.i(543317);var e=a.i(134034),f=a.i(860342),g=a.i(759837),h=a.i(459966),i=a.i(270509),j=a.i(430413),k=a.i(168565),l=a.i(399385),m=a.i(749172),n=a.i(880925),o=a.i(612852),p=a.i(271211),q=a.i(176173),r=a.i(810045);let s={draft:{color:"#71717a",label:"Rascunho"},generating:{color:"#3b82f6",label:"Gerando"},review:{color:"#f59e0b",label:"Avaliar"},approved:{color:"#10b981",label:"Aprovado"},adjusting:{color:"#8b5cf6",label:"Ajustando"},executing:{color:"#06b6d4",label:"Executando"},completed:{color:"#10b981",label:"ConcluÃ­do"},killed:{color:"#ef4444",label:"Cancelado"}};function t({data:a,maxValue:c}){return(0,b.jsx)("div",{className:"flex items-end gap-1 h-24",children:a.map((a,e)=>{let f=c>0?a.count/c*100:0;return(0,b.jsx)(d.motion.div,{initial:{height:0},animate:{height:`${f}%`},transition:{delay:.1*e,duration:.3},className:"flex-1 rounded-t-sm transition-all hover:opacity-80",style:{backgroundColor:a.color,minHeight:a.count>0?"8px":"2px"},title:`${a.label}: ${a.count}`},a.status)})})}function u({data:a,total:c}){let e=0;return(0,b.jsxs)("div",{className:"relative w-32 h-32",children:[(0,b.jsxs)("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:[(0,b.jsx)("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",stroke:"#27272a",strokeWidth:"3"}),a.map((a,f)=>{let g=c>0?a.count/c*100:0,h=`${g} ${100-g}`,i=-e;return e+=g,(0,b.jsx)(d.motion.circle,{cx:"18",cy:"18",r:"15.9",fill:"none",stroke:a.color,strokeWidth:"3",strokeDasharray:h,strokeDashoffset:i,strokeLinecap:"round",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1*f}},a.status)})]}),(0,b.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,b.jsx)("span",{className:"text-2xl font-bold text-white",children:c}),(0,b.jsx)("span",{className:"text-xs text-zinc-500",children:"total"})]})]})}function v({icon:a,label:c,value:d,trend:e,color:f="emerald"}){return(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:(0,r.cn)("flex h-10 w-10 items-center justify-center rounded-lg",{emerald:"bg-emerald-500/10 text-emerald-400",amber:"bg-amber-500/10 text-amber-400",red:"bg-red-500/10 text-red-400",blue:"bg-blue-500/10 text-blue-400"}[f]),children:(0,b.jsx)(a,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-zinc-500",children:c}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("p",{className:"text-lg font-semibold text-white",children:d}),e&&(0,b.jsxs)("span",{className:(0,r.cn)("flex items-center text-xs",e.positive?"text-emerald-400":"text-red-400"),children:[e.positive?(0,b.jsx)(i.TrendingUp,{className:"h-3 w-3"}):(0,b.jsx)(j.TrendingDown,{className:"h-3 w-3"}),Math.abs(e.value),"%"]})]})]})]})}function w({funnels:a,decisions:e,className:f}){let g=(0,c.useMemo)(()=>{let b=Object.entries(s).map(([b,c])=>({status:b,count:a.filter(a=>a.status===b).length,...c})),c=a.length,d=a.filter(a=>!["completed","killed","draft"].includes(a.status)).length,f=a.filter(a=>"approved"===a.status).length,g=a.filter(a=>"killed"===a.status).length,h=new Date;h.setDate(1),h.setHours(0,0,0,0);let i=e.filter(a=>(a.createdAt?.toDate?.()||new Date(a.createdAt))>=h).length,j=e.filter(a=>"EXECUTAR"===a.type).length,k=j+e.filter(a=>"AJUSTAR"===a.type).length+e.filter(a=>"MATAR"===a.type).length;return{statusCounts:b,total:c,active:d,approved:f,killed:g,decisionsThisMonth:i,approvalRate:k>0?Math.round(j/k*100):0,objectiveCounts:["leads","sales","calls","retention"].map(b=>({objective:b,count:a.filter(a=>a.context.objective===b).length})),maxStatusCount:Math.max(...b.map(a=>a.count))}},[a,e]);return 0===a.length?null:(0,b.jsxs)("div",{className:(0,r.cn)("space-y-6",f),children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.Activity,{className:"h-5 w-5 text-emerald-400"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Analytics"})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card-premium p-4",children:(0,b.jsx)(v,{icon:k.Target,label:"Total de Funis",value:g.total,color:"emerald"})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card-premium p-4",children:(0,b.jsx)(v,{icon:n.Zap,label:"Funis Ativos",value:g.active,color:"blue"})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card-premium p-4",children:(0,b.jsx)(v,{icon:l.CheckCircle2,label:"Taxa de AprovaÃ§Ã£o",value:`${g.approvalRate}%`,trend:{value:g.approvalRate,positive:g.approvalRate>=50},color:"emerald"})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card-premium p-4",children:(0,b.jsx)(v,{icon:m.Clock,label:"DecisÃµes este mÃªs",value:g.decisionsThisMonth,color:"amber"})})]}),(0,b.jsxs)("div",{className:"grid gap-5 md:grid-cols-2",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card-premium p-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(p.PieChart,{className:"h-4 w-4 text-zinc-500"}),(0,b.jsx)("h4",{className:"text-sm font-medium text-zinc-400",children:"DistribuiÃ§Ã£o por Status"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsx)(u,{data:g.statusCounts.filter(a=>a.count>0),total:g.total}),(0,b.jsx)("div",{className:"flex-1 space-y-2",children:g.statusCounts.filter(a=>a.count>0).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:a.color}}),(0,b.jsx)("span",{className:"text-zinc-400",children:a.label})]}),(0,b.jsx)("span",{className:"font-medium text-white",children:a.count})]},a.status))})]})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card-premium p-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(o.BarChart3,{className:"h-4 w-4 text-zinc-500"}),(0,b.jsx)("h4",{className:"text-sm font-medium text-zinc-400",children:"Funis por Status"})]}),(0,b.jsx)(t,{data:g.statusCounts,maxValue:g.maxStatusCount}),(0,b.jsx)("div",{className:"flex justify-between mt-2 text-xs text-zinc-600",children:g.statusCounts.slice(0,4).map(a=>(0,b.jsx)("span",{children:a.label.slice(0,3)},a.status))})]})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"card-premium p-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(k.Target,{className:"h-4 w-4 text-zinc-500"}),(0,b.jsx)("h4",{className:"text-sm font-medium text-zinc-400",children:"Funis por Objetivo"})]}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-4",children:g.objectiveCounts.map((a,c)=>{let e=g.total>0?Math.round(a.count/g.total*100):0,f={leads:{label:"Leads",icon:"ðŸ“§"},sales:{label:"Vendas",icon:"ðŸ’°"},calls:{label:"Chamadas",icon:"ðŸ“ž"},retention:{label:"RetenÃ§Ã£o",icon:"ðŸ”„"}};return(0,b.jsxs)(d.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.7+.1*c},className:"text-center p-3 rounded-lg bg-white/[0.02]",children:[(0,b.jsx)("div",{className:"text-2xl mb-1",children:f[a.objective]?.icon||"ðŸ“Š"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-white",children:a.count}),(0,b.jsx)("p",{className:"text-xs text-zinc-500",children:f[a.objective]?.label||a.objective}),(0,b.jsx)("div",{className:"mt-2 h-1 bg-zinc-800 rounded-full overflow-hidden",children:(0,b.jsx)(d.motion.div,{initial:{width:0},animate:{width:`${e}%`},transition:{delay:.8+.1*c,duration:.5},className:"h-full bg-emerald-500 rounded-full"})})]},a.objective)})})]})]})}var x=a.i(317953);function y(){let{user:a}=(0,g.useAuthStore)(),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{!async function(){if(a)try{let b=(0,e.query)((0,e.collection)(f.db,"funnels"),(0,e.where)("userId","==",a.uid)),c=(await (0,e.getDocs)(b)).docs.map(a=>({id:a.id,...a.data()}));j(c);let d=(0,e.query)((0,e.collection)(f.db,"decisions"),(0,e.where)("userId","==",a.uid)),g=(await (0,e.getDocs)(d)).docs.map(a=>({id:a.id,...a.data()}));g.sort((a,b)=>{let c=a.createdAt?.seconds||0;return(b.createdAt?.seconds||0)-c}),l(g)}catch(a){console.error("Error loading analytics data:",a)}finally{n(!1)}}()},[a]),m)?(0,b.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,b.jsx)(h.Header,{title:"Analytics"}),(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,b.jsx)(x.Loader2,{className:"h-8 w-8 animate-spin text-zinc-500"})})]}):(0,b.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,b.jsx)(h.Header,{title:"Analytics"}),(0,b.jsxs)("div",{className:"flex-1 p-8",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,b.jsx)(o.BarChart3,{className:"h-7 w-7 text-emerald-400"}),"Analytics de Funis"]}),(0,b.jsx)("p",{className:"mt-2 text-zinc-400",children:"Visualize mÃ©tricas e insights sobre seus funis"})]}),0===i.length?(0,b.jsxs)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"card-premium p-12 text-center",children:[(0,b.jsx)(o.BarChart3,{className:"h-12 w-12 text-zinc-600 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Nenhum dado ainda"}),(0,b.jsx)("p",{className:"text-zinc-500",children:"Crie seu primeiro funil para comeÃ§ar a ver analytics"})]}):(0,b.jsx)(w,{funnels:i,decisions:k})]})]})}a.s(["default",()=>y],843313)}];

//# sourceMappingURL=OneDrive_Desktop_CURSOR_CONSELHO%20DE%20FUNIL_c16edc6a._.js.map