module.exports=[544782,a=>{"use strict";var b=a.i(194327),c=a.i(582583),d=a.i(126236),e=a.i(289036),f=a.i(459966),g=a.i(248842),h=a.i(74552),i=a.i(810045),j=a.i(480967),k=c,l=a.i(698565);let m=(0,a.i(47916).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);class n extends k.Component{state={hasError:!1,error:null};static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,b){console.error("ErrorBoundary caught an error:",a,b)}handleReset=()=>{this.setState({hasError:!1,error:null}),this.props.onReset?.()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,b.jsxs)("div",{className:"rounded-xl border border-red-500/20 bg-red-500/5 p-8 text-center",children:[(0,b.jsx)(l.AlertCircle,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"Ops! Algo deu errado."}),(0,b.jsx)("p",{className:"text-zinc-400 mb-6 max-w-md mx-auto",children:"Ocorreu um erro ao carregar esta seÃ§Ã£o. Isso pode ser uma falha temporÃ¡ria ou um problema de conexÃ£o."}),(0,b.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,b.jsxs)(g.Button,{variant:"outline",onClick:this.handleReset,className:"border-zinc-800 text-zinc-400 hover:text-white",children:[(0,b.jsx)(m,{className:"mr-2 h-4 w-4"}),"Tentar Novamente"]}),(0,b.jsx)(g.Button,{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-700 text-white",children:"Recarregar PÃ¡gina"})]}),!1]}):this.props.children}}var o=a.i(468772),p=a.i(460228),q=a.i(185589),r=a.i(393045),s=a.i(317953),t=a.i(745593),t=t,u=a.i(976839),v=a.i(749172),w=a.i(829277),x=a.i(668616),y=a.i(822399),z=a.i(806044),A=a.i(463963),B=a.i(548709),C=a.i(759837),D=a.i(70076);a.i(543317);var E=a.i(134034),F=a.i(453764),G=a.i(428485),H=a.i(443535),I=a.i(925981),J=a.i(12727);function K(){let a=(0,d.useRouter)(),k=(0,d.useParams)().id,{brands:m,isLoading:K}=(0,B.useBrands)(),{user:L}=(0,C.useAuthStore)(),[M,N]=(0,c.useState)([]),[O,P]=(0,c.useState)(!0),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(null),[U,V]=(0,c.useState)(null),W=m.find(a=>a.id===k),X=async()=>{try{P(!0);let a=await (0,D.getBrandAssets)(k);N(a)}catch(a){console.error("Erro ao carregar assets:",a)}finally{P(!1)}};(0,c.useEffect)(()=>{k&&X()},[k]);let Y=async(a,b)=>{if(confirm("Tem certeza que deseja excluir este arquivo?"))try{R(a),await (0,D.deleteAsset)(a,b),N(b=>b.filter(b=>b.id!==a)),F.toast.success("Arquivo excluÃ­do com sucesso")}catch(a){console.error("Erro ao deletar asset:",a),F.toast.error("Erro ao deletar arquivo")}finally{R(null)}},Z=async a=>{if(L)try{let b=!a.isApprovedForAI;await (0,D.toggleAssetApproval)(a.id,b,L.uid),N(c=>c.map(c=>c.id===a.id?{...c,isApprovedForAI:b}:c)),F.toast.success(b?"Asset liberado para a IA":"Asset removido da IA")}catch(a){console.error("Erro ao alternar aprovaÃ§Ã£o:",a),F.toast.error("Erro ao atualizar status de aprovaÃ§Ã£o")}},$=async a=>{try{T(a.id);let b=await fetch("/api/design/upscale",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:a.url,factor:2})});if(!b.ok)throw Error("Falha no Upscale");let c=await b.json();if(c.success){let b={brandId:a.brandId,userId:a.userId,name:`${a.name} (HD 2x)`,originalName:`hd_${a.originalName}`,type:"image",mimeType:"image/webp",size:0,url:c.upscaledUrl,status:"ready",isApprovedForAI:!1,createdAt:E.Timestamp.now(),description:`Vers\xe3o HD gerada via Upscale 2x. Original: ${a.name}`,tags:[...a.tags||[],"upscaled"]},d=await (0,D.createAsset)(b),e={...b,id:d};N(a=>[e,...a]),F.toast.success("VersÃ£o HD gerada com sucesso!")}}catch(a){console.error("Upscale error:",a),F.toast.error("Erro ao processar upscale da imagem")}finally{T(null)}};return K||O?(0,b.jsx)("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(s.Loader2,{className:"h-8 w-8 text-emerald-500 animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-zinc-500",children:"Carregando arquivos..."})]})}):W?(0,b.jsxs)("div",{className:"min-h-screen bg-zinc-950",children:[(0,b.jsx)(f.Header,{showBrandSelector:!1}),(0,b.jsxs)("main",{className:"mx-auto max-w-4xl px-6 py-12",children:[(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsxs)("button",{onClick:()=>a.push("/brands"),className:"inline-flex items-center text-sm text-zinc-500 hover:text-white transition-colors",children:[(0,b.jsx)(o.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Voltar para Marcas"]})}),(0,b.jsxs)("div",{className:"mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"ðŸ“ Arquivos da Marca"}),(0,b.jsxs)("p",{className:"text-zinc-500",children:[W.name," â€¢ ",M.length," ",1===M.length?"arquivo":"arquivos"]})]}),(0,b.jsxs)(g.Button,{variant:"outline",onClick:()=>a.push(`/brands/${k}`),className:"border-purple-500/30 text-purple-400 hover:bg-purple-500/10 shrink-0",children:[(0,b.jsx)(A.Palette,{className:"mr-2 h-4 w-4"}),"Configurar Identidade (BrandKit)"]})]}),(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsx)(n,{children:(0,b.jsx)(j.AssetUploader,{brandId:k,onUploadComplete:a=>{N(b=>[a,...b])}})})}),(0,b.jsx)(n,{children:(0,b.jsx)("div",{className:"space-y-4",children:0===M.length?(0,b.jsxs)("div",{className:"rounded-xl border border-white/[0.06] bg-white/[0.02] p-12 text-center",children:[(0,b.jsx)(t.default,{className:"h-12 w-12 text-zinc-600 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Nenhum arquivo ainda"}),(0,b.jsx)("p",{className:"text-sm text-zinc-500",children:"FaÃ§a upload de guidelines, brand books ou outros documentos da marca."})]}):M.map((a,c)=>{var d,f;return(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*c},className:"group rounded-xl border border-white/[0.06] bg-white/[0.02] p-6 hover:border-white/[0.12] transition-all",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"inline-flex h-12 w-12 items-center justify-center rounded-lg bg-white/[0.04] text-emerald-500 overflow-hidden relative group/img",children:"image"===a.type||a.mimeType.startsWith("image/")?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("img",{src:a.url,alt:a.name,className:(0,i.cn)("h-12 w-12 object-cover transition-opacity",S===a.id?"opacity-30":"opacity-100"),loading:"lazy"}),S===a.id&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)(s.Loader2,{className:"h-4 w-4 text-purple-500 animate-spin"})})]}):(d=a.mimeType,"url"===a.type?(0,b.jsx)(z.Link,{className:"h-5 w-5"}):d.startsWith("image/")?(0,b.jsx)(q.Image,{className:"h-5 w-5"}):(0,b.jsx)(p.FileText,{className:"h-5 w-5"}))}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-2",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"text-base font-medium text-white truncate",children:a.name}),"url"===a.type&&a.sourceUrl?(0,b.jsx)("a",{href:a.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-emerald-500 hover:text-emerald-400 truncate block",children:a.sourceUrl}):(0,b.jsx)("p",{className:"text-sm text-zinc-500 truncate",children:a.originalName})]}),(a=>{switch(a){case"uploaded":return(0,b.jsxs)(h.Badge,{variant:"outline",className:"border-blue-500/30 bg-blue-500/10 text-blue-400",children:[(0,b.jsx)(u.CheckCircle,{className:"h-3 w-3 mr-1"}),"Uploaded"]});case"processing":return(0,b.jsxs)(h.Badge,{variant:"outline",className:"border-yellow-500/30 bg-yellow-500/10 text-yellow-400",children:[(0,b.jsx)(v.Clock,{className:"h-3 w-3 mr-1 animate-pulse"}),"Processando"]});case"ready":return(0,b.jsxs)(h.Badge,{variant:"outline",className:"border-emerald-500/30 bg-emerald-500/10 text-emerald-400",children:[(0,b.jsx)(u.CheckCircle,{className:"h-3 w-3 mr-1"}),"Pronto"]});case"error":return(0,b.jsxs)(h.Badge,{variant:"outline",className:"border-red-500/30 bg-red-500/10 text-red-400",children:[(0,b.jsx)(l.AlertCircle,{className:"h-3 w-3 mr-1"}),"Erro"]});default:return null}})(a.status)]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-xs text-zinc-600",children:[(0,b.jsx)("span",{children:(f=a.size)<1024?`${f} B`:f<1048576?`${(f/1024).toFixed(1)} KB`:`${(f/1048576).toFixed(1)} MB`}),(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsx)("span",{className:"capitalize",children:a.type.replace("_"," ")}),void 0!==a.chunkCount&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsxs)("span",{className:"text-emerald-500/80 font-medium",children:[a.chunkCount," chunks"]})]}),a.createdAt&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsx)("span",{children:new Date(1e3*a.createdAt.seconds).toLocaleDateString("pt-BR")})]})]}),"error"===a.status&&a.processingError&&(0,b.jsx)("p",{className:"mt-2 text-sm text-red-400",children:a.processingError})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[("image"===a.type||a.mimeType.startsWith("image/"))&&!a.name.includes("(HD")&&(0,b.jsx)(J.TooltipProvider,{children:(0,b.jsxs)(J.Tooltip,{children:[(0,b.jsx)(J.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("button",{onClick:()=>$(a),disabled:S===a.id,className:"inline-flex h-8 w-8 items-center justify-center rounded-lg border border-purple-500/20 bg-purple-500/5 text-purple-400 hover:text-purple-300 hover:border-purple-500/40 transition-colors disabled:opacity-50","aria-label":"Gerar versÃ£o HD",children:(0,b.jsx)(y.Sparkles,{className:"h-4 w-4"})})}),(0,b.jsx)(J.TooltipContent,{children:(0,b.jsx)("p",{children:"Gerar versÃ£o HD (Upscale 2x)"})})]})}),(0,b.jsx)(J.TooltipProvider,{children:(0,b.jsxs)(J.Tooltip,{children:[(0,b.jsx)(J.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("button",{onClick:()=>Z(a),className:`inline-flex h-8 w-8 items-center justify-center rounded-lg border transition-all ${a.isApprovedForAI?"bg-emerald-500/10 border-emerald-500/30 text-emerald-500":"bg-white/[0.02] border-white/[0.06] text-zinc-500 hover:text-white"}`,"aria-label":a.isApprovedForAI?"Remover da IA":"Aprovar para IA",children:(0,b.jsx)(u.CheckCircle,{className:`h-4 w-4 ${a.isApprovedForAI?"fill-emerald-500/20":""}`})})}),(0,b.jsx)(J.TooltipContent,{children:(0,b.jsx)("p",{children:a.isApprovedForAI?"Aprovado para IA":"Clique para aprovar para IA"})})]})}),a.extractedText&&(0,b.jsx)("button",{onClick:()=>V(a),className:"inline-flex h-8 w-8 items-center justify-center rounded-lg border border-white/[0.06] bg-white/[0.02] text-zinc-400 hover:text-emerald-400 hover:border-emerald-500/30 hover:bg-emerald-500/5 transition-all","aria-label":"Ver preview",title:"Ver texto extraÃ­do",children:(0,b.jsx)(w.Eye,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>Y(a.id,a.url),disabled:Q===a.id,className:"inline-flex h-8 w-8 items-center justify-center rounded-lg border border-red-500/20 bg-red-500/5 text-red-400 hover:text-red-300 hover:border-red-500/40 transition-colors disabled:opacity-50","aria-label":"Deletar arquivo",children:Q===a.id?(0,b.jsx)(s.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(r.Trash2,{className:"h-4 w-4"})})]})]})},a.id)})})})]}),(0,b.jsx)(G.Dialog,{open:!!U,onOpenChange:a=>!a&&V(null),children:(0,b.jsxs)(G.DialogContent,{className:"sm:max-w-3xl bg-zinc-950 border-white/[0.04] p-0 overflow-hidden shadow-2xl",children:[(0,b.jsx)(G.DialogHeader,{className:"p-6 border-b border-white/[0.04]",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-lg bg-emerald-500/10 flex items-center justify-center text-emerald-400",children:(0,b.jsx)(p.FileText,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(G.DialogTitle,{className:"text-white text-base",children:["Preview: ",U?.name]}),(0,b.jsx)("p",{className:"text-xs text-zinc-500 mt-0.5",children:"ConteÃºdo extraÃ­do para inteligÃªncia do RAG"})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("a",{href:U?.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/[0.03] border border-white/[0.04] text-xs text-zinc-400 hover:text-white hover:bg-white/[0.06] transition-all",children:[(0,b.jsx)(x.FileDown,{className:"h-3.5 w-3.5"}),"Abrir Original"]})})]})}),(0,b.jsx)(I.ScrollArea,{className:"h-[65vh] p-8 bg-zinc-900/30",children:U?.extractedText?(0,b.jsx)("div",{className:"max-w-none",children:(0,b.jsx)(H.MarkdownRenderer,{content:U.extractedText})}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full py-12 text-center",children:[(0,b.jsx)(l.AlertCircle,{className:"h-10 w-10 text-zinc-800 mb-3"}),(0,b.jsx)("p",{className:"text-zinc-500 font-medium",children:"Texto extraÃ­do nÃ£o disponÃ­vel."}),(0,b.jsx)("p",{className:"text-xs text-zinc-700 mt-1",children:"O arquivo pode ainda estar sendo processado ou nÃ£o contÃ©m texto extraÃ­vel."})]})}),(0,b.jsx)("div",{className:"p-4 border-t border-white/[0.04] bg-zinc-950/50 flex justify-end",children:(0,b.jsx)(g.Button,{variant:"ghost",onClick:()=>V(null),className:"text-zinc-400 hover:text-white hover:bg-white/[0.04]",children:"Fechar VisualizaÃ§Ã£o"})})]})})]}):(0,b.jsx)("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(l.AlertCircle,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"Marca nÃ£o encontrada"}),(0,b.jsx)(g.Button,{onClick:()=>a.push("/brands"),children:"Voltar para Marcas"})]})})}a.s(["default",()=>K,"dynamic",0,"force-dynamic"],544782)}];

//# sourceMappingURL=b1735_CURSOR_CONSELHO%20DE%20FUNIL_app_src_app_brands_%5Bid%5D_assets_page_tsx_04dc0b9d._.js.map