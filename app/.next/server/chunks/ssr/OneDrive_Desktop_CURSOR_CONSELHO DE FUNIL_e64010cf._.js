module.exports=[463963,a=>{"use strict";let b=(0,a.i(47916).default)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);a.s(["Palette",()=>b],463963)},131852,a=>{"use strict";a.i(543317);var b=a.i(134034);let c={maxRetries:3,initialDelay:1e3,maxDelay:1e4,factor:2},d=["aborted","deadline-exceeded","resource-exhausted","unavailable","internal"];async function e(a,f={}){let g,{maxRetries:h,initialDelay:i,maxDelay:j,factor:k}={...c,...f},l=i;for(let c=0;c<=h;c++)try{return await a()}catch(a){if(g=a,!(a instanceof b.FirestoreError&&d.includes(a.code))||c===h)break;console.warn(`[Resilience] Falha na opera\xe7\xe3o (tentativa ${c+1}/${h+1}). Erro: ${a.code}. Tentando novamente em ${l}ms...`),await new Promise(a=>setTimeout(a,l)),l=Math.min(l*k,j)}throw console.error("[Resilience] Operação falhou permanentemente após retries.",g),g}a.s(["withResilience",()=>e])},59910,a=>{"use strict";a.i(543317);var b=a.i(134034),c=a.i(860342),d=a.i(131852),e=a.i(344895);async function f(a,d){let e=(0,b.doc)(c.db,"users",a),f=b.Timestamp.now();return await (0,b.setDoc)(e,{...d,credits:10,usage:0,createdAt:f,lastLogin:f}),a}async function g(a,d){let e=(0,b.doc)(c.db,"users",a);await (0,b.updateDoc)(e,{credits:d})}async function h(a){let d=(0,b.doc)(c.db,"users",a),e=await (0,b.getDoc)(d);return e.exists()?{id:e.id,...e.data()}:null}async function i(a){let d=(0,b.doc)(c.db,"users",a);await (0,b.updateDoc)(d,{lastLogin:b.Timestamp.now()})}async function j(a){let d=b.Timestamp.now();return(await (0,b.addDoc)((0,b.collection)(c.db,"funnels"),{...a,status:"draft",createdAt:d,updatedAt:d})).id}async function k(a){let d=(0,b.query)((0,b.collection)(c.db,"funnels"),(0,b.where)("userId","==",a));return(await (0,b.getDocs)(d)).docs.map(a=>({id:a.id,...a.data()})).sort((a,b)=>{let c=a.updatedAt?.seconds||0;return(b.updatedAt?.seconds||0)-c})}async function l(a,e){let f=(0,b.doc)(c.db,"funnels",a);await (0,d.withResilience)(async()=>{await (0,b.updateDoc)(f,{...e,updatedAt:b.Timestamp.now()})})}async function m(a){let d=(0,b.doc)(c.db,"funnels",a);await (0,b.deleteDoc)(d)}async function n(a){let d=b.Timestamp.now(),e=Object.fromEntries(Object.entries(a).filter(([a,b])=>void 0!==b));return(await (0,b.addDoc)((0,b.collection)(c.db,"conversations"),{...e,createdAt:d,updatedAt:d})).id}async function o(a){let d=(0,b.query)((0,b.collection)(c.db,"conversations"),(0,b.where)("userId","==",a),(0,b.limit)(50));return(await (0,b.getDocs)(d)).docs.map(a=>({id:a.id,...a.data()})).sort((a,b)=>{let c=a.updatedAt?.seconds||0;return(b.updatedAt?.seconds||0)-c})}async function p(a,e){let f=(0,b.doc)(c.db,"conversations",a);await (0,d.withResilience)(async()=>{await (0,b.updateDoc)(f,{...e,updatedAt:b.Timestamp.now()})})}async function q(a){let d=(0,b.doc)(c.db,"conversations",a);await (0,b.deleteDoc)(d)}async function r(a,d){let e=await (0,b.addDoc)((0,b.collection)(c.db,"conversations",a,"messages"),{...d,conversationId:a,createdAt:b.Timestamp.now()});return await p(a,{}),e.id}function s(a,d){let e=(0,b.query)((0,b.collection)(c.db,"conversations",a,"messages"),(0,b.orderBy)("createdAt","asc"));return(0,b.onSnapshot)(e,a=>{d(a.docs.map(a=>({id:a.id,...a.data()})))})}async function t(a){let[b,c]=await Promise.all([k(a),o(a)]),d=b.filter(a=>!["completed","killed"].includes(a.status)).length,e=b.filter(a=>"review"===a.status).length;return{activeFunnels:d,pendingEvaluations:e,decisionsThisMonth:b.filter(a=>{let b=a.createdAt.toDate(),c=new Date;return b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear()&&["approved","killed","adjusting"].includes(a.status)}).length,totalConversations:c.length,performance_benchmarks:[{metric:"CPC Médio",value:"--",benchmark_2026:"R$ 0,50",status:"neutral"},{metric:"CTR Global",value:"--",benchmark_2026:"2.5%",status:"neutral"},{metric:"ROAS Alvo",value:"--",benchmark_2026:"4.0x",status:"neutral"}]}}async function u(a){let d=(0,b.doc)(c.db,"brands",a),e=await (0,b.getDoc)(d);return e.exists()?{id:e.id,...e.data()}:null}async function v(a,d,f){let g=(0,b.doc)(c.db,"tenants",a,"integrations",d),h=b.Timestamp.now(),i={id:d,tenantId:a,provider:d,status:"active",config:(0,e.encryptSensitiveFields)(f),updatedAt:h};return(await (0,b.getDoc)(g)).exists()?await (0,b.updateDoc)(g,i):await (0,b.setDoc)(g,{...i,createdAt:h}),d}async function w(a){let d=(0,b.query)((0,b.collection)(c.db,"tenants",a,"integrations"));return(await (0,b.getDocs)(d)).docs.map(a=>({id:a.id,...a.data()}))}async function x(a){let d=(0,b.doc)(c.db,"campaigns",a),e=await (0,b.getDoc)(d);return e.exists()?{id:e.id,...e.data()}:null}async function y(a,e){let f=(0,b.doc)(c.db,"campaigns",a);return await (0,d.withResilience)(async()=>{await (0,b.setDoc)(f,{...e,updatedAt:b.Timestamp.now()},{merge:!0})})}a.s(["addMessage",()=>r,"createConversation",()=>n,"createFunnel",()=>j,"createUser",()=>f,"deleteConversation",()=>q,"deleteFunnel",()=>m,"getBrand",()=>u,"getCampaign",()=>x,"getIntegrations",()=>w,"getUser",()=>h,"getUserConversations",()=>o,"getUserFunnels",()=>k,"getUserStats",()=>t,"saveIntegration",()=>v,"setCredits",()=>g,"subscribeToMessages",()=>s,"updateCampaignManifesto",()=>y,"updateFunnel",()=>l,"updateUserLastLogin",()=>i])},421281,a=>{"use strict";var b=a.i(582583),c=a.i(759837),d=a.i(59910);function e(){let{user:a,isLoading:e}=(0,c.useAuthStore)(),[f,g]=(0,b.useState)(null),[h,i]=(0,b.useState)(!0),[j,k]=(0,b.useState)(null);return(0,b.useEffect)(()=>{!async function(){if(!e){if(!a){g(null),i(!1);return}try{let b=await (0,d.getUser)(a.uid);if(b)await (0,d.updateUserLastLogin)(a.uid);else{let c={email:a.email||"",name:a.displayName||a.email?.split("@")[0]||"Usuário",role:"admin"};a.photoURL&&(c.avatar=a.photoURL),await (0,d.createUser)(a.uid,c),b=await (0,d.getUser)(a.uid)}g(b),k(null)}catch(a){console.error("Error loading user:",a),k("Erro ao carregar usuário")}finally{i(!1)}}}()},[a,e]),{user:f,isLoading:h||e,error:j}}a.s(["useUser",()=>e])}];

//# sourceMappingURL=OneDrive_Desktop_CURSOR_CONSELHO%20DE%20FUNIL_e64010cf._.js.map