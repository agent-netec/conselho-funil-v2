module.exports=[364427,a=>{"use strict";var b=a.i(194327),c=a.i(582583),d=a.i(126236),e=a.i(459966),f=a.i(759837),g=a.i(59910),h=a.i(226053),i=a.i(421281),j=a.i(289036),k=a.i(704241),l=a.i(248842),m=a.i(645454),n=a.i(761925),o=a.i(393045),p=a.i(294286),q=a.i(810045),r=a.i(158437),s=a.i(499262),t=a.i(736886);let u=r.Root,v=r.Trigger;r.Close;let w=r.Portal,x=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(r.Overlay,{className:(0,q.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...c,ref:d}));x.displayName=r.Overlay.displayName;let y=(0,s.cva)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),z=c.forwardRef(({side:a="right",className:c,children:d,...e},f)=>(0,b.jsxs)(w,{children:[(0,b.jsx)(x,{}),(0,b.jsxs)(r.Content,{ref:f,className:(0,q.cn)(y({side:a}),c),...e,children:[d,(0,b.jsxs)(r.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,b.jsx)(t.X,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));z.displayName=r.Content.displayName,c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(r.Title,{ref:d,className:(0,q.cn)("text-lg font-semibold text-foreground",a),...c})).displayName=r.Title.displayName,c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(r.Description,{ref:d,className:(0,q.cn)("text-sm text-muted-foreground",a),...c})).displayName=r.Description.displayName;var A=a.i(916745);function B({conversations:a,isLoading:c,conversationId:d,isCreating:e,accentColor:f,onNewConversation:g,onSelectConversation:h,onDeleteConversation:i}){let r=(0,A.useMobile)(),s=()=>(0,b.jsxs)("div",{className:"flex h-full flex-col bg-[#0a0a0c] overflow-hidden",children:[(0,b.jsx)("div",{className:"p-4 flex-shrink-0",children:(0,b.jsxs)(l.Button,{onClick:g,disabled:e,className:(0,q.cn)("w-full justify-center h-11 shadow-lg shadow-black/20","indigo"===f?"bg-indigo-500 hover:bg-indigo-400":"amber"===f?"bg-amber-500 hover:bg-amber-400":"btn-accent"),children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"Nova Conversa"]})}),(0,b.jsxs)("div",{className:"flex-1 relative overflow-hidden group/sidebar",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 right-0 h-8 bg-gradient-to-b from-[#0a0a0c] to-transparent z-10 pointer-events-none opacity-0 group-hover/sidebar:opacity-100 transition-opacity"}),(0,b.jsx)("div",{className:"absolute inset-0 overflow-y-auto custom-scrollbar px-3 pb-8 scroll-smooth",children:(0,b.jsx)(k.AnimatePresence,{children:c?(0,b.jsx)("div",{className:"space-y-2 py-2",children:[1,2,3,4,5].map(a=>(0,b.jsx)("div",{className:"h-12 rounded-xl bg-zinc-800/20 animate-pulse border border-white/[0.02]"},a))}):0===a.length?(0,b.jsxs)("div",{className:"px-3 py-12 text-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-zinc-900/50 border border-white/[0.05] flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(n.MessageSquare,{className:"h-5 w-5 text-zinc-700"})}),(0,b.jsxs)("p",{className:"text-sm text-zinc-500 font-medium",children:["Inicie sua primeira",(0,b.jsx)("br",{}),"consultoria"]})]}):(0,b.jsx)("div",{className:"space-y-1 py-2",children:a.map(a=>(0,b.jsxs)(j.motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},onClick:()=>h(a.id),className:(0,q.cn)("group flex items-center gap-3 rounded-xl px-3 py-3 cursor-pointer transition-all min-h-[48px] border border-transparent",a.id===d?"indigo"===f?"bg-indigo-500/10 text-white border-indigo-500/20 shadow-sm shadow-indigo-500/5":"amber"===f?"bg-amber-500/10 text-white border-amber-500/20 shadow-sm shadow-amber-500/5":"bg-emerald-500/10 text-white border-emerald-500/20 shadow-sm shadow-emerald-500/5":"text-zinc-500 hover:bg-white/[0.02] hover:text-zinc-300 hover:border-white/[0.05]"),children:[(0,b.jsx)("div",{className:(0,q.cn)("p-1.5 rounded-lg transition-colors",a.id===d?"indigo"===f?"bg-indigo-500/20 text-indigo-400":"amber"===f?"bg-amber-500/20 text-amber-400":"bg-emerald-500/20 text-emerald-400":"bg-zinc-900 text-zinc-600 group-hover:text-zinc-400"),children:(0,b.jsx)(n.MessageSquare,{className:"h-3.5 w-3.5 flex-shrink-0"})}),(0,b.jsx)("span",{className:"flex-1 truncate text-[13px] font-medium tracking-tight",children:a.title}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),i(a.id,b)},className:"p-1.5 opacity-0 group-hover:opacity-100 hover:bg-red-500/10 rounded-lg transition-all","aria-label":"Delete conversation",children:(0,b.jsx)(o.Trash2,{className:"h-3.5 w-3.5 text-zinc-600 hover:text-red-400"})})]},a.id))})})}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-[#0a0a0c] to-transparent z-10 pointer-events-none"})]})]});return r?(0,b.jsxs)(u,{children:[(0,b.jsx)(v,{asChild:!0,children:(0,b.jsx)(l.Button,{variant:"ghost",size:"icon",className:"fixed left-3 top-3.5 z-40 md:hidden h-9 w-9 text-zinc-400 bg-zinc-900/50 backdrop-blur-md border border-white/[0.04] rounded-xl hover:bg-zinc-800",children:(0,b.jsx)(p.Menu,{className:"h-5 w-5"})})}),(0,b.jsx)(z,{side:"left",className:"p-0 w-[280px] bg-[#0a0a0c] border-r border-white/[0.04]",children:(0,b.jsxs)("div",{className:"flex flex-col h-full",children:[(0,b.jsx)("div",{className:"p-4 border-b border-white/[0.04] bg-[#0d0d0f]",children:(0,b.jsxs)("h2",{className:"text-sm font-bold text-white flex items-center gap-2",children:[(0,b.jsx)(n.MessageSquare,{className:"h-4 w-4 text-emerald-500"}),"HistÃ³rico"]})}),(0,b.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,b.jsx)(s,{})})]})})]}):(0,b.jsx)("div",{className:"w-72 flex-shrink-0 border-r border-white/[0.04] bg-[#0a0a0c] hidden md:flex flex-col h-full",children:(0,b.jsx)(s,{})})}var C=a.i(830307),D=a.i(822399),E=a.i(47916);let F=(0,E.default)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);var G=a.i(460228),H=a.i(317953),I=a.i(880925),J=a.i(168565),K=a.i(915338),L=a.i(789241),M=a.i(612852),N=a.i(463963),O=a.i(635870),P=a.i(611597);let Q={general:I.Zap,funnel:J.Target,copy:K.Pencil,social:L.Share2,ads:M.BarChart3,design:N.Palette,party:O.Users};function R({mode:a,onModeChange:c}){return(0,b.jsx)("div",{className:"flex items-center gap-1 p-1 rounded-xl bg-zinc-900/50 border border-white/[0.04] max-w-full overflow-x-auto no-scrollbar",children:Object.entries(P.CHAT_MODES).map(([d,e])=>{let f=Q[d]||I.Zap,g=a===d;return(0,b.jsxs)("button",{onClick:()=>c(d),className:(0,q.cn)("flex items-center gap-1.5 px-2 py-1.5 sm:px-3 rounded-lg text-xs font-medium transition-all flex-shrink-0",g?"funnel"===d?"bg-indigo-500/20 text-indigo-400":"copy"===d?"bg-amber-500/20 text-amber-400":"social"===d?"bg-rose-500/20 text-rose-400":"design"===d?"bg-purple-500/20 text-purple-400":"party"===d?"bg-fuchsia-500/20 text-fuchsia-400 border border-fuchsia-500/30 shadow-[0_0_10px_rgba(217,70,239,0.1)]":"bg-emerald-500/20 text-emerald-400":"text-zinc-500 hover:text-zinc-300 hover:bg-white/[0.03]"),title:e.label,children:[(0,b.jsx)(f,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{className:(0,q.cn)("hidden xs:inline",g&&"inline"),children:e.label})]},d)})})}var S=a.i(343583);let T=(0,E.default)("sword",[["path",{d:"m11 19-6-6",key:"s7kpr"}],["path",{d:"m5 21-2-2",key:"1kw20b"}],["path",{d:"m8 16-4 4",key:"1oqv8h"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5",key:"pkxemp"}]]),U=(0,E.default)("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),V=[{name:"Direct Response Masters",ids:["gary_halbert","dan_kennedy_copy","eugene_schwartz"],icon:"âš¡",color:"from-amber-500/20 to-orange-500/20"},{name:"The Big Three (Funnel)",ids:["russell_brunson","frank_kern","ryan_deiss"],icon:"ðŸŽ¯",color:"from-indigo-500/20 to-blue-500/20"},{name:"Social Growth",ids:["justin_welsh","nikita_beer","rachel_karten"],icon:"ðŸš€",color:"from-fuchsia-500/20 to-rose-500/20"}];function W({selectedIds:a,onChange:d,intensity:e,onIntensityChange:f}){let g=a.length>=3,h=(0,c.useMemo)(()=>{let a=Object.values(P.COUNSELORS_REGISTRY);return{funnel:a.filter(a=>["russell_brunson","dan_kennedy","frank_kern","sam_ovens","ryan_deiss","perry_belcher"].includes(a.id)),copy:a.filter(a=>["eugene_schwartz","claude_hopkins","gary_halbert","joseph_sugarman","david_ogilvy","john_carlton","drayton_bird","frank_kern_copy","dan_kennedy_copy"].includes(a.id)),social:a.filter(a=>["lia_haberman","rachel_karten","nikita_beer","justin_welsh"].includes(a.id)),ads:a.filter(a=>["justin_brooke","nicholas_kusmich","jon_loomer","savannah_sanchez"].includes(a.id))}},[]);return(0,b.jsxs)(j.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"w-full bg-zinc-950 border border-white/[0.08] rounded-2xl overflow-hidden shadow-2xl mb-4",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-white/[0.04] flex flex-col sm:flex-row sm:items-center justify-between gap-4 bg-white/[0.02]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-fuchsia-500/20 text-fuchsia-400",children:(0,b.jsx)(O.Users,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-black text-white leading-none uppercase tracking-tighter",children:"Alto Conselho"}),(0,b.jsx)("p",{className:"text-[9px] text-zinc-500 mt-1 font-mono uppercase tracking-wider",children:"Selecione atÃ© 3 especialistas"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"hidden lg:flex items-center gap-2 mr-2",children:V.map(a=>(0,b.jsxs)("button",{onClick:()=>{d(a.ids)},className:(0,q.cn)("group relative px-3 py-1.5 rounded-xl border border-white/5 overflow-hidden transition-all hover:border-white/20","bg-gradient-to-br",a.color),children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/5 transition-colors"}),(0,b.jsxs)("span",{className:"relative z-10 text-[10px] font-bold text-zinc-300 group-hover:text-white flex items-center gap-1.5",children:[(0,b.jsx)("span",{className:"text-xs",children:a.icon}),a.name]})]},a.name))}),(0,b.jsxs)("div",{className:"flex items-center bg-black/40 rounded-full p-1 border border-white/[0.06]",children:[(0,b.jsxs)("button",{onClick:()=>f("debate"),className:(0,q.cn)("flex items-center gap-1.5 px-3 py-1 rounded-full text-[10px] font-black transition-all","debate"===e?"bg-fuchsia-500 text-white shadow-[0_0_10px_rgba(217,70,239,0.3)]":"text-zinc-500 hover:text-zinc-300"),children:[(0,b.jsx)(T,{className:"h-3 w-3"}),"DEBATE"]}),(0,b.jsxs)("button",{onClick:()=>f("consensus"),className:(0,q.cn)("flex items-center gap-1.5 px-3 py-1 rounded-full text-[10px] font-black transition-all","consensus"===e?"bg-emerald-500 text-white shadow-[0_0_10px_rgba(16,185,129,0.3)]":"text-zinc-500 hover:text-zinc-300"),children:[(0,b.jsx)(U,{className:"h-3 w-3"}),"CONSENSO"]})]})]})]}),(0,b.jsx)("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 max-h-[400px] overflow-y-auto custom-scrollbar",children:Object.entries(h).map(([c,e])=>(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h4",{className:"text-[10px] font-black text-zinc-600 uppercase tracking-[0.2em] pl-1",children:"funnel"===c?"ðŸ›ï¸ Funil":"copy"===c?"âœï¸ Copy":"social"===c?"ðŸš€ Social":"ðŸ“Š Ads"}),(0,b.jsx)("div",{className:"space-y-2",children:e.map(c=>{let e=a.includes(c.id),f=g&&!e;return(0,b.jsxs)(j.motion.button,{whileHover:f?{}:{scale:1.02},whileTap:f?{}:{scale:.95},onClick:()=>{var b;return b=c.id,void(a.includes(b)?d(a.filter(a=>a!==b)):!g&&d([...a,b]))},disabled:f,className:(0,q.cn)("w-full flex items-center gap-3 p-3 rounded-xl border transition-all text-left group relative overflow-hidden",e?"bg-white/[0.05] border-white/20 shadow-[0_0_20px_rgba(255,255,255,0.05)]":f?"bg-transparent border-transparent opacity-10 grayscale pointer-events-none":"bg-white/[0.02] border-white/[0.05] hover:bg-white/[0.05] hover:border-white/10"),children:[e&&(0,b.jsx)(j.motion.div,{initial:{opacity:0},animate:{opacity:[.1,.2,.1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at center, ${c.color}40, transparent 70%)`}}),(0,b.jsx)("div",{className:(0,q.cn)("h-10 w-10 rounded-lg flex items-center justify-center text-lg transition-all relative z-10",e?"scale-100":"scale-90 group-hover:scale-95"),style:{backgroundColor:e?`${c.color}30`:`${c.color}10`,color:c.color,border:e?`1px solid ${c.color}50`:`1px solid ${c.color}20`},children:e?(0,b.jsx)(j.motion.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:15},children:(0,b.jsx)(S.Check,{className:"h-5 w-5 stroke-[3px]"})}):(0,b.jsx)("span",{children:c.icon})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0 relative z-10",children:[(0,b.jsx)("p",{className:(0,q.cn)("text-[12px] font-black tracking-tighter truncate uppercase",e?"text-white":"text-zinc-400 group-hover:text-zinc-200"),children:c.name}),(0,b.jsx)("p",{className:(0,q.cn)("text-[9px] truncate font-mono uppercase tracking-widest mt-0.5",e?"text-white/60":"text-zinc-600 group-hover:text-zinc-500"),children:c.expertise})]}),e&&(0,b.jsx)(j.motion.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-2 right-2",children:(0,b.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-white shadow-[0_0_8px_white] animate-pulse"})})]},c.id)})})]},c))}),(0,b.jsxs)("div",{className:"px-4 py-4 bg-black/80 border-t border-white/[0.06] flex items-center justify-between backdrop-blur-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex -space-x-2",children:[(0,b.jsx)(k.AnimatePresence,{mode:"popover",children:a.map(a=>{let c=P.COUNSELORS_REGISTRY[a];return c?(0,b.jsxs)(j.motion.div,{initial:{scale:0,x:-10},animate:{scale:1,x:0},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:400,damping:25},className:"h-10 w-10 rounded-full border-2 border-zinc-950 flex items-center justify-center text-base shadow-xl relative z-10 group",style:{backgroundColor:c.color,boxShadow:`0 0 20px ${c.color}30`},children:[(0,b.jsx)("span",{className:"group-hover:scale-110 transition-transform",children:c.icon}),(0,b.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 h-3 w-3 rounded-full bg-emerald-500 border-2 border-zinc-950 shadow-[0_0_8px_rgba(16,185,129,0.5)]"})]},a):null})}),0===a.length&&(0,b.jsx)("div",{className:"h-10 w-10 rounded-full border-2 border-dashed border-zinc-800 flex items-center justify-center text-[10px] text-zinc-700 font-black",children:"0/3"})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:(0,q.cn)("text-[10px] font-black uppercase tracking-[0.2em] transition-colors",3===a.length?"text-emerald-400":"text-zinc-500"),children:3===a.length?"Mesa Pronta":"Convocando..."}),(0,b.jsx)("span",{className:"text-[9px] text-zinc-600 font-mono uppercase tracking-widest",children:0===a.length?"Aguardando seleÃ§Ã£o":`${a.length} de 3 estrategistas`})]})]}),a.length>0&&(0,b.jsxs)(j.motion.button,{initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.05,color:"#f87171"},whileTap:{scale:.95},onClick:()=>d([]),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/[0.02] border border-white/5 text-[9px] font-black text-zinc-500 uppercase tracking-[0.2em] transition-all",children:[(0,b.jsx)(t.X,{className:"h-3 w-3"}),"Limpar"]})]})]})}var X=a.i(87226),Y=a.i(70076),Z=a.i(712915);a.i(543317);var $=a.i(134034);function _({onSend:a,isLoading:d,disabled:e=!1,disabledMessage:f,mode:g,onModeChange:l}){let[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)([]),[r,s]=(0,c.useState)("debate"),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(!1),y=(0,c.useRef)(null),z=(0,c.useRef)(null),A=(0,h.useActiveBrand)(),{user:B}=(0,i.useUser)();(0,c.useEffect)(()=>{x(!0)},[]);let E=P.CHAT_MODES[g],I=E.accentColor,J="party"===g,K=!J||o.length>=3,L=async a=>{if(!a||!A||!B)return;let b=Array.from(a).map(a=>({file:a,id:Math.random().toString(36).substring(7),status:"uploading",progress:0,previewUrl:a.type.startsWith("image/")?URL.createObjectURL(a):void 0}));v(a=>[...a,...b]),b.forEach(async a=>{try{let b=(0,X.validateBrandAssetFile)(a.file);if(!b.valid)throw Error(b.error);let{url:c,metadata:d}=await (0,X.uploadBrandAsset)(a.file,A.id,B.id,b=>{v(c=>c.map(c=>c.id===a.id?{...c,progress:b}:c))});await (0,Y.createAsset)({brandId:A.id,userId:B.id,name:a.file.name,originalName:a.file.name,type:a.file.type.startsWith("image/")?"image":"reference",mimeType:a.file.type,size:a.file.size,url:c,status:"ready",isApprovedForAI:!0,createdAt:$.Timestamp.now(),metadata:{sourceType:a.file.type.startsWith("image/")?"image":"pdf",originalName:a.file.name,isApprovedForAI:!0,extractedAt:new Date().toISOString(),processingMethod:"gemini-vision"}}),v(b=>b.map(b=>b.id===a.id?{...b,status:"analyzing"}:b));let e=await (0,q.fileToBase64)(a.file),f=a.file.type.startsWith("image/")?"Analise esta imagem sob a perspectiva de um estrategista de funis. Identifique elementos de conversÃ£o, copy, design e pontos de melhoria. Seja conciso e direto.":"Analise este documento PDF. Extraia os pontos estratÃ©gicos mais relevantes para um conselho de marketing. Seja conciso.",g=await (0,Z.analyzeMultimodalWithGemini)(f,e,a.file.type);v(b=>b.map(b=>b.id===a.id?{...b,status:"ready",insight:g}:b))}catch(b){console.error("Erro ao processar anexo:",b),v(c=>c.map(c=>c.id===a.id?{...c,status:"error",error:b instanceof Error?b.message:"Erro no upload"}:c))}})},M=u.some(a=>"uploading"===a.status||"analyzing"===a.status);(0,c.useEffect)(()=>{J?0===o.length&&p(["russell_brunson","eugene_schwartz","dan_kennedy"]):p([])},[g]);let N=J?o.map(a=>P.COUNSELORS_REGISTRY[a]?.name||a).join(", "):E.counselors.map(a=>P.COUNSELORS_REGISTRY[a]?.name||a).join(", "),O="general"===g?E.footer:J?`ðŸŽ‰ Party: ${N||"Nenhum selecionado"}`:`${E.footer.split(":")[0]}: ${N}`,Q=d||w&&e||M,S=!m.trim()&&0===u.length||Q||!K,T=()=>{if(!m.trim()&&0===u.length||Q||!K)return;let b=m.trim(),c=u.filter(a=>"ready"===a.status&&a.insight);if(c.length>0){let a=c.map(a=>`--- REFER\xcaNCIA ANEXADA: ${a.file.name} ---
${a.insight}`).join("\n\n");b=`[CONTEXTO DE ANEXOS]:
${a}

---

PERGUNTA DO USU\xc1RIO: ${b||"(AnÃ¡lise de referÃªncia enviada)"}`}J?a(b,{selectedAgents:o,intensity:r}):a(b),n(""),v([]),y.current&&(y.current.style.height="auto")};return(0,c.useEffect)(()=>{y.current&&(y.current.style.height="auto",y.current.style.height=`${Math.min(y.current.scrollHeight,200)}px`)},[m]),(0,b.jsx)("div",{className:"border-t border-white/[0.04] bg-[#09090b]/90 backdrop-blur-2xl p-3 sm:p-4 pb-6 sm:pb-4",onDragOver:a=>{a.preventDefault(),a.stopPropagation()},onDrop:a=>{a.preventDefault(),a.stopPropagation(),a.dataTransfer.files&&a.dataTransfer.files.length>0&&L(a.dataTransfer.files)},children:(0,b.jsxs)("div",{className:"mx-auto max-w-3xl space-y-3",children:[(0,b.jsx)(k.AnimatePresence,{children:u.length>0&&(0,b.jsx)(j.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"flex flex-wrap gap-2 pb-1",children:u.map(a=>(0,b.jsxs)(j.motion.div,{className:"relative group flex items-center gap-2 rounded-xl border border-white/[0.06] bg-zinc-900/80 p-1.5 pr-2",children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded-lg overflow-hidden bg-zinc-800 flex items-center justify-center shrink-0",children:a.previewUrl?(0,b.jsx)("img",{src:a.previewUrl,alt:"Preview",className:"h-full w-full object-cover"}):(0,b.jsx)(G.FileText,{className:"h-4 w-4 text-zinc-500"})}),(0,b.jsxs)("div",{className:"flex flex-col min-w-0 pr-1",children:[(0,b.jsx)("span",{className:"text-[10px] text-zinc-300 truncate max-w-[100px] font-medium",children:a.file.name}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:["uploading"===a.status&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("div",{className:"h-1 w-12 rounded-full bg-zinc-800 overflow-hidden",children:(0,b.jsx)(j.motion.div,{className:"h-full bg-emerald-500",initial:{width:0},animate:{width:`${a.progress}%`}})}),(0,b.jsxs)("span",{className:"text-[8px] text-zinc-500",children:[a.progress,"%"]})]}),"analyzing"===a.status&&(0,b.jsxs)("span",{className:"text-[9px] text-indigo-400 flex items-center gap-1 animate-pulse",children:[(0,b.jsx)(H.Loader2,{className:"h-2.5 w-2.5 animate-spin"})," Analisando..."]}),"ready"===a.status&&(0,b.jsx)("span",{className:"text-[9px] text-emerald-500 font-medium",children:"Pronto"}),"error"===a.status&&(0,b.jsx)("span",{className:"text-[9px] text-red-500 truncate max-w-[80px]",children:a.error})]})]}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void v(a=>{let c=a.filter(a=>a.id!==b),d=a.find(a=>a.id===b);return d?.previewUrl&&URL.revokeObjectURL(d.previewUrl),c})},className:"absolute -top-1.5 -right-1.5 h-4 w-4 rounded-full bg-zinc-900 border border-white/10 flex items-center justify-center text-zinc-400 hover:text-white hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:(0,b.jsx)(t.X,{className:"h-2.5 w-2.5"})})]},a.id))})}),(0,b.jsx)(k.AnimatePresence,{children:"party"===g&&(0,b.jsx)(W,{selectedIds:o,onChange:p,intensity:r,onIntensityChange:s})}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)(R,{mode:g,onModeChange:l}),(0,b.jsxs)(j.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(J?"general":"party"),className:(0,q.cn)("inline-flex items-center gap-2 rounded-xl px-3 py-2 text-xs font-semibold transition-all border",J?"bg-emerald-500/10 border-emerald-500/40 text-emerald-200 shadow-[0_0_24px_rgba(16,185,129,0.35)]":"bg-zinc-900/60 border-white/5 text-zinc-200 hover:border-white/10"),children:[(0,b.jsx)(D.Sparkles,{className:"h-4 w-4"}),J?"Alto Conselho Ativo":"Invocar Alto Conselho"]})]}),J&&!K&&(0,b.jsx)("p",{className:"text-[11px] text-amber-400 font-medium",children:"Selecione pelo menos 3 especialistas para iniciar o debate."})]}),(0,b.jsxs)("div",{className:(0,q.cn)("relative flex items-end gap-2 sm:gap-3 rounded-2xl border border-white/[0.06] bg-zinc-900/60 p-2 sm:p-3 transition-all duration-300","focus-within:border-white/[0.1] focus-within:bg-zinc-900/80 focus-within:shadow-[0_0_20px_rgba(255,255,255,0.02)]",e&&"border-red-500/50 bg-red-500/5"),children:[(0,b.jsx)("input",{type:"file",ref:z,onChange:a=>L(a.target.files),className:"hidden",multiple:!0,accept:"image/*,application/pdf"}),(0,b.jsx)("button",{type:"button",onClick:()=>z.current?.click(),disabled:Q,className:(0,q.cn)("flex h-10 w-10 shrink-0 items-center justify-center rounded-xl transition-all duration-300","text-zinc-500 hover:text-white hover:bg-white/[0.05] disabled:opacity-30"),children:(0,b.jsx)(F,{className:"h-5 w-5"})}),(0,b.jsx)("textarea",{ref:y,value:m,onChange:a=>n(a.target.value),onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),T())},placeholder:w&&e?f||"Saldo insuficiente":E.placeholder,disabled:Q,rows:1,className:"flex-1 resize-none bg-transparent py-2.5 px-0 text-[16px] sm:text-sm text-white placeholder:text-zinc-600 focus:outline-none disabled:opacity-50 min-h-[44px] sm:min-h-0",style:{maxHeight:"160px"}}),(0,b.jsx)(j.motion.button,{whileHover:Q?{}:{scale:1.05},whileTap:Q?{}:{scale:.95},onClick:T,disabled:S,className:(0,q.cn)("flex h-10 w-10 sm:h-11 sm:w-11 shrink-0 items-center justify-center rounded-xl transition-all duration-300",(m.trim()||u.length>0)&&!Q&&K?"indigo"===I?"bg-indigo-500 text-white hover:bg-indigo-400 shadow-[0_0_15px_rgba(99,102,241,0.3)]":"amber"===I?"bg-amber-500 text-white hover:bg-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.3)]":"blue"===I?"bg-blue-500 text-white hover:bg-blue-400 shadow-[0_0_15px_rgba(59,130,246,0.3)]":"bg-emerald-500 text-white hover:bg-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.3)]":"bg-zinc-800 text-zinc-500"),children:(0,b.jsx)(C.Send,{className:"h-5 w-5"})})]}),(0,b.jsx)("p",{className:"text-center text-[10px] sm:text-xs text-zinc-600 px-4",children:e?"âš ï¸ FaÃ§a upgrade para obter mais crÃ©ditos.":O})]})})}let aa=(0,E.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var ab=a.i(919550),ac=a.i(174192);let ad=(0,E.default)("gavel",[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]]);var ae=a.i(285744),af=a.i(443535),ag=a.i(164750),ah=a.i(785319),ai=a.i(414107),aj=a.i(533625),ak=a.i(470550),al=a.i(943715),am=a.i(642685),an=a.i(159158),ao=a.i(668714);function ap(a){var d;let e,f=(d=a,(e=c.forwardRef((a,b)=>{let{children:d,...e}=a;if(c.isValidElement(d)){var f;let a,g,h=(f=d,(g=(a=Object.getOwnPropertyDescriptor(f.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.ref:(g=(a=Object.getOwnPropertyDescriptor(f,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.props.ref:f.props.ref||f.ref),i=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(e,d.props);return d.type!==c.Fragment&&(i.ref=b?(0,ah.composeRefs)(b,h):h),c.cloneElement(d,i)}return c.Children.count(d)>1?c.Children.only(null):null})).displayName=`${d}.SlotClone`,e),g=c.forwardRef((a,d)=>{let{children:e,...g}=a,h=c.Children.toArray(e),i=h.find(ar);if(i){let a=i.props.children,e=h.map(b=>b!==i?b:c.Children.count(a)>1?c.Children.only(null):c.isValidElement(a)?a.props.children:null);return(0,b.jsx)(f,{...g,ref:d,children:c.isValidElement(a)?c.cloneElement(a,void 0,e):null})}return(0,b.jsx)(f,{...g,ref:d,children:e})});return g.displayName=`${a}.Slot`,g}a.i(20939);var aq=Symbol("radix.slottable");function ar(a){return c.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===aq}var as=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,d)=>{let e=ap(`Primitive.${d}`),f=c.forwardRef((a,c)=>{let{asChild:f,...g}=a;return(0,b.jsx)(f?e:d,{...g,ref:c})});return f.displayName=`Primitive.${d}`,{...a,[d]:f}},{}),at=a.i(335780),au=a.i(755621),av=a.i(987177),aw="Popover",[ax,ay]=function(a,d=[]){let e=[],f=()=>{let b=e.map(a=>c.createContext(a));return function(d){let e=d?.[a]||b;return c.useMemo(()=>({[`__scope${a}`]:{...d,[a]:e}}),[d,e])}};return f.scopeName=a,[function(d,f){let g=c.createContext(f),h=e.length;e=[...e,f];let i=d=>{let{scope:e,children:f,...i}=d,j=e?.[a]?.[h]||g,k=c.useMemo(()=>i,Object.values(i));return(0,b.jsx)(j.Provider,{value:k,children:f})};return i.displayName=d+"Provider",[i,function(b,e){let i=e?.[a]?.[h]||g,j=c.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${b}\` must be used within \`${d}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let d=()=>{let d=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=d.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return c.useMemo(()=>({[`__scope${b.scopeName}`]:e}),[e])}};return d.scopeName=b.scopeName,d}(f,...d)]}(aw,[am.createPopperScope]),az=(0,am.createPopperScope)(),[aA,aB]=ax(aw),aC=a=>{let{__scopePopover:d,children:e,open:f,defaultOpen:g,onOpenChange:h,modal:i=!1}=a,j=az(d),k=c.useRef(null),[l,m]=c.useState(!1),[n,o]=(0,at.useControllableState)({prop:f,defaultProp:g??!1,onChange:h,caller:aw});return(0,b.jsx)(am.Root,{...j,children:(0,b.jsx)(aA,{scope:d,contentId:(0,al.useId)(),triggerRef:k,open:n,onOpenChange:o,onOpenToggle:c.useCallback(()=>o(a=>!a),[o]),hasCustomAnchor:l,onCustomAnchorAdd:c.useCallback(()=>m(!0),[]),onCustomAnchorRemove:c.useCallback(()=>m(!1),[]),modal:i,children:e})})};aC.displayName=aw;var aD="PopoverAnchor";c.forwardRef((a,d)=>{let{__scopePopover:e,...f}=a,g=aB(aD,e),h=az(e),{onCustomAnchorAdd:i,onCustomAnchorRemove:j}=g;return c.useEffect(()=>(i(),()=>j()),[i,j]),(0,b.jsx)(am.Anchor,{...h,...f,ref:d})}).displayName=aD;var aE="PopoverTrigger",aF=c.forwardRef((a,c)=>{let{__scopePopover:d,...e}=a,f=aB(aE,d),g=az(d),h=(0,ah.useComposedRefs)(c,f.triggerRef),i=(0,b.jsx)(as.button,{type:"button","aria-haspopup":"dialog","aria-expanded":f.open,"aria-controls":f.contentId,"data-state":aR(f.open),...e,ref:h,onClick:(0,ag.composeEventHandlers)(a.onClick,f.onOpenToggle)});return f.hasCustomAnchor?i:(0,b.jsx)(am.Anchor,{asChild:!0,...g,children:i})});aF.displayName=aE;var aG="PopoverPortal",[aH,aI]=ax(aG,{forceMount:void 0}),aJ=a=>{let{__scopePopover:c,forceMount:d,children:e,container:f}=a,g=aB(aG,c);return(0,b.jsx)(aH,{scope:c,forceMount:d,children:(0,b.jsx)(ao.Presence,{present:d||g.open,children:(0,b.jsx)(an.Portal,{asChild:!0,container:f,children:e})})})};aJ.displayName=aG;var aK="PopoverContent",aL=c.forwardRef((a,c)=>{let d=aI(aK,a.__scopePopover),{forceMount:e=d.forceMount,...f}=a,g=aB(aK,a.__scopePopover);return(0,b.jsx)(ao.Presence,{present:e||g.open,children:g.modal?(0,b.jsx)(aN,{...f,ref:c}):(0,b.jsx)(aO,{...f,ref:c})})});aL.displayName=aK;var aM=ap("PopoverContent.RemoveScroll"),aN=c.forwardRef((a,d)=>{let e=aB(aK,a.__scopePopover),f=c.useRef(null),g=(0,ah.useComposedRefs)(d,f),h=c.useRef(!1);return c.useEffect(()=>{let a=f.current;if(a)return(0,au.hideOthers)(a)},[]),(0,b.jsx)(av.RemoveScroll,{as:aM,allowPinchZoom:!0,children:(0,b.jsx)(aP,{...a,ref:g,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,ag.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),h.current||e.triggerRef.current?.focus()}),onPointerDownOutside:(0,ag.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;h.current=2===b.button||c},{checkForDefaultPrevented:!1}),onFocusOutside:(0,ag.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),aO=c.forwardRef((a,d)=>{let e=aB(aK,a.__scopePopover),f=c.useRef(!1),g=c.useRef(!1);return(0,b.jsx)(aP,{...a,ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(f.current||e.triggerRef.current?.focus(),b.preventDefault()),f.current=!1,g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(f.current=!0,"pointerdown"===b.detail.originalEvent.type&&(g.current=!0));let c=b.target;e.triggerRef.current?.contains(c)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&g.current&&b.preventDefault()}})}),aP=c.forwardRef((a,c)=>{let{__scopePopover:d,trapFocus:e,onOpenAutoFocus:f,onCloseAutoFocus:g,disableOutsidePointerEvents:h,onEscapeKeyDown:i,onPointerDownOutside:j,onFocusOutside:k,onInteractOutside:l,...m}=a,n=aB(aK,d),o=az(d);return(0,aj.useFocusGuards)(),(0,b.jsx)(ak.FocusScope,{asChild:!0,loop:!0,trapped:e,onMountAutoFocus:f,onUnmountAutoFocus:g,children:(0,b.jsx)(ai.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:h,onInteractOutside:l,onEscapeKeyDown:i,onPointerDownOutside:j,onFocusOutside:k,onDismiss:()=>n.onOpenChange(!1),children:(0,b.jsx)(am.Content,{"data-state":aR(n.open),role:"dialog",id:n.contentId,...o,...m,ref:c,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),aQ="PopoverClose";function aR(a){return a?"open":"closed"}function aS({...a}){return(0,b.jsx)(aC,{"data-slot":"popover",...a})}function aT({...a}){return(0,b.jsx)(aF,{"data-slot":"popover-trigger",...a})}function aU({className:a,align:c="center",sideOffset:d=4,...e}){return(0,b.jsx)(aJ,{children:(0,b.jsx)(aL,{"data-slot":"popover-content",align:c,sideOffset:d,className:(0,q.cn)("bg-popover text-popover-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-hidden",a),...e})})}c.forwardRef((a,c)=>{let{__scopePopover:d,...e}=a,f=aB(aQ,d);return(0,b.jsx)(as.button,{type:"button",...e,ref:c,onClick:(0,ag.composeEventHandlers)(a.onClick,()=>f.onOpenChange(!1))})}).displayName=aQ,c.forwardRef((a,c)=>{let{__scopePopover:d,...e}=a,f=az(d);return(0,b.jsx)(am.Arrow,{...f,...e,ref:c})}).displayName="PopoverArrow";var aV=a.i(356796),aW=a.i(925981),aX=a.i(791026),aY=a.i(866096);let aZ={russell_brunson:{...P.COUNSELORS.russell_brunson,council:"funnel"},dan_kennedy:{...P.COUNSELORS.dan_kennedy,council:"funnel"},frank_kern:{...P.COUNSELORS.frank_kern,council:"funnel"},sam_ovens:{...P.COUNSELORS.sam_ovens,council:"funnel"},ryan_deiss:{...P.COUNSELORS.ryan_deiss,council:"funnel"},perry_belcher:{...P.COUNSELORS.perry_belcher,council:"funnel"},eugene_schwartz:{name:"Eugene Schwartz",icon:"ðŸŽ¯",color:"#6366f1",expertise:"ConsciÃªncia de Mercado",council:"copy"},claude_hopkins:{name:"Claude Hopkins",icon:"ðŸ”¬",color:"#3b82f6",expertise:"MÃ©todo CientÃ­fico",council:"copy"},gary_halbert:{name:"Gary Halbert",icon:"âš¡",color:"#f59e0b",expertise:"Headlines",council:"copy"},joseph_sugarman:{name:"Joseph Sugarman",icon:"ðŸ“–",color:"#8b5cf6",expertise:"Storytelling",council:"copy"},david_ogilvy:{name:"David Ogilvy",icon:"ðŸ‘”",color:"#64748b",expertise:"Brand Premium",council:"copy"},john_carlton:{name:"John Carlton",icon:"ðŸŽ¤",color:"#ec4899",expertise:"Voz AutÃªntica",council:"copy"},drayton_bird:{name:"Drayton Bird",icon:"âœ‚ï¸",color:"#14b8a6",expertise:"Simplicidade",council:"copy"},copy_consciencia:{name:"Eugene Schwartz",icon:"ðŸŽ¯",color:"#6366f1",expertise:"ConsciÃªncia de Mercado",council:"copy"},copy_headline:{name:"Gary Halbert",icon:"âš¡",color:"#f59e0b",expertise:"Headlines",council:"copy"},copy_oferta:{name:"Dan Kennedy",icon:"ðŸ’°",color:"#10b981",expertise:"Oferta & UrgÃªncia",council:"copy"},copy_fluxo:{name:"John Carlton",icon:"ðŸŽ¤",color:"#ec4899",expertise:"Fluxo Natural",council:"copy"},copy_premium:{name:"David Ogilvy",icon:"ðŸ‘”",color:"#64748b",expertise:"Brand Premium",council:"copy"}};function a$({counselors:a,sources:c,compact:d=!1}){let e=new Set;if(a?.forEach(a=>e.add(a)),c?.forEach(a=>{a.counselor&&e.add(a.counselor)}),0===e.size)return null;let f=Array.from(e).map(a=>aZ[a]).filter(Boolean);if(0===f.length)return null;let g=f.filter(a=>"funnel"===a.council),h=f.filter(a=>"copy"===a.council);return d?(0,b.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-3",children:f.map((a,c)=>{let d=a.name?.split(" ").pop()||a.name||"Unknown";return(0,b.jsxs)(j.motion.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.05*c},className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs",style:{backgroundColor:`${a.color}15`,color:a.color},children:[(0,b.jsx)("span",{children:a.icon}),(0,b.jsx)("span",{className:"font-medium",children:d})]},(a.name||"counselor")+c)})}):(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/5",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,b.jsx)("span",{className:"text-xs text-zinc-500 font-medium",children:"Conselheiros consultados"})}),(0,b.jsxs)("div",{className:"space-y-2",children:[g.length>0&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[(0,b.jsx)("span",{className:"text-[10px] text-zinc-600 uppercase tracking-wider mr-1",children:"Funil:"}),g.map((a,c)=>(0,b.jsxs)(j.motion.span,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.05*c},className:"inline-flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs border cursor-default",style:{backgroundColor:`${a.color}10`,borderColor:`${a.color}30`,color:a.color},title:a.expertise,children:[(0,b.jsx)("span",{children:a.icon}),(0,b.jsx)("span",{className:"font-medium",children:a.name})]},a.name))]}),h.length>0&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[(0,b.jsx)("span",{className:"text-[10px] text-zinc-600 uppercase tracking-wider mr-1",children:"Copy:"}),h.map((a,c)=>(0,b.jsxs)(j.motion.span,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.1+.05*c},className:"inline-flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs border cursor-default",style:{backgroundColor:`${a.color}10`,borderColor:`${a.color}30`,color:a.color},title:a.expertise,children:[(0,b.jsx)("span",{children:a.icon}),(0,b.jsx)("span",{className:"font-medium",children:a.name})]},a.name))]})]})]})}function a_({source:a}){let c=a.file.split(/[/\\]/).pop()?.replace(".md","")||"Documento",d=a.rerankScore||a.similarity||0,e=Math.round(100*d),f="brand_asset"===a.type;return(0,b.jsxs)(aS,{children:[(0,b.jsx)(aT,{asChild:!0,children:(0,b.jsxs)("button",{className:(0,q.cn)("inline-flex items-center gap-1 rounded px-2 py-0.5 text-[10px] transition-all","bg-zinc-800/50 text-zinc-400 hover:bg-zinc-700 hover:text-zinc-200","border border-transparent",f&&"border-emerald-500/30 bg-emerald-500/5 text-emerald-400/90 hover:bg-emerald-500/10"),children:[(0,b.jsx)(G.FileText,{className:"size-3"}),c,d>0&&(0,b.jsxs)("span",{className:(0,q.cn)("text-[9px] opacity-60 ml-0.5",f?"text-emerald-500":"text-zinc-500"),children:[e,"%"]})]})}),(0,b.jsxs)(aU,{side:"top",align:"start",className:"w-80 bg-zinc-900 border-zinc-800 p-0 overflow-hidden shadow-2xl",children:[(0,b.jsxs)("div",{className:"p-3 border-b border-zinc-800 flex items-center justify-between bg-zinc-900/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:(0,q.cn)("p-1.5 rounded",f?"bg-emerald-500/10 text-emerald-500":"bg-zinc-800 text-zinc-400"),children:(0,b.jsx)(G.FileText,{className:"size-3.5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-xs font-semibold text-zinc-200 truncate max-w-[180px]",children:c}),(0,b.jsxs)("p",{className:"text-[9px] text-zinc-500 uppercase tracking-tighter",children:[a.type||"Documento"," ",a.section&&`â€¢ ${a.section}`]})]})]}),(0,b.jsx)("a",{href:"#",className:"text-zinc-500 hover:text-zinc-300 transition-colors",onClick:a=>a.preventDefault(),children:(0,b.jsx)(aX.ExternalLink,{className:"size-3.5"})})]}),(0,b.jsxs)("div",{className:"p-3 space-y-3",children:[a.content&&(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] text-zinc-500",children:[(0,b.jsx)(aY.Info,{className:"size-3"}),(0,b.jsx)("span",{children:"Snippet extraÃ­do"})]}),(0,b.jsx)(aW.ScrollArea,{className:"h-24 w-full rounded border border-zinc-800/50 bg-black/20 p-2",children:(0,b.jsxs)("p",{className:"text-[11px] leading-relaxed text-zinc-400 italic",children:['"',a.content.length>300?`${a.content.substring(0,300)}...`:a.content,'"']})})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-zinc-500",children:[(0,b.jsx)(J.Target,{className:"size-3"}),(0,b.jsx)("span",{children:"RelevÃ¢ncia Contextual"})]}),(0,b.jsxs)("span",{className:(0,q.cn)("font-mono font-medium",d>.8?"text-emerald-500":"text-zinc-400"),children:[e,"%"]})]}),(0,b.jsx)(aV.Progress,{value:e,className:"h-1 bg-zinc-800",indicatorClassName:(0,q.cn)(d>.8?"bg-emerald-500":"bg-zinc-500")})]}),a.counselor&&(0,b.jsxs)("div",{className:"pt-1 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-[9px] text-zinc-600 uppercase tracking-wider",children:"Associado a:"}),(0,b.jsxs)("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded bg-zinc-800/50 border border-zinc-700/50",children:[(0,b.jsx)("span",{className:"text-[10px]",children:aZ[a.counselor]?.icon}),(0,b.jsx)("span",{className:"text-[10px] text-zinc-400 font-medium",children:aZ[a.counselor]?.name.split(" ").pop()})]})]})]})]})]})}function a0({sources:a}){if(!a||0===a.length)return null;let c=a.map(a=>"string"==typeof a?{file:a}:a).filter(a=>a?.file);return 0===c.length?null:(0,b.jsxs)("div",{className:"mt-3 flex flex-wrap gap-1.5 items-center",children:[(0,b.jsx)("span",{className:"text-xs text-zinc-600 font-medium mr-0.5",children:"Fontes:"}),c.slice(0,6).map((a,c)=>(0,b.jsx)(a_,{source:a},c)),c.length>6&&(0,b.jsxs)("span",{className:"text-[10px] text-zinc-500 ml-1",children:["+",c.length-6," mais"]})]})}var a1=a.i(541284),a2=a.i(804655),a3=a.i(773496),a4=a.i(145075),a5=a.i(502117),a6=a.i(74552);function a7({data:a}){let[d,e]=(0,c.useState)(null);console.log("[AssetPreview] Build Version: 11.24.4 (Ultra-Resilient Parser Active)");let f=(a=>{if(!a)return null;if(a.strategy?.summary||a.strategy?.steps)return a;let b={strategy:{summary:a.strategy?.summary||a.funnel_strategy?.summary||a.summary||"EstratÃ©gia Sugerida",rationale:a.strategy?.rationale||a.funnel_strategy?.rationale||a.rationale||"",steps:a.strategy?.steps||a.funnel_strategy?.steps||a.steps||a.estrategias_aumento_ltv||[]},market_data:a.market_data||a.data||[],assets:a.assets||[]};return(b.strategy&&!b.strategy.summary&&b.strategy.steps&&b.strategy.steps.length>0&&(b.strategy.summary="EstratÃ©gia Detalhada"),b.strategy?.summary||b.strategy?.steps&&0!==b.strategy.steps.length)?b:null})(a);return f?(0,b.jsxs)("div",{className:"mt-6 space-y-8 animate-in-up",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-emerald-400 font-semibold uppercase tracking-wider text-xs",children:[(0,b.jsx)(a4.Lightbulb,{className:"h-4 w-4"}),"EstratÃ©gia Recomendada"]}),(0,b.jsxs)(a5.Card,{className:"card-premium p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:f.strategy.summary}),f.strategy.rationale&&(0,b.jsx)("p",{className:"text-zinc-400 text-sm mb-4 leading-relaxed",children:f.strategy.rationale}),(0,b.jsx)("div",{className:"space-y-2",children:f.strategy.steps?.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-3 text-zinc-300 text-sm",children:[(0,b.jsx)("div",{className:"mt-1 flex-shrink-0 w-5 h-5 rounded-full bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center text-[10px] font-bold text-emerald-400",children:c+1}),(0,b.jsx)("span",{children:"string"==typeof a?a:JSON.stringify(a)})]},c))})]})]}),f.market_data&&f.market_data.length>0&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-emerald-400 font-semibold uppercase tracking-wider text-xs",children:[(0,b.jsx)(M.BarChart3,{className:"h-4 w-4"}),"Benchmarks de 2026"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.market_data.map((a,c)=>(0,b.jsxs)(a5.Card,{className:"card-premium card-hover p-5 flex flex-col justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsx)("span",{className:"text-zinc-500 text-xs font-medium uppercase tracking-tight",children:a.label}),(0,b.jsx)(a6.Badge,{className:(0,q.cn)("text-[10px] font-bold uppercase","success"===a.status?"badge-success":"warning"===a.status?"badge-warning":"danger"===a.status?"badge-error":"bg-zinc-800"),children:a.status})]}),(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsxs)("span",{className:"stat-value text-2xl",children:[a.value,"%"===a.unit?"%":""]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-[10px] text-zinc-500",children:[(0,b.jsx)(ae.ArrowRight,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:["Meta 2026: ",a.benchmark_2026,"%"===a.unit?"%":""]})]})]})]}),(0,b.jsx)("div",{className:"mt-4 pt-4 border-t border-white/[0.04] text-[10px] text-zinc-600 italic",children:a.source_context})]},c))})]}),a.assets&&a.assets.length>0&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-emerald-400 font-semibold uppercase tracking-wider text-xs",children:[(0,b.jsx)(I.Zap,{className:"h-4 w-4"}),"Ativos Prontos para Uso"]}),(0,b.jsx)("div",{className:"space-y-4",children:a.assets.map((a,c)=>(0,b.jsx)("div",{className:"group relative",children:(0,b.jsxs)(a5.Card,{className:"card-premium p-0 overflow-hidden border-white/[0.06] hover:border-emerald-500/30 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-white/[0.02] border-b border-white/[0.04]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-1.5 rounded-md bg-emerald-500/10 text-emerald-400",children:(a=>{switch(a){case"DM_SCRIPT":return(0,b.jsx)(n.MessageSquare,{className:"h-4 w-4"});case"STORY_SEQUENCE":return(0,b.jsx)(a2.Layers,{className:"h-4 w-4"});case"AD_COPY":return(0,b.jsx)(a3.Megaphone,{className:"h-4 w-4"});case"HOOK":return(0,b.jsx)(I.Zap,{className:"h-4 w-4"});default:return(0,b.jsx)(G.FileText,{className:"h-4 w-4"})}})(a.type)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-bold text-zinc-200",children:a.title}),(0,b.jsx)("span",{className:"text-[10px] text-zinc-500 uppercase tracking-widest",children:a.type})]})]}),(0,b.jsx)(l.Button,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1.5 text-xs text-zinc-400 hover:text-emerald-400 hover:bg-emerald-500/10",onClick:()=>{var b;return b=a.content,void(navigator.clipboard.writeText(b),e(c),setTimeout(()=>e(null),2e3))},children:d===c?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.Check,{className:"h-3.5 w-3.5"}),"Copiado"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ac.Copy,{className:"h-3.5 w-3.5"}),"Copiar Script"]})})]}),(0,b.jsx)("div",{className:"p-4 bg-zinc-950/30",children:(0,b.jsx)("pre",{className:"text-xs sm:text-sm text-zinc-300 whitespace-pre-wrap font-mono leading-relaxed",children:a.content})}),(0,b.jsxs)("div",{className:"px-4 py-2 bg-white/[0.01] text-[10px] text-zinc-600 flex justify-between items-center",children:[(0,b.jsxs)("span",{children:["ReferÃªncia: ",a.counselor_reference]}),(0,b.jsxs)("span",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsx)(S.Check,{className:"h-3 w-3 text-emerald-500"})," Pronto para disparar"]})]})]})},c))})]})]}):(console.warn("[AssetPreview] Payload da IA nÃ£o pÃ´de ser normalizado. Chaves encontradas:",Object.keys(a||{})),null)}function a8({message:a,index:d,campaignId:e}){let f,[g,h]=(0,c.useState)(!1),i="user"===a.role,k=i?[]:(a=>{if(!a.includes("[NANOBANANA_PROMPT]"))return[];let b=[],c="[NANOBANANA_PROMPT]";try{let d=0;for(;-1!==(d=a.indexOf(c,d));){let e=a.indexOf("{",d);if(-1===e){d+=c.length;continue}let f=0,g=!1,h=!1,i=null;for(let b=e;b<a.length;b++){let c=a[b];if(h){h=!1;continue}if("\\"===c){h=!0;continue}if('"'===c){g=!g;continue}if(!g){if("{"===c)f++;else if("}"===c&&(f--,0===f)){i=a.substring(e,b+1),d=b+1;break}}}if(i)try{let a=i.replace(/```json/g,"").replace(/```/g,"").replace(/,\s*([}\]])/g,"$1").replace(/(\r\n|\n|\r)/gm," "),c=JSON.parse(a);(c.visualPrompt||c.prompt)&&b.push(c)}catch(d){console.warn("Falha ao parsear bloco extraÃ­do:",i);let a=(a,b)=>{let c=RegExp(`"${a}"\\s*:\\s*"([\\s\\S]*?)"(?=\\s*[,}])`),d=b.match(c);return d?d[1].trim():null},c=a("visualPrompt",i)||a("prompt",i);c&&b.push({platform:a("platform",i)||"universal",format:a("format",i)||"square",safeZone:a("safeZone",i)||"feed",visualPrompt:c.replace(/\\"/g,'"'),prompt:c.replace(/\\"/g,'"'),aspectRatio:a("aspectRatio",i)||"1:1"})}else d+=c.length}}catch(a){console.warn("Erro geral na detecÃ§Ã£o de prompts NanoBanana.",a)}return b})(a.content),l=i?null:(a=>{let b="[COUNCIL_OUTPUT]:";if(!a.includes(b))return null;try{let c=a.indexOf(b),d=a.indexOf("{",c);if(-1===d)return null;let e=0,f=!1,g=!1,h=null;for(let b=d;b<a.length;b++){let c=a[b];if(g){g=!1;continue}if("\\"===c){g=!0;continue}if('"'===c){f=!f;continue}if(!f){if("{"===c)e++;else if("}"===c&&(e--,0===e)){h=a.substring(d,b+1);break}}}if(h){let a=h.replace(/,\s*([}\]])/g,"$1").replace(/(\r\n|\n|\r)/gm," ");return JSON.parse(a)}}catch(a){console.warn("Council output found but could not be parsed as valid JSON.",a)}return null})(a.content),m=i?[]:function(a){let b=[],c=a.split("\n"),d=null;for(let a=0;a<c.length;a++){let e=c[a];if(e.includes("### ðŸŽ™ï¸ DeliberaÃ§Ã£o do Conselho")){d&&b.push(d),b.push({type:"header",content:e.trim()}),d=null;continue}if(e.includes("### âš–ï¸ Veredito do Moderador")||e.includes("### âš–ï¸ Veredito")||e.includes("### âš–ï¸ Veredito do Conselho")||e.includes("[VEREDITO_DO_CONSELHO]")||e.includes("### âš–ï¸ Veredito do Conselho")){d&&b.push(d),d={type:"verdict",content:""};continue}let f=e.match(/\*\*\[(.*?)\]\*\*:\s*(.*)/);if(f){d&&b.push(d);let a=f[1],c=f[2];d={type:"agent",agentId:Object.keys(P.COUNSELORS_REGISTRY).find(b=>P.COUNSELORS_REGISTRY[b].name.toUpperCase()===a.toUpperCase()),agentName:a,content:c+"\n"};continue}if("---"===e.trim()){d&&b.push(d),d=null;continue}d?d.content+=e+"\n":""!==e.trim()&&(d={type:"text",content:e+"\n"})}return d&&b.push(d),b.map(a=>{let b=a.content.trim();return{...a,content:b,mentions:"agent"===a.type?function(a,b){let c=new Set;for(let d of Object.values(P.COUNSELORS_REGISTRY)){if(d.id===b)continue;let e=d.name.split(" "),f=e[e.length-1];RegExp(`\\b(${d.name}|${f})\\b`,"gi").test(a)&&c.add(d.id)}return Array.from(c)}(b,a.agentId):void 0}}).filter(a=>""!==a.content||"header"===a.type)}(a.content),n=i?[]:(f=[],m.forEach(a=>{"agent"===a.type&&a.agentId&&a.mentions&&a.mentions.length>0&&f.push({from:a.agentId,to:a.mentions})}),f);return(0,b.jsxs)(j.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.03*d},className:(0,q.cn)("group flex gap-3 sm:gap-4 px-3 sm:px-6 py-4 sm:py-5 border-b border-white/[0.02]",i?"bg-transparent":"bg-white/[0.01]"),children:[(0,b.jsx)("div",{className:"flex-shrink-0 pt-0.5",children:i?(0,b.jsx)("div",{className:"flex h-6 w-6 sm:h-8 sm:w-8 items-center justify-center rounded-lg bg-zinc-800 text-sm font-medium text-zinc-300 shadow-sm",children:(0,b.jsx)(ab.User,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}):(0,b.jsx)("div",{className:"flex h-6 w-6 sm:h-8 sm:w-8 items-center justify-center rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 shadow-lg shadow-emerald-500/10",children:(0,b.jsx)(aa,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-white"})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"flex items-center justify-between gap-2 mb-1 sm:mb-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-[13px] sm:text-sm font-semibold text-zinc-300",children:i?"VocÃª":"Conselho"}),a.createdAt&&(0,b.jsx)("span",{className:"text-[10px] sm:text-xs text-zinc-600 font-medium",children:a.createdAt.toDate?.().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})}),(0,b.jsx)("div",{className:"text-[15px] sm:text-base leading-relaxed text-zinc-200",children:i?(0,b.jsx)("p",{className:"whitespace-pre-wrap",children:a.content}):(0,b.jsxs)("div",{className:"space-y-4",children:[n.length>0&&(0,b.jsxs)("div",{className:"mb-6 flex flex-wrap items-center gap-y-2 gap-x-3 p-3 rounded-xl bg-white/[0.02] border border-white/[0.05] shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] text-zinc-500 font-bold uppercase tracking-widest border-r border-white/10 pr-3",children:[(0,b.jsx)(L.Share2,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:"Fluxo de Debate"})]}),(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:n.map((a,c)=>{let d=P.COUNSELORS_REGISTRY[a.from];return(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("span",{className:"text-xs",title:d.name,children:d.icon}),(0,b.jsx)(ae.ArrowRight,{className:"h-2 w-2 text-zinc-600"}),(0,b.jsx)("div",{className:"flex -space-x-1",children:a.to.map(a=>{let c=P.COUNSELORS_REGISTRY[a];return(0,b.jsx)("span",{className:"text-xs",title:c.name,children:c.icon},a)})}),c<n.length-1&&(0,b.jsx)("div",{className:"h-3 w-px bg-white/10 mx-1"})]},c)})})]}),m.length>0?m.map((a,c)=>{if("header"===a.type)return(0,b.jsx)("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4 border-b border-white/10 pb-2",children:a.content.replace("###","").trim()},c);if("agent"===a.type){let d=a.agentId?P.COUNSELORS_REGISTRY[a.agentId]:null,e=d?.color||"#10b981",f=d?.icon||"ðŸ’¬";return(0,b.jsxs)("div",{className:"relative group/agent pl-4 border-l-2",style:{borderLeftColor:e},children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-lg",children:f}),(0,b.jsx)("span",{className:"font-bold text-sm uppercase tracking-wider",style:{color:e},children:a.agentName})]}),a.mentions&&a.mentions.length>0&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 opacity-60 group-hover/agent:opacity-100 transition-opacity",children:[(0,b.jsx)("div",{className:"flex -space-x-2",children:a.mentions.map(a=>{let c=P.COUNSELORS_REGISTRY[a];return(0,b.jsx)("div",{className:"h-5 w-5 rounded-full bg-zinc-900 border border-white/10 flex items-center justify-center text-[10px]",title:`Citando ${c?.name}`,children:c?.icon},a)})}),(0,b.jsx)(L.Share2,{className:"h-3 w-3 text-zinc-500"})]})]}),(0,b.jsx)(af.MarkdownRenderer,{content:a.content,components:{strong:({node:a,...c})=>{let d=c.children?.toString()||"",e=Object.values(P.COUNSELORS_REGISTRY).find(a=>d.includes(a.name)||d.toUpperCase()===a.name.toUpperCase());return e?(0,b.jsxs)("span",{className:"px-1.5 py-0.5 rounded bg-white/5 border border-white/10 text-xs font-bold inline-flex items-center gap-1 mx-0.5 group/mention cursor-default",style:{color:e.color},children:[(0,b.jsx)("span",{className:"group-hover/mention:scale-110 transition-transform",children:e.icon}),d,(0,b.jsx)(ae.ArrowRight,{className:"h-2 w-2 opacity-0 -ml-1 group-hover/mention:opacity-100 transition-all"})]}):(0,b.jsx)("strong",{className:"text-white font-semibold",...c})}}}),a.mentions&&a.mentions.length>0&&(0,b.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-[10px] text-zinc-500 font-medium",children:[(0,b.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-white/5 to-transparent"}),(0,b.jsx)("span",{className:"uppercase tracking-tighter opacity-50",children:"Cross-Reference Flow"}),(0,b.jsx)("div",{className:"h-px flex-1 bg-gradient-to-l from-white/5 to-transparent"})]})]},c)}return"verdict"===a.type?(0,b.jsx)("div",{className:"mt-6 relative overflow-hidden p-0.5 rounded-xl bg-gradient-to-r from-emerald-500 via-blue-500 to-purple-500 animate-gradient-x shadow-lg shadow-emerald-500/10",children:(0,b.jsxs)("div",{className:"bg-zinc-900/95 backdrop-blur-sm p-4 rounded-[10px] h-full w-full",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)("div",{className:"p-1.5 rounded-lg bg-emerald-500/20 text-emerald-400",children:(0,b.jsx)(ad,{className:"h-4 w-4"})}),(0,b.jsx)("span",{className:"font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-blue-400 uppercase tracking-wider text-sm",children:"Veredito do Conselho"})]}),(0,b.jsx)(af.MarkdownRenderer,{content:a.content.replace("[VEREDITO_DO_CONSELHO]","").trim(),className:"prose-p:text-zinc-100 prose-p:font-medium"})]})},c):(0,b.jsx)(af.MarkdownRenderer,{content:a.content},c)}):(0,b.jsx)(af.MarkdownRenderer,{content:a.content}),k.length>0&&(0,b.jsxs)("div",{className:"space-y-4 mt-4 border-t border-purple-500/10 pt-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(D.Sparkles,{className:"h-4 w-4 text-purple-400"}),(0,b.jsx)("span",{className:"text-xs font-bold text-purple-300 uppercase tracking-wider",children:"AÃ§Ãµes de Design DisponÃ­veis"})]}),(0,b.jsx)("div",{className:"space-y-3",children:k.map((c,d)=>(0,b.jsx)(a1.DesignGenerationCard,{promptData:c,conversationId:a.id,campaignId:e},`${a.id}-design-${d}`))})]}),l&&(0,b.jsx)(a7,{data:l})]})}),!i&&(a.metadata?.counselors||a.metadata?.sources)&&(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(a$,{counselors:a.metadata.counselors,sources:a.metadata.sources,compact:!0})}),!i&&a.metadata?.sources&&a.metadata.sources.length>0&&(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(a0,{sources:a.metadata.sources})}),!i&&(0,b.jsx)("div",{className:"mt-3 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:(0,b.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(a.content),h(!0),setTimeout(()=>h(!1),2e3)},className:"flex items-center gap-1.5 h-8 px-2 -ml-2 rounded-lg text-xs text-zinc-500 hover:text-zinc-300 hover:bg-white/[0.03] transition-colors",children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.Check,{className:"h-3.5 w-3.5"}),"Copiado"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ac.Copy,{className:"h-3.5 w-3.5"}),"Copiar"]})})})]})]})}function a9({messages:a,isSending:c,accentColor:d,campaignId:e}){return(0,b.jsxs)("div",{className:"flex flex-col w-full pb-32",children:[a.map((a,c)=>(0,b.jsx)(a8,{message:a,index:c,campaignId:e},a.id)),c&&(0,b.jsxs)(j.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-4 px-6 py-5 bg-white/[0.01]",children:[(0,b.jsx)("div",{className:(0,q.cn)("flex h-8 w-8 items-center justify-center rounded-lg","indigo"===d?"bg-gradient-to-br from-indigo-500 to-indigo-600":"amber"===d?"bg-gradient-to-br from-amber-500 to-amber-600":"bg-gradient-to-br from-emerald-500 to-emerald-600"),children:(0,b.jsx)(aa,{className:"h-4 w-4 text-white"})}),(0,b.jsxs)("div",{className:"flex flex-col gap-1 justify-center",children:[(0,b.jsx)("span",{className:"text-[10px] uppercase tracking-wider font-bold text-zinc-500 animate-pulse",children:"Consultando Contexto..."}),(0,b.jsx)("div",{className:"flex items-center gap-1.5",children:[0,.2,.4].map(a=>(0,b.jsx)(j.motion.div,{animate:{scale:[1,1.2,1]},transition:{duration:.6,repeat:1/0,delay:a},className:(0,q.cn)("h-1.5 w-1.5 rounded-full","indigo"===d?"bg-indigo-500/50":"amber"===d?"bg-amber-500/50":"bg-emerald-500/50")},a))})]})]})]})}function ba({onSuggestionClick:a,mode:c}){let d="funnel"===c?["Como estruturar um funil de quiz?","Minha taxa de conversÃ£o estÃ¡ baixa","Qual tipo de funil para high ticket?","Como aplicar a Value Ladder?"]:"copy"===c?["Como criar headlines que convertem?","Qual copy para audiÃªncia fria?","Como estruturar uma oferta irresistÃ­vel?","Me ajude com uma sequÃªncia de emails"]:"social"===c?["Como viralizar no TikTok em 2025?","Ideias de hooks para Reels de 15s","Como converter seguidores em leads?","EstratÃ©gia de conteÃºdo para LinkedIn"]:"ads"===c?["Qual o melhor criativo para Meta Ads?","Como baixar o CPA no TikTok?","EstratÃ©gia de escala para $10k/dia","Como evitar bloqueios no Facebook?"]:"design"===c?["Como estruturar uma thumbnail de YouTube?","Briefing para carrossel do Instagram","Crie um prompt de criativo estÃ¡tico","Checklist de design para conversÃ£o"]:["Como criar urgÃªncia sem ser apelativo?","Como qualificar leads no topo do funil?","Preciso melhorar meu VSL script","Como aumentar o LTV dos clientes?"],e="funnel"===c?"indigo":"copy"===c?"amber":"social"===c?"rose":"ads"===c?"blue":"design"===c?"purple":"emerald";return(0,b.jsx)("div",{className:"flex h-full flex-col items-center justify-center p-4 sm:p-8",children:(0,b.jsxs)(j.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4},className:"text-center max-w-2xl",children:[(0,b.jsxs)("div",{className:"relative mx-auto mb-4 sm:mb-8 scale-90 sm:scale-100",children:[(0,b.jsx)("div",{className:(0,q.cn)("absolute inset-0 rounded-3xl blur-2xl opacity-40","indigo"===e?"bg-indigo-500/20":"amber"===e?"bg-amber-500/20":"rose"===e?"bg-rose-500/20":"blue"===e?"bg-blue-500/20":"purple"===e?"bg-purple-500/20":"bg-emerald-500/20")}),(0,b.jsx)("div",{className:(0,q.cn)("relative flex h-16 w-16 sm:h-20 sm:w-20 items-center justify-center rounded-2xl sm:rounded-3xl shadow-xl mx-auto","indigo"===e?"bg-gradient-to-br from-indigo-500 to-indigo-600 shadow-indigo-500/20":"amber"===e?"bg-gradient-to-br from-amber-500 to-amber-600 shadow-amber-500/20":"rose"===e?"bg-gradient-to-br from-rose-500 to-rose-600 shadow-rose-500/20":"blue"===e?"bg-gradient-to-br from-blue-500 to-blue-600 shadow-blue-500/20":"purple"===e?"bg-gradient-to-br from-purple-500 to-purple-600 shadow-purple-500/20":"bg-gradient-to-br from-emerald-500 to-emerald-600 shadow-emerald-500/20"),children:(0,b.jsx)(aa,{className:"h-8 w-8 sm:h-10 sm:w-10 text-white"})})]}),(0,b.jsx)("h2",{className:"text-lg sm:text-2xl font-bold text-white mb-2 sm:mb-3",children:P.CHAT_MODES[c].title}),(0,b.jsxs)("p",{className:"text-xs sm:text-base text-zinc-500 mb-6 sm:mb-8 leading-relaxed px-6 sm:px-4",children:["funnel"===c&&`Consulte especialistas em arquitetura de funil, qualifica\xe7\xe3o, LTV e monetiza\xe7\xe3o.`,"copy"===c&&`Consulte copywriters lend\xe1rios sobre headlines, persuas\xe3o, ofertas e estrutura.`,"social"===c&&`Consulte especialistas em redes sociais e viraliza\xe7\xe3o.`,"ads"===c&&`Consulte especialistas em tr\xe1fego pago, escala e otimiza\xe7\xe3o de campanhas.`,"design"===c&&`Consulte o Diretor de Design para criar briefings visuais e prompts de alta convers\xe3o.`,"general"===c&&`Pergunte sobre funis, ofertas, copy e estrat\xe9gias de growth.`]}),(0,b.jsx)("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-2 mb-8 px-4 sm:px-0 max-w-lg mx-auto",children:d.map((c,d)=>(0,b.jsxs)(j.motion.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1+.05*d},onClick:()=>a(c),className:(0,q.cn)("flex items-center gap-2 rounded-xl border px-3 py-2.5 sm:px-4 sm:py-3 text-[13px] sm:text-sm text-zinc-300 transition-all text-left","indigo"===e?"border-white/[0.04] bg-white/[0.01] hover:border-indigo-500/30 hover:bg-indigo-500/5":"amber"===e?"border-white/[0.04] bg-white/[0.01] hover:border-amber-500/30 hover:bg-amber-500/5":"rose"===e?"border-white/[0.04] bg-white/[0.01] hover:border-rose-500/30 hover:bg-rose-500/5":"border-white/[0.04] bg-white/[0.01] hover:border-emerald-500/30 hover:bg-emerald-500/5"),children:[(0,b.jsx)(D.Sparkles,{className:(0,q.cn)("h-3.5 w-3.5 shrink-0 opacity-70","indigo"===e?"text-indigo-400":"amber"===e?"text-amber-400":"rose"===e?"text-rose-400":"text-emerald-400")}),(0,b.jsx)("span",{className:"line-clamp-1",children:c})]},c))}),(0,b.jsxs)("div",{className:"hidden sm:block space-y-4",children:["funnel"===c&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-zinc-600 uppercase tracking-wider mb-2",children:"Conselho de Funil"}),(0,b.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:P.CHAT_MODES.funnel.counselors.map((a,c)=>{let d=P.COUNSELORS_REGISTRY[a];return d?(0,b.jsxs)(j.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.5+.05*c},className:"flex items-center gap-1.5 rounded-full bg-zinc-800/50 px-3 py-1.5",title:d.expertise,children:[(0,b.jsx)("span",{className:"text-sm",children:d.icon}),(0,b.jsx)("span",{className:"text-xs text-zinc-400",children:d.name.split(" ").slice(-1)[0]})]},a):null})})]}),"copy"===c&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-zinc-600 uppercase tracking-wider mb-2",children:"Conselho de Copy"}),(0,b.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:P.CHAT_MODES.copy.counselors.map((a,c)=>{let d=P.COUNSELORS_REGISTRY[a];return d?(0,b.jsxs)(j.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.7+.05*c},className:"flex items-center gap-1.5 rounded-full bg-zinc-800/50 px-3 py-1.5",title:d.expertise,children:[(0,b.jsx)("span",{className:"text-sm",children:d.icon}),(0,b.jsx)("span",{className:"text-xs text-zinc-400",children:d.name.split(" ").slice(-1)[0]})]},a):null})})]}),"social"===c&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-zinc-600 uppercase tracking-wider mb-2",children:"Conselho Social"}),(0,b.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:P.CHAT_MODES.social.counselors.map((a,c)=>{let d=P.COUNSELORS_REGISTRY[a];return d?(0,b.jsxs)(j.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.5+.05*c},className:"flex items-center gap-1.5 rounded-full bg-zinc-800/50 px-3 py-1.5",title:d.expertise,children:[(0,b.jsx)("span",{className:"text-sm",children:d.icon}),(0,b.jsx)("span",{className:"text-xs text-zinc-400",children:d.name.split(" ").slice(-1)[0]})]},a):null})})]}),"ads"===c&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-zinc-600 uppercase tracking-wider mb-2",children:"Conselho de Ads"}),(0,b.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:P.CHAT_MODES.ads.counselors.map((a,c)=>{let d=P.COUNSELORS_REGISTRY[a];return d?(0,b.jsxs)(j.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.5+.05*c},className:"flex items-center gap-1.5 rounded-full bg-zinc-800/50 px-3 py-1.5",title:d.expertise,children:[(0,b.jsx)("span",{className:"text-sm",children:d.icon}),(0,b.jsx)("span",{className:"text-xs text-zinc-400",children:d.name.split(" ").slice(-1)[0]})]},a):null})})]}),"design"===c&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-zinc-600 uppercase tracking-wider mb-2",children:"Diretor de Design"}),(0,b.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:P.CHAT_MODES.design.counselors.map((a,c)=>{let d=P.COUNSELORS_REGISTRY[a];return d?(0,b.jsxs)(j.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.5+.05*c},className:"flex items-center gap-1.5 rounded-full bg-zinc-800/50 px-3 py-1.5",title:d.expertise,children:[(0,b.jsx)("span",{className:"text-sm",children:d.icon}),(0,b.jsx)("span",{className:"text-xs text-zinc-400",children:d.name})]},a):null})})]}),"general"===c&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-zinc-600 uppercase tracking-wider mb-2",children:"23 Especialistas do Conselho"}),(0,b.jsxs)("div",{className:"flex flex-wrap justify-center gap-2 px-12",children:[["russell_brunson","dan_kennedy","frank_kern","eugene_schwartz","gary_halbert","savannah_sanchez","design_director"].map((a,c)=>{let d=P.COUNSELORS_REGISTRY[a];return d?(0,b.jsxs)(j.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.5+.05*c},className:"flex items-center gap-1.5 rounded-full bg-zinc-800/50 px-3 py-1.5",title:d.expertise,children:[(0,b.jsx)("span",{className:"text-sm",children:d.icon}),(0,b.jsx)("span",{className:"text-xs text-zinc-400",children:"design_director"===a?"Design":d.name.split(" ").slice(-1)[0]})]},a):null}),(0,b.jsx)("div",{className:"flex items-center gap-1.5 rounded-full bg-emerald-500/10 px-3 py-1.5 border border-emerald-500/20",children:(0,b.jsx)("span",{className:"text-xs text-emerald-400",children:"+16 experts"})})]})]})]})]})})}var bb=a.i(806044),bc=a.i(185589),bd=a.i(399385),be=a.i(698565),bf=a.i(264747);let bg=(0,E.default)("file-search",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]]);var bh=a.i(26e3),bi=a.i(829277),bj=a.i(668616),bk=a.i(140284),bl=a.i(428485);let bm={guideline:bf.BookOpen,brand_book:bf.BookOpen,strategy:J.Target,reference:bg,other:G.FileText,url:bb.Link,image:bc.Image};function bn({brandId:a,className:d}){let{assets:e,isLoading:f}=(0,bk.useBrandAssets)(a),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(null);if(f)return(0,b.jsxs)("div",{className:(0,q.cn)("flex items-center gap-2 px-3 py-1.5",d),children:[(0,b.jsx)(H.Loader2,{className:"h-3 w-3 animate-spin text-zinc-500"}),(0,b.jsx)("span",{className:"text-xs text-zinc-500 font-medium",children:"Carregando..."})]});let k=e.length;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(bl.Dialog,{open:g,onOpenChange:h,children:[(0,b.jsx)(bl.DialogTrigger,{asChild:!0,children:(0,b.jsxs)("button",{className:(0,q.cn)("group flex items-center gap-2 px-3 h-9 sm:h-8 rounded-full transition-all duration-300",k>0?"bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20":"bg-zinc-500/10 hover:bg-zinc-500/20 border border-zinc-500/10",d),children:[(0,b.jsxs)("div",{className:"relative shrink-0",children:[(0,b.jsx)(D.Sparkles,{className:(0,q.cn)("h-4 w-4 sm:h-3.5 sm:w-3.5 transition-transform duration-500 group-hover:rotate-12",k>0?"text-emerald-400":"text-zinc-500")}),k>0&&(0,b.jsxs)("span",{className:"absolute -top-1 -right-1 flex h-2 w-2",children:[(0,b.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),(0,b.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]})]}),(0,b.jsx)("span",{className:(0,q.cn)("text-xs font-medium tracking-tight transition-colors",k>0?"text-emerald-400":"text-zinc-500"),children:k>0?`${k} Ativos`:"Sem contexto"}),k>0&&(0,b.jsx)(bh.ChevronRight,{className:"h-3 w-3 text-emerald-500/50 group-hover:text-emerald-400 transition-colors"})]})}),(0,b.jsxs)(bl.DialogContent,{className:"sm:max-w-[425px] bg-zinc-950 border-white/[0.04] p-0 overflow-hidden shadow-2xl",children:[(0,b.jsxs)(bl.DialogHeader,{className:"p-6 pb-2",children:[(0,b.jsxs)(bl.DialogTitle,{className:"flex items-center gap-2 text-white",children:[(0,b.jsx)(D.Sparkles,{className:"h-4 w-4 text-emerald-400"}),"Contexto Ativo da Marca"]}),(0,b.jsx)("p",{className:"text-sm text-zinc-500",children:"Documentos que personalizam as respostas da IA."})]}),(0,b.jsx)(aW.ScrollArea,{className:"max-h-[60vh] px-6 pb-6",children:(0,b.jsx)("div",{className:"space-y-3 mt-4",children:0===k?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-zinc-900 flex items-center justify-center mb-3",children:(0,b.jsx)(G.FileText,{className:"h-6 w-6 text-zinc-700"})}),(0,b.jsx)("p",{className:"text-sm text-zinc-400",children:"Nenhum asset encontrado."})]}):e.map(a=>{let c=bm[a.type]||G.FileText,d=!!a.extractedText?.trim();return(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/[0.02] border border-white/[0.04] hover:bg-white/[0.04] transition-colors group",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-lg bg-zinc-900 flex items-center justify-center border border-white/[0.04] text-zinc-400 group-hover:text-white transition-colors",children:(0,b.jsx)(c,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-white truncate",title:a.name,children:a.name}),d&&(0,b.jsx)("button",{onClick:()=>j(a),className:"shrink-0 p-1.5 rounded-lg text-zinc-500 hover:text-emerald-400 hover:bg-emerald-500/10 transition-all",title:"Ver texto extraÃ­do",children:(0,b.jsx)(bi.Eye,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,b.jsx)(a6.Badge,{variant:"outline",className:"text-[10px] h-4 px-1.5 bg-white/[0.02] text-zinc-500 border-white/[0.04] capitalize",children:a.type.replace("_"," ")}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:"ready"===a.status?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(bd.CheckCircle2,{className:"h-3 w-3 text-emerald-500"}),(0,b.jsx)("span",{className:"text-[10px] text-emerald-500/80",children:"Pronto"})]}):"processing"===a.status?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(H.Loader2,{className:"h-3 w-3 animate-spin text-amber-500"}),(0,b.jsx)("span",{className:"text-[10px] text-amber-500/80",children:"Processando"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(be.AlertCircle,{className:"h-3 w-3 text-red-500"}),(0,b.jsx)("span",{className:"text-[10px] text-red-500/80",children:"Erro"})]})})]})]})]},a.id)})})})]})]}),(0,b.jsx)(bl.Dialog,{open:!!i,onOpenChange:a=>!a&&j(null),children:(0,b.jsxs)(bl.DialogContent,{className:"sm:max-w-2xl bg-zinc-950 border-white/[0.04] p-0 overflow-hidden shadow-2xl",children:[(0,b.jsx)(bl.DialogHeader,{className:"p-6 border-b border-white/[0.04]",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-lg bg-emerald-500/10 flex items-center justify-center text-emerald-400",children:(0,b.jsx)(G.FileText,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(bl.DialogTitle,{className:"text-white text-base",children:["Preview: ",i?.name]}),(0,b.jsx)("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Texto extraÃ­do e processado para o RAG"})]})]}),(0,b.jsxs)("a",{href:i?.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/[0.03] border border-white/[0.04] text-xs text-zinc-400 hover:text-white hover:bg-white/[0.06] transition-all",children:[(0,b.jsx)(bj.FileDown,{className:"h-3.5 w-3.5"}),"Original"]})]})}),(0,b.jsx)(aW.ScrollArea,{className:"h-[60vh] p-6 bg-zinc-900/30",children:i?.extractedText?(0,b.jsx)(af.MarkdownRenderer,{content:i.extractedText}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full py-12 text-center",children:[(0,b.jsx)(be.AlertCircle,{className:"h-8 w-8 text-zinc-700 mb-3"}),(0,b.jsx)("p",{className:"text-sm text-zinc-500",children:"Nenhum texto extraÃ­do disponÃ­vel."})]})}),(0,b.jsx)("div",{className:"p-4 border-t border-white/[0.04] bg-zinc-950/50 flex justify-end",children:(0,b.jsx)(l.Button,{variant:"ghost",onClick:()=>j(null),className:"text-zinc-400 hover:text-white hover:bg-white/[0.04]",children:"Fechar Preview"})})]})})]})}let bo=(0,E.default)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),bp=(0,E.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);function bq({isOpen:a,onOpenChange:c}){return(0,b.jsx)(bl.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(bl.DialogContent,{className:"sm:max-w-[480px] bg-[#0c0c0e] border-white/[0.08] p-0 overflow-hidden",children:[(0,b.jsxs)("div",{className:"relative p-6 pt-10",children:[(0,b.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-32 bg-gradient-to-b from-violet-600/20 to-transparent blur-2xl"}),(0,b.jsxs)(bl.DialogHeader,{className:"relative text-center space-y-4",children:[(0,b.jsx)("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-violet-500 to-fuchsia-600 shadow-lg shadow-violet-500/20",children:(0,b.jsx)(bo,{className:"h-8 w-8 text-white"})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(bl.DialogTitle,{className:"text-2xl font-bold text-white text-center",children:"VocÃª atingiu o limite de crÃ©ditos"}),(0,b.jsx)(bl.DialogDescription,{className:"text-zinc-400 text-center text-base",children:"Sua conta gratuita possui 10 crÃ©ditos mensais. FaÃ§a o upgrade agora para continuar gerando estratÃ©gias ilimitadas."})]})]}),(0,b.jsxs)("div",{className:"mt-8 space-y-4",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-zinc-300 uppercase tracking-wider text-center",children:"Vantagens do Plano Pro"}),(0,b.jsx)("div",{className:"grid gap-3",children:["CrÃ©ditos ilimitados para o Conselho","Acesso a todos os 15 especialistas","Upload de arquivos e URLs (Contexto Ilimitado)","ExportaÃ§Ã£o em PDF e Notion"].map((a,c)=>(0,b.jsxs)(j.motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*c},className:"flex items-center gap-3 rounded-xl border border-white/[0.04] bg-white/[0.02] p-3",children:[(0,b.jsx)(bd.CheckCircle2,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),(0,b.jsx)("span",{className:"text-sm text-zinc-300",children:a})]},c))})]})]}),(0,b.jsxs)(bl.DialogFooter,{className:"p-6 bg-white/[0.02] border-t border-white/[0.04] flex-col sm:flex-col gap-3",children:[(0,b.jsx)(l.Button,{className:"w-full h-12 bg-violet-600 hover:bg-violet-500 text-white font-bold text-lg rounded-xl shadow-lg shadow-violet-600/20 transition-all hover:scale-[1.02] active:scale-[0.98]",onClick:()=>window.open("https://conselho-de-funil.vercel.app/pricing","_blank"),children:"Ver Planos de Upgrade"}),(0,b.jsxs)("button",{className:"flex items-center justify-center gap-2 text-sm text-zinc-500 hover:text-zinc-300 transition-colors py-2",onClick:()=>window.open("https://wa.me/seunumerodesuporte","_blank"),children:[(0,b.jsx)(bp,{className:"h-4 w-4"}),"Falar com suporte"]})]})]})})}var br=a.i(164636);function bs(){let a=(0,d.useRouter)(),j=(0,d.useSearchParams)(),k=j.get("id"),l=j.get("funnelId"),m=j.get("campaignId"),n="undefined"!==m&&m?m:null,o=j.get("mode"),p=(0,h.useActiveBrand)(),{user:q}=(0,i.useUser)(),[r,s]=(0,c.useState)("general");(0,c.useEffect)(()=>{o&&["general","funnel","copy","social","ads","design"].includes(o)&&s(o)},[o]);let[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),x=(0,c.useRef)(null),y=P.CHAT_MODES[r],z=y.accentColor,A=br.CONFIG.ENABLE_CREDIT_LIMIT&&q?.credits!==void 0&&q.credits<=0,{conversations:C,isLoading:D,create:E,remove:F}=function(){let{user:a}=(0,f.useAuthStore)(),[b,d]=(0,c.useState)([]),[e,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(null),k=(0,c.useCallback)(async()=>{if(!a){d([]),h(!1);return}try{h(!0);let b=await (0,g.getUserConversations)(a.uid);d(b),j(null)}catch(a){console.error("Error loading conversations:",a),j("Erro ao carregar conversas")}finally{h(!1)}},[a]);return(0,c.useEffect)(()=>{k()},[k]),{conversations:b,isLoading:e,error:i,create:async(b="Nova conversa",c)=>{if(!a)throw Error("User not authenticated");let d=await (0,g.createConversation)({userId:a.uid,title:b,context:{mode:"general"},brandId:c});return await k(),d},remove:async a=>{await (0,g.deleteConversation)(a),await k()},refresh:k}}(),{messages:G,isSending:H,sendMessage:I,error:J}=function(a){let[b,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!0),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null);return(0,c.useEffect)(()=>{if(!a){d([]),f(!1);return}f(!0);let b=(0,g.subscribeToMessages)(a,a=>{d(a),f(!1)});return()=>b()},[a]),{messages:b,isLoading:e,isSending:h,error:j,sendMessage:async(b,c="general",d,e,f)=>{if(a){i(!0),k(null);try{await (0,g.addMessage)(a,{role:"user",content:b});let h=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:b,conversationId:a,mode:c,...d?{funnelId:d}:{},...f?{campaignId:f}:{},...e?{selectedAgents:e.selectedAgents,intensity:e.intensity}:{}})});if(!h.ok){let b=await h.json();if(403===h.status&&"insufficient_credits"===b.error)throw await (0,g.addMessage)(a,{role:"assistant",content:"âŒ **Saldo de crÃ©ditos insuficiente.**\n\nSeu saldo de crÃ©ditos acabou. FaÃ§a upgrade para continuar consultando o conselho."}),Error("Saldo de crÃ©ditos insuficiente");throw Error(b.error||"Failed to get response")}}catch(b){console.error("Error sending message:",b),k(b instanceof Error?b.message:"Erro ao enviar mensagem"),await (0,g.addMessage)(a,{role:"assistant",content:`âš ï¸ Desculpe, ocorreu um erro ao processar sua mensagem. Por favor, tente novamente.

*Erro: ${b instanceof Error?b.message:"Erro desconhecido"}*`})}finally{i(!1)}}}}}(k);(0,c.useEffect)(()=>{"Saldo de crÃ©ditos insuficiente"===J&&w(!0)},[J]),(0,c.useEffect)(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[G,H]);let K=async()=>{u(!0);try{let b=await E("Nova conversa",p?.id);a.push(`/chat?id=${b}`)}finally{u(!1)}},L=async(b,c)=>{c.stopPropagation(),await F(b),b===k&&a.push("/chat")},M=async(b,c)=>{let d="funnel"===r?"funnel_creation":"copy"===r?"copy":"social"===r?"social":"ads"===r?"ads":"design"===r?"design":"party"===r?"party":"general";if(!k){let e=await E("Nova conversa",p?.id),f=l?`/chat?id=${e}&funnelId=${l}`:`/chat?id=${e}`;n&&(f+=`&campaignId=${n}`),a.push(f),setTimeout(()=>{I(b,d,l||void 0,c,n||void 0)},500);return}await I(b,d,l||void 0,c,n||void 0)};return(0,b.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,b.jsx)(e.Header,{title:y.title,subtitle:y.subtitle,actions:(0,b.jsx)(bn,{brandId:p?.id})}),(0,b.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,b.jsx)(B,{conversations:C,isLoading:D,conversationId:k,isCreating:t,accentColor:z,onNewConversation:K,onSelectConversation:b=>{a.push(`/chat?id=${b}`)},onDeleteConversation:L}),(0,b.jsxs)("div",{className:"flex flex-1 flex-col relative overflow-hidden",children:[(0,b.jsx)("div",{ref:x,className:"flex-1 overflow-y-auto custom-scrollbar bg-[#09090b]",children:(0,b.jsx)("div",{className:"min-h-full flex flex-col justify-end",children:k&&0!==G.length?(0,b.jsx)(a9,{messages:G,isSending:H,accentColor:z,campaignId:n}):(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,b.jsx)(ba,{onSuggestionClick:M,mode:r})})})}),(0,b.jsx)(_,{onSend:M,isLoading:H,disabled:A,disabledMessage:"Saldo de crÃ©ditos insuficiente",mode:r,onModeChange:s})]})]}),(0,b.jsx)(bq,{isOpen:v,onOpenChange:w})]})}a.s(["default",()=>bs],364427)}];

//# sourceMappingURL=OneDrive_Desktop_CURSOR_CONSELHO%20DE%20FUNIL_app_src_app_chat_page_tsx_f64f4ac2._.js.map