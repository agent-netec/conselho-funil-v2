module.exports=[317953,a=>{"use strict";let b=(0,a.i(47916).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],317953)},791026,a=>{"use strict";let b=(0,a.i(47916).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],791026)},226053,a=>{"use strict";var b=a.i(589810);function c(){let{selectedBrand:a}=(0,b.useBrandStore)();return a}a.s(["useActiveBrand",()=>c])},174192,a=>{"use strict";let b=(0,a.i(47916).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);a.s(["Copy",()=>b],174192)},468772,a=>{"use strict";let b=(0,a.i(47916).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],468772)},733532,a=>{"use strict";let b=(0,a.i(47916).default)("linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);a.s(["Linkedin",()=>b],733532)},285744,a=>{"use strict";let b=(0,a.i(47916).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],285744)},804655,a=>{"use strict";let b=(0,a.i(47916).default)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);a.s(["Layers",()=>b],804655)},339491,a=>{"use strict";let b=(0,a.i(47916).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],339491)},87226,a=>{"use strict";a.i(30553);var b=a.i(350033),c=a.i(860342);a.i(173965);let d=(0,b.getStorage)(c.default);async function e(a,c,e,f){let g=`brand-assets/${e}/${c}/${Date.now()}_${f}`,h=(0,b.ref)(d,g);try{let d=a.split("&")[0].split("?")[0],g=await fetch(d),i=await g.blob();return await (0,b.uploadBytesResumable)(h,i,{contentType:i.type,customMetadata:{userId:e,brandId:c,originalName:f,uploadedAt:new Date().toISOString()}}),await (0,b.getDownloadURL)(h)}catch(a){throw console.error("Erro ao processar binário da imagem para upload:",a),Error("Falha na conversão binária da imagem gerada.")}}async function f(a,c,e){let f=Date.now(),g=a.name.split(".").pop(),h=`logo_${f}.${g}`,i=`brands/${e}/${c}/logos/${h}`,j=(0,b.ref)(d,i),k=(0,b.uploadBytesResumable)(j,a,{contentType:a.type});return new Promise((a,c)=>{k.on("state_changed",null,a=>c(a),async()=>{try{let c=await (0,b.getDownloadURL)(k.snapshot.ref);a(c)}catch(a){c(a)}})})}async function g(a,c,e,f){let g=Date.now(),h=a.name.replace(/[^a-zA-Z0-9.-]/g,"_"),i=`${g}_${h}`,j=`brand-assets/${e}/${c}/${i}`,k=(0,b.ref)(d,j),l={contentType:a.type,customMetadata:{userId:e,brandId:c,originalName:a.name,uploadedAt:new Date().toISOString()}},m=(0,b.uploadBytesResumable)(k,a,l);return new Promise((a,c)=>{m.on("state_changed",a=>{let b=a.bytesTransferred/a.totalBytes*100;f?.(Math.round(b))},a=>{c(a)},async()=>{try{let c=await (0,b.getDownloadURL)(m.snapshot.ref);a({url:c,metadata:m.snapshot.metadata})}catch(a){c(a)}})})}async function h(a){let c=(0,b.ref)(d,a);await (0,b.deleteObject)(c)}function i(a){let b=[".pdf",".doc",".docx",".txt",".md",".png",".jpg",".jpeg",".webp",".svg"];if(!["application/pdf","application/x-pdf","application/vnd.pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/markdown","image/png","image/jpeg","image/webp","image/svg+xml"].includes(a.type)){let c="."+a.name.split(".").pop()?.toLowerCase();if(!b.includes(c))return{valid:!1,error:`Formato n\xe3o suportado. Use: ${b.join(", ")}`}}return a.type.startsWith("image/"),a.size>0xa00000?{valid:!1,error:`Arquivo muito grande. M\xe1ximo: 10MB`}:0===a.size?{valid:!1,error:"O arquivo parece estar vazio ou corrompido."}:{valid:!0}}a.s(["deleteBrandAssetFromStorage",()=>h,"uploadBase64Image",()=>e,"uploadBrandAsset",()=>g,"uploadLogo",()=>f,"validateBrandAssetFile",()=>i])},70076,a=>{"use strict";a.i(543317);var b=a.i(134034),c=a.i(860342),d=a.i(87226);async function e(a,d,e,f){try{let g=(0,b.collection)(c.db,"brands",a,"audit_logs");await (0,b.addDoc)(g,{action:d,details:e,userId:f,createdAt:b.Timestamp.now()})}catch(a){console.error("Failed to log audit:",a)}}async function f(a){return(await (0,b.addDoc)((0,b.collection)(c.db,"brand_assets"),{...a,isApprovedForAI:a.isApprovedForAI??!1})).id}async function g(a){let d=(0,b.query)((0,b.collection)(c.db,"brand_assets"),(0,b.where)("brandId","==",a),(0,b.orderBy)("createdAt","desc"));return(await (0,b.getDocs)(d)).docs.map(a=>({id:a.id,...a.data()}))}async function h(a,d,f){let g=(0,b.doc)(c.db,"brand_assets",a),h=await (0,b.getDoc)(g);if(!h.exists())throw Error("Asset não encontrado");let i=h.data();await (0,b.updateDoc)(g,{isApprovedForAI:d}),await e(i.brandId,d?"APPROVE_ASSET_AI":"REVOKE_ASSET_AI",{assetId:a,assetName:i.name},f);let j=(0,b.collection)(c.db,"brand_assets",a,"chunks"),k=await (0,b.getDocs)(j);if(!k.empty){let a=(0,b.writeBatch)(c.db);k.docs.forEach(b=>{a.update(b.ref,{"metadata.isApprovedForAI":d})}),await a.commit()}}async function i(a,e){try{await (0,d.deleteBrandAssetFromStorage)(e)}catch(a){console.error("Erro ao deletar do Storage:",a)}let f=(0,b.doc)(c.db,"brand_assets",a);await (0,b.deleteDoc)(f)}a.s(["createAsset",()=>f,"deleteAsset",()=>i,"getBrandAssets",()=>g,"toggleAssetApproval",()=>h],70076)},473827,a=>{"use strict";let b=(0,a.i(47916).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["ChevronUp",()=>b],473827)},513304,a=>{"use strict";let b=(0,a.i(47916).default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);a.s(["Type",()=>b],513304)},599903,a=>{"use strict";let b=(0,a.i(47916).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],599903)},911280,a=>{"use strict";var b=a.i(194327),c=a.i(582583),d=a.i(126236),e=a.i(539514);a.i(543317);var f=a.i(134034),g=a.i(860342),h=a.i(59910),i=a.i(459966),j=a.i(248842),k=a.i(468772),l=a.i(317953),m=a.i(822399),n=a.i(463963),o=a.i(804655),p=a.i(599903),q=a.i(168565),r=a.i(26e3),s=a.i(880925),t=a.i(300180),u=a.i(810045),v=a.i(759837),w=a.i(169405),x=a.i(541284);function y(){let a=(0,d.useParams)(),y=(0,d.useRouter)(),z=(0,d.useSearchParams)(),{user:A}=(0,v.useAuthStore)(),B=a.id,C=z.get("campaignId"),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(!0),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)([]);(0,c.useEffect)(()=>{!async function(){if(B)try{let a=await (0,f.getDoc)((0,f.doc)(g.db,"funnels",B));a.exists()&&E({id:a.id,...a.data()});let b=C||B,c=await (0,f.getDoc)((0,f.doc)(g.db,"campaigns",b));if(c.exists()){let a=c.data();G(a),a.design?.visualPrompts&&M(a.design.visualPrompts.map(b=>({...b,brandContext:a.funnel?.mainGoal})))}}catch(a){console.error("Error loading data:",a)}finally{I(!1)}}()},[B]);let N=async()=>{if(!D||!F?.copywriting)return void w.notify.error("Erro","Copywriting pendente.");K(!0);try{let a=await fetch("/api/design/plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({funnelId:B,userId:A?.uid,context:{objective:D.context.objective,copy:F.copywriting.mainScript,hooks:F.social?.hooks||[]}})}),b=await a.json();b.success?(M(b.prompts),w.notify.success("Estratégia visual gerada!")):w.notify.error("Erro",b.error)}catch(a){w.notify.error("Erro","Falha ao convocar Conselho de Design")}finally{K(!1)}},O=async()=>{if(B&&0!==L.length){I(!0);try{let a=C||B;await (0,h.updateCampaignManifesto)(a,{design:{visualStyle:"Modern Premium",preferredColors:["#10b981","#000000"],visualPrompts:L,aspectRatios:["1:1","9:16"]}}),w.notify.success("Diretriz Visual Aprovada!"),y.push(`/campaigns/${a}`)}catch(a){w.notify.error("Erro","Falha ao salvar estratégia visual")}finally{I(!1)}}};return H?(0,b.jsxs)("div",{className:"flex min-h-screen flex-col bg-black",children:[(0,b.jsx)(i.Header,{title:"Conselho de Design"}),(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin text-purple-500"})})]}):(0,b.jsxs)("div",{className:"flex min-h-screen flex-col bg-black",children:[(0,b.jsx)(i.Header,{title:"Design Intelligence",showBack:!0}),(0,b.jsxs)("div",{className:"flex-1 p-8 max-w-5xl mx-auto w-full",children:[(0,b.jsxs)(e.default,{href:`/campaigns/${C||B}`,className:"inline-flex items-center gap-2 text-zinc-400 hover:text-white mb-6 transition-colors",children:[(0,b.jsx)(k.ArrowLeft,{className:"h-4 w-4"}),"Voltar ao Comando"]}),(0,b.jsxs)("div",{className:"mb-12",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-2xl bg-purple-500/10 text-purple-500",children:(0,b.jsx)(n.Palette,{className:"h-8 w-8"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"Conselho de Design"}),(0,b.jsx)("p",{className:"text-zinc-500",children:"Framework C.H.A.P.E.U: Contraste, Hierarquia, Antropomorfismo, Prova, Emoção, Urgência."})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-3 mb-8",children:[(0,b.jsxs)("div",{className:"card-premium p-4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-emerald-500/10 text-emerald-400",children:(0,b.jsx)(q.Target,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Base Estratégica"}),(0,b.jsx)("p",{className:"text-sm text-zinc-200 font-medium truncate",children:"Copy & Hooks Aprovados"})]})]}),(0,b.jsxs)("div",{className:"card-premium p-4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-400",children:(0,b.jsx)(o.Layers,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Framework"}),(0,b.jsx)("p",{className:"text-sm text-zinc-200 font-medium",children:"C.H.A.P.E.U v2.0"})]})]}),(0,b.jsxs)("div",{className:"card-premium p-4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-amber-500/10 text-amber-400",children:(0,b.jsx)(p.Shield,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Segurança"}),(0,b.jsx)("p",{className:"text-sm text-zinc-200 font-medium",children:"Safe Zones (Meta/LI)"})]})]})]}),0===L.length?(0,b.jsxs)("div",{className:"card-premium p-12 text-center",children:[(0,b.jsx)(m.Sparkles,{className:"h-12 w-12 text-zinc-700 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Pronto para criar o impacto visual?"}),(0,b.jsxs)(j.Button,{onClick:N,disabled:J,className:"bg-purple-600 hover:bg-purple-500 h-12 px-8 font-bold",children:[J?(0,b.jsx)(l.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}):(0,b.jsx)(n.Palette,{className:"mr-2 h-5 w-5"}),"Planejar Ativos Visuais"]})]}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,b.jsx)(s.Zap,{className:"h-5 w-5 text-purple-400"}),"Criativos NanoBanana"]}),(0,b.jsxs)(j.Button,{variant:"ghost",onClick:N,disabled:J,className:"text-zinc-500 hover:text-white",children:[(0,b.jsx)(t.RefreshCw,{className:(0,u.cn)("h-4 w-4 mr-2",J&&"animate-spin")}),"Recriar Estratégia"]})]}),(0,b.jsx)("div",{className:"grid gap-6 md:grid-cols-2",children:L.map((a,c)=>(0,b.jsx)(x.DesignGenerationCard,{promptData:a,conversationId:B},c))}),(0,b.jsx)("div",{className:"pt-8 border-t border-white/[0.05] flex justify-end",children:(0,b.jsxs)(j.Button,{onClick:O,className:"bg-purple-600 hover:bg-purple-500 h-12 px-12 text-lg font-bold shadow-[0_0_30px_rgba(168,85,247,0.3)]",children:["Concluir Etapa Visual",(0,b.jsx)(r.ChevronRight,{className:"ml-2 h-5 w-5"})]})})]})]})]})]})}a.s(["default",()=>y])},942516,a=>{a.v(b=>Promise.all(["server/chunks/ssr/[root-of-the-server]__a13a3d25._.js","server/chunks/ssr/5c86f_@pinecone-database_pinecone_dist_f250a0d0._.js"].map(b=>a.l(b))).then(()=>b(86970)))}];

//# sourceMappingURL=OneDrive_Desktop_CURSOR_CONSELHO%20DE%20FUNIL_f2495b76._.js.map