module.exports=[560897,a=>{"use strict";var b=a.i(194327),c=a.i(582583),d=a.i(289036),e=a.i(459966),f=a.i(226053),g=a.i(168565),h=a.i(653299),i=a.i(460228),j=a.i(270509);let k=(0,a.i(47916).default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);function l({summary:a,isLoading:c}){let e=[{title:"Total de Ativos",value:c?"—":a?.total||0,subtitle:"Vetorizados no Pinecone",icon:g.Target,color:"text-emerald-400",bg:"bg-emerald-500/10",delay:.1},{title:"Análises Visuais",value:c?"—":a?.visualCount||0,subtitle:"Criativos analisados",icon:h.ImageIcon,color:"text-purple-400",bg:"bg-purple-500/10",delay:.15},{title:"Base de Conhecimento",value:c?"—":a?.knowledgeCount||0,subtitle:"Documentos e brand books",icon:i.FileText,color:"text-blue-400",bg:"bg-blue-500/10",delay:.2},{title:"Score Visual Médio",value:c?"—":a?.avgVisualScore||0,subtitle:"Média das heurísticas",icon:k,color:"text-amber-400",bg:"bg-amber-500/10",trend:{value:"+2.4%",positive:!0},delay:.25}];return(0,b.jsx)("div",{className:"grid gap-5 md:grid-cols-2 lg:grid-cols-4 mb-8",children:e.map((a,c)=>(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:a.delay},className:"card-premium card-hover p-5",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsx)("div",{className:`flex h-10 w-10 items-center justify-center rounded-xl ${a.bg}`,children:(0,b.jsx)(a.icon,{className:`h-5 w-5 ${a.color}`})}),a.trend&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-[10px] font-bold text-emerald-400 uppercase tracking-tighter",children:[(0,b.jsx)(j.TrendingUp,{className:"h-3 w-3"}),a.trend.value]})]}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("p",{className:"stat-value",children:a.value}),(0,b.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:a.subtitle})]}),(0,b.jsx)("p",{className:"mt-3 text-[10px] text-zinc-600 font-bold uppercase tracking-widest",children:a.title})]},c))})}var m=a.i(791026),n=a.i(829277),o=a.i(698565),p=a.i(810045),q=a.i(428485),r=a.i(761925),s=a.i(880925),t=a.i(688514),u=a.i(807291),v=a.i(126236);function w({asset:a,isOpen:c,onOpenChange:e}){let f=(0,v.useRouter)();if(!a)return null;let h=[{label:"Contraste",value:a.metadata?.contrast||"85%",icon:t.Layout,color:"text-purple-400"},{label:"Legibilidade",value:a.metadata?.readability||"92%",icon:n.Eye,color:"text-blue-400"},{label:"Hook Strength",value:a.metadata?.hookStrength||"78%",icon:s.Zap,color:"text-amber-400"},{label:"Congruência",value:a.metadata?.congruence||"High",icon:g.Target,color:"text-emerald-400"}];return(0,b.jsx)(q.Dialog,{open:c,onOpenChange:e,children:(0,b.jsx)(q.DialogContent,{className:"max-w-3xl bg-zinc-950/90 backdrop-blur-2xl border-white/[0.08] text-white p-0 overflow-hidden shadow-2xl",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"h-32 w-full bg-gradient-to-br from-purple-500/20 via-emerald-500/10 to-zinc-950 border-b border-white/[0.05]"}),(0,b.jsxs)("div",{className:"px-6 pb-6 -mt-12 relative z-10",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,b.jsx)("div",{className:"w-full md:w-1/2",children:(0,b.jsxs)(d.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"aspect-square rounded-2xl overflow-hidden bg-zinc-900 border border-white/[0.1] shadow-2xl flex items-center justify-center group relative",children:[a.imageUri?(0,b.jsx)("img",{src:a.imageUri,alt:a.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"}):(0,b.jsxs)("div",{className:"flex flex-col items-center gap-3 text-zinc-500",children:[(0,b.jsx)(i.FileText,{className:"h-12 w-12 opacity-20"}),(0,b.jsx)("span",{className:"text-xs font-mono uppercase tracking-widest",children:"Documento de Texto"})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-4",children:(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-white/80",children:"Preview em Alta Fidelidade"})})]})}),(0,b.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("span",{className:(0,p.cn)("px-2 py-0.5 rounded-full text-[9px] font-black uppercase tracking-widest border","visual"===a.namespace?"bg-purple-500/10 border-purple-500/20 text-purple-400":"bg-blue-500/10 border-blue-500/20 text-blue-400"),children:a.namespace}),(0,b.jsx)("span",{className:"text-[10px] text-zinc-500 font-mono uppercase tracking-widest",children:new Date(a.createdAt).toLocaleDateString("pt-BR")})]}),(0,b.jsx)("h2",{className:"text-2xl font-black tracking-tighter text-white leading-tight",children:a.name||a.assetType}),(0,b.jsxs)("p",{className:"text-sm text-zinc-400 mt-1 font-medium",children:[a.assetType," • Score de Performance: ",(0,b.jsx)("span",{className:"text-emerald-400",children:a.score})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-3",children:h.map((a,c)=>(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*c},className:"p-3 rounded-xl bg-white/[0.02] border border-white/[0.05] hover:bg-white/[0.04] transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(a.icon,{className:(0,p.cn)("h-3.5 w-3.5",a.color)}),(0,b.jsx)("span",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:a.label})]}),(0,b.jsx)("span",{className:"text-sm font-bold text-white",children:a.value})]},a.label))}),(0,b.jsxs)("div",{className:"p-4 rounded-xl bg-emerald-500/[0.03] border border-emerald-500/10",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("span",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest",children:"Métricas de Campanha"}),(0,b.jsx)(j.TrendingUp,{className:"h-4 w-4 text-emerald-500"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[9px] text-zinc-500 uppercase font-bold",children:"CTR"}),(0,b.jsxs)("p",{className:"text-lg font-black text-white",children:[a.metrics.ctr,"%"]})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-[9px] text-zinc-500 uppercase font-bold",children:"Conversão"}),(0,b.jsxs)("p",{className:"text-lg font-black text-white",children:[a.metrics.conversion,"%"]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-[9px] text-zinc-500 uppercase font-bold",children:"ROI"}),(0,b.jsxs)("p",{className:"text-lg font-black text-white",children:[a.metrics.roi,"x"]})]})]})]}),(0,b.jsxs)("button",{onClick:()=>{let b=encodeURIComponent(`Gostaria de um conselho sobre o ativo: ${a.name||a.assetType}. Ele tem um score de ${a.score}.`);f.push(`/chat?mode=general&initialMessage=${b}`),e(!1)},className:"w-full group relative flex items-center justify-center gap-3 h-12 rounded-xl bg-white text-black font-black text-xs uppercase tracking-widest overflow-hidden transition-all hover:scale-[1.02] active:scale-[0.98]",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-400 to-purple-500 opacity-0 group-hover:opacity-10 transition-opacity"}),(0,b.jsx)(r.MessageSquare,{className:"h-4 w-4"}),"Consultar Conselho sobre este Ativo",(0,b.jsx)(u.ArrowUpRight,{className:"h-3.5 w-3.5 transition-transform group-hover:translate-x-0.5 group-hover:-translate-y-0.5"})]})]})]}),a.strategicAdvice&&(0,b.jsxs)("div",{className:"mt-8 p-4 rounded-2xl bg-zinc-900/50 border border-white/[0.05] relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:(0,b.jsx)(s.Zap,{className:"h-12 w-12 text-amber-500"})}),(0,b.jsx)("h3",{className:"text-[10px] font-black text-amber-500 uppercase tracking-[0.2em] mb-2",children:"Conselho Estratégico"}),(0,b.jsxs)("p",{className:"text-sm text-zinc-300 leading-relaxed italic",children:['"',a.strategicAdvice,'"']})]})]})]})})})}function x({assets:a,isLoading:e,viewMode:f="list"}){let[g,k]=(0,c.useState)(null),[l,q]=(0,c.useState)(!1),r=a=>{k(a),q(!0)};return e?(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"h-16 w-full animate-pulse rounded-lg bg-zinc-800/50"},a))}):0===a.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-zinc-800/50",children:(0,b.jsx)(o.AlertCircle,{className:"h-6 w-6 text-zinc-500"})}),(0,b.jsx)("h3",{className:"mt-4 text-sm font-medium text-white",children:"Nenhum ativo encontrado"}),(0,b.jsx)("p",{className:"mt-1 text-xs text-zinc-500 max-w-[200px]",children:"Analise seus primeiros criativos ou suba brand books para ver as métricas."})]}):(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)("div",{className:(0,p.cn)("grid grid-cols-1 gap-3 md:hidden","grid"===f&&"hidden"),children:a.map((a,c)=>(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*c},className:"p-4 rounded-xl bg-zinc-900/50 border border-white/[0.05]",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:(0,p.cn)("flex h-10 w-10 items-center justify-center rounded-lg border","visual"===a.namespace?"bg-purple-500/10 border-purple-500/20":"bg-blue-500/10 border-blue-500/20"),children:"visual"===a.namespace?(0,b.jsx)(h.ImageIcon,{className:"h-5 w-5 text-purple-400"}):(0,b.jsx)(i.FileText,{className:"h-5 w-5 text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-bold text-white line-clamp-1",children:a.name||a.assetType}),(0,b.jsxs)("p",{className:"text-[10px] text-zinc-500 uppercase",children:[a.assetType," • ",new Date(a.createdAt).toLocaleDateString("pt-BR")]})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:(0,b.jsx)("span",{className:(0,p.cn)("text-xs font-bold px-2 py-0.5 rounded-full",a.score>=80?"text-emerald-400 bg-emerald-500/10":a.score>=50?"text-amber-400 bg-amber-500/10":"text-red-400 bg-red-500/10"),children:a.score})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-3 border-t border-white/[0.05]",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] text-zinc-500 uppercase tracking-widest mb-1",children:"CTR"}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(j.TrendingUp,{className:"h-3 w-3 text-emerald-400"}),(0,b.jsxs)("span",{className:"text-sm font-semibold text-zinc-200",children:[a.metrics.ctr,"%"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] text-zinc-500 uppercase tracking-widest mb-1",children:"Conversão"}),(0,b.jsxs)("span",{className:"text-sm font-semibold text-zinc-200",children:[a.metrics.conversion,"%"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 pt-3 border-t border-white/[0.05]",children:[(0,b.jsxs)("button",{onClick:()=>r(a),className:"flex-1 flex items-center justify-center gap-2 h-9 rounded-lg bg-zinc-800 text-xs font-medium text-zinc-300 transition-colors hover:bg-zinc-700",children:[(0,b.jsx)(n.Eye,{className:"h-3.5 w-3.5"}),"Visualizar"]}),a.imageUri&&(0,b.jsx)("a",{href:a.imageUri,target:"_blank",rel:"noopener noreferrer",className:"flex h-9 w-9 items-center justify-center rounded-lg bg-zinc-800 text-zinc-300",children:(0,b.jsx)(m.ExternalLink,{className:"h-3.5 w-3.5"})})]})]},a.id))}),"grid"===f&&(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-4",children:a.map((a,c)=>(0,b.jsxs)(d.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.03*c},className:"group relative flex flex-col rounded-2xl border border-white/[0.05] bg-zinc-900/40 hover:bg-zinc-900/60 hover:border-white/[0.1] transition-all overflow-hidden shadow-sm",children:[(0,b.jsxs)("div",{className:"p-4 flex items-start justify-between",children:[(0,b.jsx)("div",{className:(0,p.cn)("flex h-10 w-10 items-center justify-center rounded-xl border shadow-inner","visual"===a.namespace?"bg-purple-500/10 border-purple-500/20":"bg-blue-500/10 border-blue-500/20"),children:"visual"===a.namespace?(0,b.jsx)(h.ImageIcon,{className:"h-5 w-5 text-purple-400"}):(0,b.jsx)(i.FileText,{className:"h-5 w-5 text-blue-400"})}),(0,b.jsx)("div",{className:"flex flex-col items-end",children:(0,b.jsxs)("span",{className:(0,p.cn)("text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wider",a.score>=80?"text-emerald-400 bg-emerald-500/10":a.score>=50?"text-amber-400 bg-amber-500/10":"text-red-400 bg-red-500/10"),children:["Score ",a.score]})})]}),(0,b.jsxs)("div",{className:"px-4 pb-4 flex-1",children:[(0,b.jsx)("h4",{className:"text-sm font-bold text-white line-clamp-2 min-h-[40px] leading-tight mb-1 group-hover:text-emerald-400 transition-colors",children:a.name||a.assetType}),(0,b.jsxs)("p",{className:"text-[10px] text-zinc-500 uppercase tracking-tight",children:[a.assetType," • ",new Date(a.createdAt).toLocaleDateString("pt-BR")]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 border-t border-white/[0.05] bg-white/[0.01]",children:[(0,b.jsxs)("div",{className:"p-3 border-r border-white/[0.05] text-center",children:[(0,b.jsx)("p",{className:"text-[9px] text-zinc-500 uppercase font-bold mb-1",children:"CTR"}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,b.jsx)(j.TrendingUp,{className:"h-3 w-3 text-emerald-400"}),(0,b.jsxs)("span",{className:"text-xs font-bold text-zinc-200",children:[a.metrics.ctr,"%"]})]})]}),(0,b.jsxs)("div",{className:"p-3 text-center",children:[(0,b.jsx)("p",{className:"text-[9px] text-zinc-500 uppercase font-bold mb-1",children:"Conv."}),(0,b.jsxs)("span",{className:"text-xs font-bold text-zinc-200",children:[a.metrics.conversion,"%"]})]})]}),(0,b.jsxs)("div",{className:"p-2 bg-zinc-950/50 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsxs)("button",{onClick:()=>r(a),className:"flex-1 h-8 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-[10px] font-bold text-zinc-300 flex items-center justify-center gap-1.5 transition-all",children:[(0,b.jsx)(n.Eye,{className:"h-3.5 w-3.5"})," Detalhes"]}),a.imageUri&&(0,b.jsx)("a",{href:a.imageUri,target:"_blank",rel:"noopener noreferrer",className:"h-8 w-8 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-zinc-300 flex items-center justify-center transition-all",children:(0,b.jsx)(m.ExternalLink,{className:"h-3.5 w-3.5"})})]})]},a.id))}),"list"===f&&(0,b.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left text-sm text-zinc-400",children:[(0,b.jsx)("thead",{className:"text-[10px] uppercase tracking-widest text-zinc-500 border-b border-white/[0.05]",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Ativo"}),(0,b.jsx)("th",{className:"px-4 py-3 font-semibold text-center",children:"Tipo"}),(0,b.jsx)("th",{className:"px-4 py-3 font-semibold text-center",children:"Score"}),(0,b.jsx)("th",{className:"px-4 py-3 font-semibold text-center",children:"CTR"}),(0,b.jsx)("th",{className:"px-4 py-3 font-semibold text-center",children:"Conversão"}),(0,b.jsx)("th",{className:"px-4 py-3 font-semibold text-right",children:"Ação"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-white/[0.02]",children:a.map((a,c)=>(0,b.jsxs)(d.motion.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*c},className:"group hover:bg-white/[0.02] transition-colors",children:[(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:(0,p.cn)("flex h-8 w-8 items-center justify-center rounded-lg border","visual"===a.namespace?"bg-purple-500/10 border-purple-500/20":"bg-blue-500/10 border-blue-500/20"),children:"visual"===a.namespace?(0,b.jsx)(h.ImageIcon,{className:"h-4 w-4 text-purple-400"}):(0,b.jsx)(i.FileText,{className:"h-4 w-4 text-blue-400"})}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium text-white line-clamp-1 max-w-[200px]",children:a.name||a.assetType}),(0,b.jsx)("span",{className:"text-[10px] text-zinc-500 uppercase",children:new Date(a.createdAt).toLocaleDateString("pt-BR")})]})]})}),(0,b.jsx)("td",{className:"px-4 py-4 text-center",children:(0,b.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold uppercase bg-zinc-800 text-zinc-400 border border-white/[0.05]",children:a.assetType})}),(0,b.jsx)("td",{className:"px-4 py-4 text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)("div",{className:"h-1.5 w-12 rounded-full bg-zinc-800 overflow-hidden",children:(0,b.jsx)("div",{className:(0,p.cn)("h-full rounded-full",a.score>=80?"bg-emerald-500":a.score>=50?"bg-amber-500":"bg-red-500"),style:{width:`${a.score}%`}})}),(0,b.jsx)("span",{className:"text-xs font-bold text-white",children:a.score})]})}),(0,b.jsx)("td",{className:"px-4 py-4 text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,b.jsx)(j.TrendingUp,{className:"h-3 w-3 text-emerald-400"}),(0,b.jsxs)("span",{className:"font-medium text-zinc-300",children:[a.metrics.ctr,"%"]})]})}),(0,b.jsxs)("td",{className:"px-4 py-4 text-center font-medium text-zinc-300",children:[a.metrics.conversion,"%"]}),(0,b.jsx)("td",{className:"px-4 py-4 text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>r(a),className:"p-1.5 rounded-md hover:bg-zinc-800 text-zinc-500 hover:text-white transition-colors",children:(0,b.jsx)(n.Eye,{className:"h-4 w-4"})}),a.imageUri&&(0,b.jsx)("a",{href:a.imageUri,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-md hover:bg-zinc-800 text-zinc-500 hover:text-white transition-colors",children:(0,b.jsx)(m.ExternalLink,{className:"h-4 w-4"})})]})})]},a.id))})]})}),(0,b.jsx)(w,{asset:g,isOpen:l,onOpenChange:q})]})}var y=a.i(300180),z=a.i(742267),A=a.i(979230),B=a.i(998882),C=a.i(864679),D=a.i(645454),E=a.i(317953),F=a.i(529238),G=a.i(453764),H=a.i(480967),I=a.i(759837),J=a.i(87226),K=a.i(70076);a.i(543317);var L=a.i(134034);function M(){let{user:a}=(0,I.useAuthStore)(),{assets:g,summary:h,isLoading:i,refresh:j,activeBrand:k}=function(){let a=(0,f.useActiveBrand)(),[b,d]=(0,c.useState)([]),[e,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null),l=(0,c.useCallback)(async()=>{if(a?.id){i(!0),k(null);try{let b=await fetch(`/api/assets/metrics?brandId=${a.id}`);if(!b.ok)throw Error("Falha ao carregar métricas do dashboard");let c=await b.json();d(c.assets||[]),g(c.summary||null)}catch(a){console.error("[useAssetMetrics] Error:",a),k(a.message||"Erro desconhecido ao carregar métricas")}finally{i(!1)}}},[a?.id]);return(0,c.useEffect)(()=>{l()},[l]),{assets:b,summary:e,isLoading:h,error:j,refresh:l,activeBrand:a}}(),[m,n]=(0,c.useState)("all"),[o,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[w,M]=(0,c.useState)("list"),N=g.filter(a=>{let b="all"===m||a.namespace===m,c=""===o||(a.name||a.assetType).toLowerCase().includes(o.toLowerCase())||(a.strategicAdvice||"").toLowerCase().includes(o.toLowerCase());return b&&c}),O=async a=>{try{let b=await fetch("/api/ingest/process-worker",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assetId:a,namespace:`brand-${k?.id}`})});if(!b.ok){let a=await b.json();throw Error(a.error||a.message||"Erro no processamento remoto.")}await j(),G.toast.success("Arquivo vetorizado com sucesso!")}catch(a){console.error("Erro ao processar asset:",a),G.toast.error("O upload foi feito, mas o processamento falhou.")}},P=async b=>{if(!a||!k)return;let c=G.toast.loading(`Fazendo upload de ${b.name}...`);v(!0);try{let{url:d}=await (0,J.uploadBrandAsset)(b,k.id,a.uid),e=await (0,K.createAsset)({brandId:k.id,userId:a.uid,name:b.name,originalName:b.name,type:b.type.includes("pdf")?"guideline":b.type.startsWith("image/")?"image":"other",mimeType:b.type,size:b.size,url:d,status:"uploaded",isApprovedForAI:!0,createdAt:L.Timestamp.now()});G.toast.loading("Iniciando extração e vetorização...",{id:c}),await O(e),t(!1),G.toast.dismiss(c)}catch(a){console.error("Erro no upload:",a),G.toast.error("Falha ao subir arquivo.",{id:c})}finally{v(!1)}},Q=async b=>{if(!a||!k)return;let c=G.toast.loading(`Adicionando URL estrat\xe9gica...`);v(!0);try{let d=await (0,K.createAsset)({brandId:k.id,userId:a.uid,name:b.replace(/^https?:\/\//,"").split("/")[0],originalName:b,type:"url",mimeType:"text/html",size:0,url:b,sourceUrl:b,status:"uploaded",isApprovedForAI:!0,createdAt:L.Timestamp.now()});G.toast.loading("Fazendo scraping e vetorização...",{id:c}),await O(d),t(!1),G.toast.dismiss(c)}catch(a){console.error("Erro ao adicionar URL:",a),G.toast.error("Falha ao adicionar URL.",{id:c})}finally{v(!1)}};return(0,b.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,b.jsx)(e.Header,{title:"Ativos & Performance"}),(0,b.jsxs)("div",{className:"flex-1 p-8",children:[(0,b.jsxs)("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[(0,b.jsx)("h2",{className:"text-2xl font-bold tracking-tight text-white",children:"Inteligência de Ativos"}),(0,b.jsx)("p",{className:"text-sm text-zinc-400",children:k?`Monitorando performance da marca ${k.name}`:"Selecione uma marca para ver as métricas"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(q.Dialog,{open:s,onOpenChange:t,children:[(0,b.jsx)(q.DialogTrigger,{asChild:!0,children:(0,b.jsxs)("button",{disabled:!k,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-emerald-500 text-sm font-bold text-black hover:bg-emerald-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(D.Plus,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Adicionar Ativo"})]})}),(0,b.jsxs)(q.DialogContent,{className:"bg-zinc-950 border-white/[0.05] sm:max-w-[500px]",children:[(0,b.jsx)(q.DialogHeader,{children:(0,b.jsxs)(q.DialogTitle,{className:"text-white flex items-center gap-2",children:[(0,b.jsx)(F.ShieldCheck,{className:"h-5 w-5 text-emerald-500"}),"Alimentar Inteligência"]})}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)(H.AssetUploader,{brandId:k?.id||"",onUploadFile:P,onAddUrl:Q}),u&&(0,b.jsxs)("div",{className:"mt-4 p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center gap-3",children:[(0,b.jsx)(E.Loader2,{className:"h-5 w-5 text-emerald-500 animate-spin"}),(0,b.jsx)("p",{className:"text-sm text-emerald-200",children:"Processando conhecimento..."})]})]})]})]}),(0,b.jsx)("div",{className:"h-8 w-px bg-white/[0.05] mx-1"}),(0,b.jsxs)("button",{onClick:async()=>{let a=G.toast.loading("Sincronizando ativos...");await j(),G.toast.success("Ativos atualizados",{id:a})},disabled:i,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-zinc-800 text-sm font-medium text-zinc-300 hover:text-white hover:bg-zinc-700 transition-all border border-white/[0.05]",children:[(0,b.jsx)(y.RefreshCw,{className:(0,p.cn)("h-4 w-4",i&&"animate-spin")}),(0,b.jsx)("span",{children:"Sincronizar"})]}),(0,b.jsx)("button",{onClick:()=>{if(0===N.length)return void G.toast.error("Nenhum ativo para exportar");let a=new Blob([["Nome,Tipo,Score,CTR,Conversão,Namespace,Data",...N.map(a=>[a.name||a.assetType,a.assetType,a.score,a.metrics.ctr,a.metrics.conversion,a.namespace,new Date(a.createdAt).toLocaleDateString("pt-BR")]).map(a=>a.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a"),c=URL.createObjectURL(a);b.setAttribute("href",c),b.setAttribute("download",`ativos-performance-${k?.name||"geral"}.csv`),b.style.visibility="hidden",document.body.appendChild(b),b.click(),document.body.removeChild(b),G.toast.success("Exportação concluída")},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-zinc-800 text-sm font-medium text-zinc-300 hover:text-white hover:bg-zinc-700 transition-all border border-white/[0.05]",children:(0,b.jsx)("span",{children:"Exportar"})})]})]}),(0,b.jsx)(l,{summary:h,isLoading:i}),(0,b.jsxs)("div",{className:"mb-6 flex flex-col lg:flex-row items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 p-1 rounded-xl bg-zinc-900/80 border border-white/[0.04]",children:[(0,b.jsx)("button",{onClick:()=>n("all"),className:(0,p.cn)("px-4 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all","all"===m?"bg-zinc-800 text-white shadow-lg":"text-zinc-500 hover:text-zinc-300"),children:"Todos"}),(0,b.jsx)("button",{onClick:()=>n("visual"),className:(0,p.cn)("px-4 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all","visual"===m?"bg-purple-500/20 text-purple-400":"text-zinc-500 hover:text-zinc-300"),children:"Visual"}),(0,b.jsx)("button",{onClick:()=>n("knowledge"),className:(0,p.cn)("px-4 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all","knowledge"===m?"bg-blue-500/20 text-blue-400":"text-zinc-500 hover:text-zinc-300"),children:"Conhecimento"})]}),(0,b.jsxs)("div",{className:"flex flex-1 items-center gap-3 w-full lg:max-w-md",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(A.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-500"}),(0,b.jsx)("input",{type:"text",placeholder:"Buscar por nome ou heurística...",value:o,onChange:a=>r(a.target.value),className:"w-full h-10 pl-10 pr-4 rounded-xl bg-zinc-900 border border-white/[0.05] text-sm text-white placeholder:text-zinc-600 focus:outline-none focus:ring-1 focus:ring-emerald-500/50"})]}),(0,b.jsx)("button",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-zinc-900 border border-white/[0.05] text-zinc-400 hover:text-white",children:(0,b.jsx)(z.Filter,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"card-premium overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-5 border-b border-white/[0.04] bg-white/[0.01]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:"Ativos Vectorizados"}),(0,b.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-zinc-800 text-[10px] text-zinc-400 font-mono",children:N.length})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>M("list"),className:(0,p.cn)("p-1.5 rounded-md transition-all","list"===w?"bg-zinc-800 text-white":"text-zinc-500 hover:text-white"),children:(0,b.jsx)(C.List,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>M("grid"),className:(0,p.cn)("p-1.5 rounded-md transition-all","grid"===w?"bg-zinc-800 text-white":"text-zinc-500 hover:text-white"),children:(0,b.jsx)(B.LayoutGrid,{className:"h-4 w-4"})})]})]}),(0,b.jsx)("div",{className:"p-2",children:(0,b.jsx)(x,{assets:N,isLoading:i,viewMode:w})})]})]})]})}a.s(["default",()=>M],560897)}];

//# sourceMappingURL=OneDrive_Desktop_CURSOR_CONSELHO%20DE%20FUNIL_app_src_app_assets_page_tsx_d4cdd285._.js.map