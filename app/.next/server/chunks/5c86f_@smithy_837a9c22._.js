module.exports=[287228,e=>{"use strict";e.s(["NODE_REGION_CONFIG_FILE_OPTIONS",0,{preferredFile:"credentials"},"NODE_REGION_CONFIG_OPTIONS",0,{environmentVariableSelector:e=>e.AWS_REGION,configFileSelector:e=>e.region,default:()=>{throw Error("Region is missing")}}])},123529,e=>{"use strict";e.s(["normalizeProvider",0,e=>{if("function"==typeof e)return e;let t=Promise.resolve(e);return()=>t}])},853974,e=>{"use strict";e.s(["getHttpHandlerExtensionConfiguration",0,e=>({setHttpHandler(t){e.httpHandler=t},httpHandler:()=>e.httpHandler,updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs:()=>e.httpHandler.httpHandlerConfigs()}),"resolveHttpHandlerRuntimeConfig",0,e=>({httpHandler:e.httpHandler()})])},55236,607321,871598,71638,971183,317753,337194,939047,252550,e=>{"use strict";var t,r,a=e.i(105671);let s=e=>{let t=(0,a.fromString)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},i=e=>"string"==typeof e?s(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);e.s(["toUint8Array",0,i],55236);let n="X-Amz-Date",o="X-Amz-Signature",l="X-Amz-Security-Token",u="authorization",c=n.toLowerCase(),h="date",A=[u,c,h],E=o.toLowerCase(),g="x-amz-content-sha256",d=l.toLowerCase(),f={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},y=/^proxy-/,R=/^sec-/,p="UNSIGNED-PAYLOAD",H="aws4_request";e.s(["ALGORITHM_IDENTIFIER",0,"AWS4-HMAC-SHA256","ALGORITHM_IDENTIFIER_V4A",0,"AWS4-ECDSA-P256-SHA256","ALGORITHM_QUERY_PARAM",0,"X-Amz-Algorithm","ALWAYS_UNSIGNABLE_HEADERS",0,f,"AMZ_DATE_HEADER",0,c,"AMZ_DATE_QUERY_PARAM",0,n,"AUTH_HEADER",0,u,"CREDENTIAL_QUERY_PARAM",0,"X-Amz-Credential","DATE_HEADER",0,h,"EVENT_ALGORITHM_IDENTIFIER",0,"AWS4-HMAC-SHA256-PAYLOAD","EXPIRES_QUERY_PARAM",0,"X-Amz-Expires","GENERATED_HEADERS",0,A,"HOST_HEADER",0,"host","KEY_TYPE_IDENTIFIER",0,H,"MAX_CACHE_SIZE",0,50,"MAX_PRESIGNED_TTL",0,604800,"PROXY_HEADER_PATTERN",0,y,"REGION_SET_PARAM",0,"X-Amz-Region-Set","SEC_HEADER_PATTERN",0,R,"SHA256_HEADER",0,g,"SIGNATURE_HEADER",0,E,"SIGNATURE_QUERY_PARAM",0,o,"SIGNED_HEADERS_QUERY_PARAM",0,"X-Amz-SignedHeaders","TOKEN_HEADER",0,d,"TOKEN_QUERY_PARAM",0,l,"UNSIGNABLE_PATTERNS",0,[/^proxy-/i,/^sec-/i],"UNSIGNED_PAYLOAD",0,p],607321);var _=e.i(153545);let w={},S=[],m=async(e,t,r,a,s)=>{let i=await I(e,t.secretAccessKey,t.accessKeyId),n=`${r}:${a}:${s}:${(0,_.toHex)(i)}:${t.sessionToken}`;if(n in w)return w[n];for(S.push(n);S.length>50;)delete w[S.shift()];let o=`AWS4${t.secretAccessKey}`;for(let t of[r,a,s,H])o=await I(e,o,t);return w[n]=o},I=(e,t,r)=>{let a=new e(t);return a.update(i(r)),a.digest()};e.s(["clearCredentialCache",0,()=>{S.length=0,Object.keys(w).forEach(e=>{delete w[e]})},"createScope",0,(e,t,r)=>`${e}/${t}/${r}/${H}`,"getSigningKey",0,m],871598),e.s(["getCanonicalHeaders",0,({headers:e},t,r)=>{let a={};for(let s of Object.keys(e).sort()){if(void 0==e[s])continue;let i=s.toLowerCase();(!(i in f||t?.has(i)||y.test(i)||R.test(i))||r&&(!r||r.has(i)))&&(a[i]=e[s].trim().replace(/\s+/g," "))}return a}],71638);var v=e.i(213285);let T=async({headers:e,body:t},r)=>{for(let t of Object.keys(e))if(t.toLowerCase()===g)return e[t];if(void 0==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof t||ArrayBuffer.isView(t)||(0,v.isArrayBuffer)(t)){let e=new r;return e.update(i(t)),(0,_.toHex)(await e.digest())}return p};e.s(["getPayloadHash",0,T],971183);class b{format(e){let t=[];for(let r of Object.keys(e)){let a=s(r);t.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(e[r]))}let r=new Uint8Array(t.reduce((e,t)=>e+t.byteLength,0)),a=0;for(let e of t)r.set(e,a),a+=e.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([+!e.value]);case"byte":return Uint8Array.from([2,e.value]);case"short":let t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":let r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":let a=new Uint8Array(9);return a[0]=5,a.set(e.value.bytes,1),a;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let n=new Uint8Array(i.buffer);return n.set(e.value,3),n;case"string":let o=s(e.value),l=new DataView(new ArrayBuffer(3+o.byteLength));l.setUint8(0,7),l.setUint16(1,o.byteLength,!1);let u=new Uint8Array(l.buffer);return u.set(o,3),u;case"timestamp":let c=new Uint8Array(9);return c[0]=8,c.set(P.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!D.test(e.value))throw Error(`Invalid UUID received: ${e.value}`);let h=new Uint8Array(17);return h[0]=9,h.set((0,_.fromHex)(e.value.replace(/\-/g,"")),1),h}}}(t=r||(r={}))[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid";let D=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class P{bytes;constructor(e){if(this.bytes=e,8!==e.byteLength)throw Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x8000000000000000||e<-0x8000000000000000)throw Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let t=new Uint8Array(8);for(let r=7,a=Math.abs(Math.round(e));r>-1&&a>0;r--,a/=256)t[r]=a;return e<0&&U(t),new P(t)}valueOf(){let e=this.bytes.slice(0),t=128&e[0];return t&&U(e),parseInt((0,_.toHex)(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function U(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}e.s(["HeaderFormatter",()=>b],317753),e.s(["hasHeader",0,(e,t)=>{for(let r of(e=e.toLowerCase(),Object.keys(t)))if(e===r.toLowerCase())return!0;return!1}],337194);var N=e.i(961948);e.s(["moveHeadersToQuery",0,(e,t={})=>{let{headers:r,query:a={}}=N.HttpRequest.clone(e);for(let e of Object.keys(r)){let s=e.toLowerCase();("x-amz-"===s.slice(0,6)&&!t.unhoistableHeaders?.has(s)||t.hoistableHeaders?.has(s))&&(a[e]=r[e],delete r[e])}return{...e,headers:r,query:a}}],939047),e.s(["prepareRequest",0,e=>{for(let t of Object.keys((e=N.HttpRequest.clone(e)).headers))A.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e}],252550)},401051,e=>{"use strict";e.s(["normalizeProvider",0,e=>{if("function"==typeof e)return e;let t=Promise.resolve(e);return()=>t}])},130879,960920,332921,e=>{"use strict";var t=e.i(153545),r=e.i(55236),a=e.i(607321),s=e.i(871598),i=e.i(71638),n=e.i(971183),o=e.i(317753),l=e.i(337194),u=e.i(939047),c=e.i(252550),h=e.i(401051),A=e.i(884855);let E=({query:e={}})=>{let t=[],r={};for(let s of Object.keys(e)){if(s.toLowerCase()===a.SIGNATURE_HEADER)continue;let i=(0,A.escapeUri)(s);t.push(i);let n=e[s];"string"==typeof n?r[i]=`${i}=${(0,A.escapeUri)(n)}`:Array.isArray(n)&&(r[i]=n.slice(0).reduce((e,t)=>e.concat([`${i}=${(0,A.escapeUri)(t)}`]),[]).sort().join("&"))}return t.sort().map(e=>r[e]).filter(e=>e).join("&")};e.s(["getCanonicalQuery",0,E],960920);class g{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:t,region:r,service:a,sha256:s,uriEscapePath:i=!0}){this.service=a,this.sha256=s,this.uriEscapePath=i,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=(0,h.normalizeProvider)(r),this.credentialProvider=(0,h.normalizeProvider)(t)}createCanonicalRequest(e,t,r){let a=Object.keys(t).sort();return`${e.method}
${this.getCanonicalPath(e)}
${E(e)}
${a.map(e=>`${e}:${t[e]}`).join("\n")}

${a.join(";")}
${r}`}async createStringToSign(e,a,s,i){let n=new this.sha256;n.update((0,r.toUint8Array)(s));let o=await n.digest();return`${i}
${e}
${a}
${(0,t.toHex)(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let t=[];for(let r of e.split("/"))r?.length!==0&&"."!==r&&(".."===r?t.pop():t.push(r));let r=`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`;return(0,A.escapeUri)(r).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw Error("Resolved credential object is not valid")}formatDate(e){var t;let r=("number"==typeof(t=e)?new Date(1e3*t):"string"==typeof t?new Date(Number(t)?1e3*Number(t):t):t).toISOString().replace(/\.\d{3}Z$/,"Z").replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}e.s(["SignatureV4Base",()=>g],332921);class d extends g{headerFormatter=new o.HeaderFormatter;constructor({applyChecksum:e,credentials:t,region:r,service:a,sha256:s,uriEscapePath:i=!0}){super({applyChecksum:e,credentials:t,region:r,service:a,sha256:s,uriEscapePath:i})}async presign(e,t={}){let{signingDate:r=new Date,expiresIn:o=3600,unsignableHeaders:l,unhoistableHeaders:h,signableHeaders:A,hoistableHeaders:E,signingRegion:g,signingService:d}=t,f=await this.credentialProvider();this.validateResolvedCredentials(f);let y=g??await this.regionProvider(),{longDate:R,shortDate:p}=this.formatDate(r);if(o>a.MAX_PRESIGNED_TTL)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let H=(0,s.createScope)(p,y,d??this.service),_=(0,u.moveHeadersToQuery)((0,c.prepareRequest)(e),{unhoistableHeaders:h,hoistableHeaders:E});f.sessionToken&&(_.query[a.TOKEN_QUERY_PARAM]=f.sessionToken),_.query[a.ALGORITHM_QUERY_PARAM]=a.ALGORITHM_IDENTIFIER,_.query[a.CREDENTIAL_QUERY_PARAM]=`${f.accessKeyId}/${H}`,_.query[a.AMZ_DATE_QUERY_PARAM]=R,_.query[a.EXPIRES_QUERY_PARAM]=o.toString(10);let w=(0,i.getCanonicalHeaders)(_,l,A);return _.query[a.SIGNED_HEADERS_QUERY_PARAM]=this.getCanonicalHeaderList(w),_.query[a.SIGNATURE_QUERY_PARAM]=await this.getSignature(R,H,this.getSigningKey(f,y,p,d),this.createCanonicalRequest(_,w,await (0,n.getPayloadHash)(e,this.sha256))),_}async sign(e,t){return"string"==typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:r},{signingDate:i=new Date,priorSignature:o,signingRegion:l,signingService:u}){let c=l??await this.regionProvider(),{shortDate:h,longDate:A}=this.formatDate(i),E=(0,s.createScope)(h,c,u??this.service),g=await (0,n.getPayloadHash)({headers:{},body:r},this.sha256),d=new this.sha256;d.update(e);let f=(0,t.toHex)(await d.digest()),y=[a.EVENT_ALGORITHM_IDENTIFIER,A,E,o,f,g].join("\n");return this.signString(y,{signingDate:i,signingRegion:c,signingService:u})}async signMessage(e,{signingDate:t=new Date,signingRegion:r,signingService:a}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:r,signingService:a,priorSignature:e.priorSignature}).then(t=>({message:e.message,signature:t}))}async signString(e,{signingDate:a=new Date,signingRegion:s,signingService:i}={}){let n=await this.credentialProvider();this.validateResolvedCredentials(n);let o=s??await this.regionProvider(),{shortDate:l}=this.formatDate(a),u=new this.sha256(await this.getSigningKey(n,o,l,i));return u.update((0,r.toUint8Array)(e)),(0,t.toHex)(await u.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:r,unsignableHeaders:o,signingRegion:u,signingService:h}={}){let A=await this.credentialProvider();this.validateResolvedCredentials(A);let E=u??await this.regionProvider(),g=(0,c.prepareRequest)(e),{longDate:d,shortDate:f}=this.formatDate(t),y=(0,s.createScope)(f,E,h??this.service);g.headers[a.AMZ_DATE_HEADER]=d,A.sessionToken&&(g.headers[a.TOKEN_HEADER]=A.sessionToken);let R=await (0,n.getPayloadHash)(g,this.sha256);!(0,l.hasHeader)(a.SHA256_HEADER,g.headers)&&this.applyChecksum&&(g.headers[a.SHA256_HEADER]=R);let p=(0,i.getCanonicalHeaders)(g,o,r),H=await this.getSignature(d,y,this.getSigningKey(A,E,f,h),this.createCanonicalRequest(g,p,R));return g.headers[a.AUTH_HEADER]=`${a.ALGORITHM_IDENTIFIER} Credential=${A.accessKeyId}/${y}, SignedHeaders=${this.getCanonicalHeaderList(p)}, Signature=${H}`,g}async getSignature(e,s,i,n){let o=await this.createStringToSign(e,s,n,a.ALGORITHM_IDENTIFIER),l=new this.sha256(await i);return l.update((0,r.toUint8Array)(o)),(0,t.toHex)(await l.digest())}getSigningKey(e,t,r,a){return(0,s.getSigningKey)(this.sha256,e,r,t,a||this.service)}}e.s(["SignatureV4",()=>d],130879)}];

//# sourceMappingURL=5c86f_%40smithy_837a9c22._.js.map