module.exports=[193695,(e,r,t)=>{r.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},918622,(e,r,t)=>{r.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},814747,(e,r,t)=>{r.exports=e.x("path",()=>require("path"))},224361,(e,r,t)=>{r.exports=e.x("util",()=>require("util"))},605365,(e,r,t)=>{r.exports=e.x("process",()=>require("process"))},446786,(e,r,t)=>{r.exports=e.x("os",()=>require("os"))},254799,(e,r,t)=>{r.exports=e.x("crypto",()=>require("crypto"))},688947,(e,r,t)=>{r.exports=e.x("stream",()=>require("stream"))},921517,(e,r,t)=>{r.exports=e.x("http",()=>require("http"))},522734,(e,r,t)=>{r.exports=e.x("fs",()=>require("fs"))},792509,(e,r,t)=>{r.exports=e.x("url",()=>require("url"))},683695,e=>{"use strict";e.i(564153);var r=e.i(918042),t=e.i(474065);async function s(e){let s=(0,r.doc)(t.db,"brands",e),a=await (0,r.getDoc)(s);return a.exists()?{id:a.id,...a.data()}:null}e.s(["getBrand",()=>s])},594421,e=>{"use strict";var r=e.i(906661),t=e.i(276806),s=e.i(981990),a=e.i(707163),n=e.i(893013),o=e.i(416393),i=e.i(418829),l=e.i(907831),d=e.i(787414),c=e.i(251948),u=e.i(254140),p=e.i(847739),_=e.i(877290),h=e.i(195428),v=e.i(114365),f=e.i(193695);e.i(495983);var m=e.i(56931),x=e.i(758910),k=e.i(998596),R=e.i(675229),g=e.i(683695);e.i(199678);var w=e.i(452706);async function j(e){try{let r,{brandId:t,platform:s,topic:a}=await e.json();if(!s||!a)return x.NextResponse.json({error:"Plataforma e tema são obrigatórios."},{status:400});if(!(0,R.isGeminiConfigured)())return x.NextResponse.json({error:"API do Gemini não configurada."},{status:500});let n="Nenhuma marca selecionada. Use um tom de voz neutro, prático e focado em resultados.";if(t){let e=await (0,g.getBrand)(t);e&&(n=`
Marca: ${e.name}
Vertical: ${e.vertical}
Posicionamento: ${e.positioning}
Tom de Voz: ${e.voiceTone}
Audi\xeancia: ${e.audience.who}
Dores da Audi\xeancia: ${e.audience.pain}
Oferta Principal: ${e.offer.what}
Diferencial: ${e.offer.differentiator}
        `.trim())}let o=`Heur\xedsticas, ganchos e regras para ${s}. Como viralizar e reter aten\xe7\xe3o no ${s} com o tema ${a}.`,{context:i}=await (0,k.ragQuery)(o,{topK:8,minSimilarity:.15,filters:{docType:"heuristics"}}),l=w.SOCIAL_HOOKS_PROMPT.replace("{{brandContext}}",n).replace("{{platform}}",s).replace("{{topic}}",a).replace("{{knowledgeContext}}",i||"Use conhecimento geral sobre melhores práticas de redes sociais."),d=await (0,R.generateWithGemini)(l,{model:"gemini-2.0-flash-exp",temperature:.85});try{let e=d.trim();e.startsWith("```json")&&(e=e.slice(7)),e.startsWith("```")&&(e=e.slice(3)),e.endsWith("```")&&(e=e.slice(0,-3)),r=JSON.parse(e.trim())}catch(e){return console.error("Error parsing AI response:",e),x.NextResponse.json({error:"Erro ao processar resposta da IA. Tente novamente."},{status:500})}return x.NextResponse.json(r)}catch(e){return console.error("Hook generation error:",e),x.NextResponse.json({error:"Erro interno no servidor",details:String(e)},{status:500})}}e.s(["POST",()=>j,"dynamic",0,"force-dynamic","runtime",0,"nodejs"],458208);var E=e.i(458208);let y=new r.AppRouteRouteModule({definition:{kind:t.RouteKind.APP_ROUTE,page:"/api/social/hooks/route",pathname:"/api/social/hooks",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/OneDrive/Desktop/CURSOR/CONSELHO DE FUNIL/app/src/app/api/social/hooks/route.ts",nextConfigOutput:"",userland:E}),{workAsyncStorage:b,workUnitAsyncStorage:P,serverHooks:C}=y;function O(){return(0,s.patchFetch)({workAsyncStorage:b,workUnitAsyncStorage:P})}async function A(e,r,s){y.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let x="/api/social/hooks/route";x=x.replace(/\/index$/,"")||"/";let k=await y.prepare(e,r,{srcPage:x,multiZoneDraftMode:!1});if(!k)return r.statusCode=400,r.end("Bad Request"),null==s.waitUntil||s.waitUntil.call(s,Promise.resolve()),null;let{buildId:R,params:g,nextConfig:w,parsedUrl:j,isDraftMode:E,prerenderManifest:b,routerServerContext:P,isOnDemandRevalidate:C,revalidateOnlyGenerated:O,resolvedPathname:A,clientReferenceManifest:N,serverActionsManifest:S}=k,q=(0,i.normalizeAppPath)(x),T=!!(b.dynamicRoutes[q]||b.routes[A]),D=async()=>((null==P?void 0:P.render404)?await P.render404(e,r,j,!1):r.end("This page could not be found"),null);if(T&&!E){let e=!!b.routes[A],r=b.dynamicRoutes[q];if(r&&!1===r.fallback&&!e){if(w.experimental.adapterPath)return await D();throw new f.NoFallbackError}}let U=null;!T||y.isDev||E||(U="/index"===(U=A)?"/":U);let H=!0===y.isDev||!T,I=T&&!H;S&&N&&(0,o.setManifestsSingleton)({page:x,clientReferenceManifest:N,serverActionsManifest:S});let $=e.method||"GET",M=(0,n.getTracer)(),L=M.getActiveScopeSpan(),F={params:g,prerenderManifest:b,renderOpts:{experimental:{authInterrupts:!!w.experimental.authInterrupts},cacheComponents:!!w.cacheComponents,supportsDynamicResponse:H,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:w.cacheLife,waitUntil:s.waitUntil,onClose:e=>{r.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(r,t,s,a)=>y.onRequestError(e,r,s,a,P)},sharedContext:{buildId:R}},K=new l.NodeNextRequest(e),B=new l.NodeNextResponse(r),G=d.NextRequestAdapter.fromNodeNextRequest(K,(0,d.signalFromNodeResponse)(r));try{let o=async e=>y.handle(G,F).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":r.statusCode,"next.rsc":!1});let t=M.getRootSpanAttributes();if(!t)return;if(t.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${t.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=t.get("next.route");if(s){let r=`${$} ${s}`;e.setAttributes({"next.route":s,"http.route":s,"next.span_name":r}),e.updateName(r)}else e.updateName(`${$} ${x}`)}),i=!!(0,a.getRequestMeta)(e,"minimalMode"),l=async a=>{var n,l;let d=async({previousCacheEntry:t})=>{try{if(!i&&C&&O&&!t)return r.statusCode=404,r.setHeader("x-nextjs-cache","REVALIDATED"),r.end("This page could not be found"),null;let n=await o(a);e.fetchMetrics=F.renderOpts.fetchMetrics;let l=F.renderOpts.pendingWaitUntil;l&&s.waitUntil&&(s.waitUntil(l),l=void 0);let d=F.renderOpts.collectedTags;if(!T)return await (0,p.sendResponse)(K,B,n,F.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),r=(0,_.toNodeOutgoingHttpHeaders)(n.headers);d&&(r[v.NEXT_CACHE_TAGS_HEADER]=d),!r["content-type"]&&e.type&&(r["content-type"]=e.type);let t=void 0!==F.renderOpts.collectedRevalidate&&!(F.renderOpts.collectedRevalidate>=v.INFINITE_CACHE)&&F.renderOpts.collectedRevalidate,s=void 0===F.renderOpts.collectedExpire||F.renderOpts.collectedExpire>=v.INFINITE_CACHE?void 0:F.renderOpts.collectedExpire;return{value:{kind:m.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:r},cacheControl:{revalidate:t,expire:s}}}}catch(r){throw(null==t?void 0:t.isStale)&&await y.onRequestError(e,r,{routerKind:"App Router",routePath:x,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:I,isOnDemandRevalidate:C})},!1,P),r}},c=await y.handleResponse({req:e,nextConfig:w,cacheKey:U,routeKind:t.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:b,isRoutePPREnabled:!1,isOnDemandRevalidate:C,revalidateOnlyGenerated:O,responseGenerator:d,waitUntil:s.waitUntil,isMinimalMode:i});if(!T)return null;if((null==c||null==(n=c.value)?void 0:n.kind)!==m.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(l=c.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||r.setHeader("x-nextjs-cache",C?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),E&&r.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let f=(0,_.fromNodeOutgoingHttpHeaders)(c.value.headers);return i&&T||f.delete(v.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||r.getHeader("Cache-Control")||f.get("Cache-Control")||f.set("Cache-Control",(0,h.getCacheControlHeader)(c.cacheControl)),await (0,p.sendResponse)(K,B,new Response(c.value.body,{headers:f,status:c.value.status||200})),null};L?await l(L):await M.withPropagatedContext(e.headers,()=>M.trace(c.BaseServerSpan.handleRequest,{spanName:`${$} ${x}`,kind:n.SpanKind.SERVER,attributes:{"http.method":$,"http.target":e.url}},l))}catch(r){if(r instanceof f.NoFallbackError||await y.onRequestError(e,r,{routerKind:"App Router",routePath:q,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:I,isOnDemandRevalidate:C})},!1,P),T)throw r;return await (0,p.sendResponse)(K,B,new Response(null,{status:500})),null}}e.s(["handler",()=>A,"patchFetch",()=>O,"routeModule",()=>y,"serverHooks",()=>C,"workAsyncStorage",()=>b,"workUnitAsyncStorage",()=>P],594421)},878617,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__c66a38aa._.js","server/chunks/5c86f_8db425cf._.js","server/chunks/5c86f_@aws-sdk_credential-provider-cognito-identity_48abad20._.js"].map(r=>e.l(r))).then(()=>r(971738)))},260063,e=>{e.v(r=>Promise.all(["server/chunks/5c86f_@aws-sdk_credential-provider-http_dist-es_index_cd17189a.js"].map(r=>e.l(r))).then(()=>r(618513)))},616800,e=>{e.v(r=>Promise.all(["server/chunks/5c86f_@smithy_credential-provider-imds_dist-es_index_0fe1a303.js"].map(r=>e.l(r))).then(()=>r(710858)))},307311,e=>{e.v(r=>Promise.all(["server/chunks/5c86f_@aws-sdk_credential-provider-env_dist-es_index_4fff1637.js"].map(r=>e.l(r))).then(()=>r(690392)))},210675,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__50dbcea3._.js","server/chunks/5c86f_@aws-sdk_nested-clients_dist-es_submodules_sts_index_e9d57c48.js","server/chunks/5c86f_30e61836._.js","server/chunks/5c86f_@aws-sdk_core_dist-es_submodules_protocols_query_AwsQueryProtocol_a71c1d68.js"].map(r=>e.l(r))).then(()=>r(482808)))},960952,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__4a867c28._.js","server/chunks/5c86f_@aws-sdk_nested-clients_dist-es_submodules_signin_index_2c34b094.js","server/chunks/5c86f_17fe0de2._.js","server/chunks/5c86f_5f11719d._.js"].map(r=>e.l(r))).then(()=>r(82515)))},83092,e=>{e.v(r=>Promise.all(["server/chunks/5c86f_@aws-sdk_credential-provider-process_dist-es_index_8f3445b8.js"].map(r=>e.l(r))).then(()=>r(493241)))},643449,e=>{e.v(r=>Promise.all(["server/chunks/5c86f_@aws-sdk_credential-provider-sso_dist-es_index_06fbc501.js"].map(r=>e.l(r))).then(()=>r(632366)))},435934,e=>{e.v(r=>Promise.all(["server/chunks/5c86f_@aws-sdk_credential-provider-web-identity_dist-es_index_bddb838d.js"].map(r=>e.l(r))).then(()=>r(424055)))},916312,e=>{e.v(r=>Promise.all(["server/chunks/5c86f_@aws-sdk_credential-provider-ini_dist-es_index_8e002212.js"].map(r=>e.l(r))).then(()=>r(689167)))},658563,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__4a867c28._.js","server/chunks/5c86f_17fe0de2._.js","server/chunks/5c86f_@aws-sdk_nested-clients_dist-es_submodules_sso-oidc_index_3fd57a79.js","server/chunks/5c86f_5f11719d._.js"].map(r=>e.l(r))).then(()=>r(246555)))},174079,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__149e504e._.js","server/chunks/5c86f_@aws-sdk_8c815586._.js","server/chunks/5c86f_e7f27469._.js","server/chunks/5c86f_87262e2c._.js"].map(r=>e.l(r))).then(()=>r(720697)))},745393,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__f93c9467._.js","server/chunks/5c86f_@aws-sdk_credential-providers_eaf019db._.js","server/chunks/5c86f_@aws-sdk_core_dist-es_submodules_protocols_query_AwsQueryProtocol_a71c1d68.js","server/chunks/5c86f_fda899e8._.js"].map(r=>e.l(r))).then(()=>r(281810)))},84617,e=>{e.v(r=>Promise.all(["server/chunks/OneDrive_Desktop_CURSOR_CONSELHO DE FUNIL_909b41e2._.js"].map(r=>e.l(r))).then(()=>r(413263)))},401065,e=>{e.v(r=>Promise.all(["server/chunks/13466_Desktop_CURSOR_CONSELHO DE FUNIL_app_src_lib_ai_rag-helpers-fixed_ts_ca76f29a._.js"].map(r=>e.l(r))).then(()=>r(756565)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__54855a1b._.js.map