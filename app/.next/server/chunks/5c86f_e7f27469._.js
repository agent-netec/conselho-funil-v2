module.exports=[847756,e=>{"use strict";var t=e.i(472419),r=e.i(759001),i=e.i(627125),s=e.i(961948),a=e.i(473441),n=e.i(775371),o=e.i(824587),l=e.i(572406);class c extends l.HttpProtocol{async serializeRequest(e,i,a){let n,l={...i??{}},c=this.serializer,u={},h={},f=await a.endpoint(),d=t.NormalizedSchema.of(e?.input),m=d.getSchema(),p=!1,g=new s.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:u,headers:h,body:void 0});if(f){this.updateServiceEndpoint(g,f),this.setHostPrefix(g,e,l);let t=(0,r.translateTraits)(e.traits);if(t.http){g.method=t.http[0];let[e,r]=t.http[1].split("?");"/"==g.path?g.path=e:g.path+=e,Object.assign(u,Object.fromEntries(new URLSearchParams(r??"")))}}for(let[e,t]of d.structIterator()){let r=t.getMergedTraits()??{},i=l[e];if(null==i&&!t.isIdempotencyToken()){if(r.httpLabel&&(g.path.includes(`{${e}+}`)||g.path.includes(`{${e}}`)))throw Error(`No value provided for input HTTP label: ${e}.`);continue}if(r.httpPayload)t.isStreaming()?t.isStructSchema()?l[e]&&(n=await this.serializeEventStream({eventStream:l[e],requestSchema:d})):n=i:(c.write(t,i),n=c.flush()),delete l[e];else if(r.httpLabel){c.write(t,i);let r=c.flush();g.path.includes(`{${e}+}`)?g.path=g.path.replace(`{${e}+}`,r.split("/").map(o.extendedEncodeURIComponent).join("/")):g.path.includes(`{${e}}`)&&(g.path=g.path.replace(`{${e}}`,(0,o.extendedEncodeURIComponent)(r))),delete l[e]}else if(r.httpHeader)c.write(t,i),h[r.httpHeader.toLowerCase()]=String(c.flush()),delete l[e];else if("string"==typeof r.httpPrefixHeaders){for(let[e,s]of Object.entries(i)){let i=r.httpPrefixHeaders+e;c.write([t.getValueSchema(),{httpHeader:i}],s),h[i.toLowerCase()]=c.flush()}delete l[e]}else r.httpQuery||r.httpQueryParams?(this.serializeQuery(t,i,u),delete l[e]):p=!0}return p&&l&&(c.write(m,l),n=c.flush()),g.headers=h,g.query=u,g.body=n,g}serializeQuery(e,t,r){let i=this.serializer,s=e.getMergedTraits();if(s.httpQueryParams){for(let[i,a]of Object.entries(t))if(!(i in r)){let t=e.getValueSchema();Object.assign(t.getMergedTraits(),{...s,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(t,a,r)}return}if(e.isListSchema()){let a=!!e.getMergedTraits().sparse,n=[];for(let r of t){i.write([e.getValueSchema(),s],r);let t=i.flush();(a||void 0!==t)&&n.push(t)}r[s.httpQuery]=n}else i.write([e,s],t),r[s.httpQuery]=i.flush()}async deserializeResponse(e,r,i){let s=this.deserializer,a=t.NormalizedSchema.of(e.output),o={};if(i.statusCode>=300){let t=await (0,n.collectBody)(i.body,r);throw t.byteLength>0&&Object.assign(o,await s.read(15,t)),await this.handleError(e,r,i,o,this.deserializeMetadata(i)),Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let e in i.headers){let t=i.headers[e];delete i.headers[e],i.headers[e.toLowerCase()]=t}let l=await this.deserializeHttpMessage(a,r,i,o);if(l.length){let e=await (0,n.collectBody)(i.body,r);if(e.byteLength>0){let t=await s.read(a,e);for(let e of l)o[e]=t[e]}}else l.discardResponseBody&&await (0,n.collectBody)(i.body,r);return o.$metadata=this.deserializeMetadata(i),o}async deserializeHttpMessage(e,r,s,o,l){let c;c=o instanceof Set?l:o;let u=!0,h=this.deserializer,f=t.NormalizedSchema.of(e),d=[];for(let[e,t]of f.structIterator()){let o=t.getMemberTraits();if(o.httpPayload){if(u=!1,t.isStreaming())t.isStructSchema()?c[e]=await this.deserializeEventStream({response:s,responseSchema:f}):c[e]=(0,a.sdkStreamMixin)(s.body);else if(s.body){let i=await (0,n.collectBody)(s.body,r);i.byteLength>0&&(c[e]=await h.read(t,i))}}else if(o.httpHeader){let r=String(o.httpHeader).toLowerCase(),a=s.headers[r];if(null!=a)if(t.isListSchema()){let s=t.getValueSchema();s.getMergedTraits().httpHeader=r;let n=[];for(let e of s.isTimestampSchema()&&4===s.getSchema()?function(e,t,r){if(!Number.isInteger(2))throw Error("Invalid number of delimiters (2) for splitEvery.");let i=e.split(","),s=[],a="";for(let e=0;e<i.length;e++)""===a?a=i[e]:a+=","+i[e],(e+1)%2==0&&(s.push(a),a="");return""!==a&&s.push(a),s}(a,0,0):(0,i.splitHeader)(a))n.push(await h.read(s,e.trim()));c[e]=n}else c[e]=await h.read(t,a)}else if(void 0!==o.httpPrefixHeaders){for(let[r,i]of(c[e]={},Object.entries(s.headers)))if(r.startsWith(o.httpPrefixHeaders)){let s=t.getValueSchema();s.getMergedTraits().httpHeader=r,c[e][r.slice(o.httpPrefixHeaders.length)]=await h.read(s,i)}}else o.httpResponseCode?c[e]=s.statusCode:d.push(e)}return d.discardResponseBody=u,d}}var u=e.i(508602),h=e.i(418159),f=e.i(921150),d=e.i(528376);class m extends f.SerdeContext{codecDeserializer;stringDeserializer;constructor(e,t){super(),this.codecDeserializer=e,this.stringDeserializer=new d.FromStringShapeDeserializer(t)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,r){let i=t.NormalizedSchema.of(e),s=i.getMergedTraits(),a=this.serdeContext?.utf8Encoder??h.toUtf8;if(s.httpHeader||s.httpResponseCode)return this.stringDeserializer.read(i,a(r));if(s.httpPayload){if(i.isBlobSchema()){let e=this.serdeContext?.utf8Decoder??u.fromUtf8;return"string"==typeof r?e(r):r}else if(i.isStringSchema())return"byteLength"in r?a(r):r}return this.codecDeserializer.read(i,r)}}var p=e.i(946980),g=e.i(573242),S=e.i(474811),y=e.i(794123),b=f,w=e.i(896283);class T extends b.SerdeContext{settings;stringBuffer="";constructor(e){super(),this.settings=e}write(e,r){let i=t.NormalizedSchema.of(e);switch(typeof r){case"object":if(null===r){this.stringBuffer="null";return}if(i.isTimestampSchema()){if(!(r instanceof Date))throw Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${i.getName(!0)}`);switch((0,w.determineTimestampFormat)(i,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=(0,p.dateToUtcString)(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(i.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??y.toBase64)(r);return}if(i.isListSchema()&&Array.isArray(r)){let e="";for(let t of r){var s;this.write([i.getValueSchema(),i.getMergedTraits()],t);let r=this.flush();""!==e&&(e+=", "),e+=i.getValueSchema().isTimestampSchema()?r:(((s=r).includes(",")||s.includes('"'))&&(s=`"${s.replace(/"/g,'\\"')}"`),s)}this.stringBuffer=e;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let a=i.getMergedTraits().mediaType,n=r;if(a&&(("application/json"===a||a.endsWith("+json"))&&(n=S.LazyJsonString.from(n)),i.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??y.toBase64)(n.toString());return}this.stringBuffer=r;break;default:i.isIdempotencyToken()?this.stringBuffer=(0,g.generateIdempotencyToken)():this.stringBuffer=String(r)}}flush(){let e=this.stringBuffer;return this.stringBuffer="",e}}class N{codecSerializer;stringSerializer;buffer;constructor(e,t,r=new T(t)){this.codecSerializer=e,this.stringSerializer=r}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,r){let i=t.NormalizedSchema.of(e),s=i.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(i,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(i,r)}flush(){if(void 0!==this.buffer){let e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}var x=e.i(465742),C=e.i(839704),z=e.i(776163),E=e.i(59842);class v extends c{serializer;deserializer;codec;mixin=new C.ProtocolLib;constructor({defaultNamespace:e}){super({defaultNamespace:e});const t={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new z.JsonCodec(t),this.serializer=new N(this.codec.createSerializer(),t),this.deserializer=new m(this.codec.createDeserializer(),t)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(e){this.codec.setSerdeContext(e),super.setSerdeContext(e)}async serializeRequest(e,r,i){let s=await super.serializeRequest(e,r,i),a=t.NormalizedSchema.of(e.input);if(!s.headers["content-type"]){let e=this.mixin.resolveRestContentType(this.getDefaultContentType(),a);e&&(s.headers["content-type"]=e)}return null==s.body&&s.headers["content-type"]===this.getDefaultContentType()&&(s.body="{}"),s}async deserializeResponse(e,r,i){let s=await super.deserializeResponse(e,r,i);for(let[r,i]of t.NormalizedSchema.of(e.output).structIterator())!i.getMemberTraits().httpPayload||r in s||(s[r]=null);return s}async handleError(e,r,i,s,a){let n=(0,E.loadRestJsonErrorCode)(i,s)??"Unknown",{errorSchema:o,errorMetadata:l}=await this.mixin.getErrorSchemaOrThrowBaseException(n,this.options.defaultNamespace,i,s,a),c=t.NormalizedSchema.of(o),u=s.message??s.Message??"Unknown",h=new(x.TypeRegistry.for(o[1]).getErrorCtor(o)??Error)(u);await this.deserializeHttpMessage(o,r,i,s);let f={};for(let[e,t]of c.structIterator()){let r=t.getMergedTraits().jsonName??e;f[e]=this.codec.createDeserializer().readObject(t,s[r])}throw this.mixin.decorateServiceException(Object.assign(h,l,{$fault:c.getMergedTraits().error,message:u},f),s)}getDefaultContentType(){return"application/json"}}e.s(["AwsRestJsonProtocol",()=>v],847756)},418159,e=>{"use strict";var t=e.i(105671);e.s(["toUtf8",0,e=>{if("string"==typeof e)return e;if("object"!=typeof e||"number"!=typeof e.byteOffset||"number"!=typeof e.byteLength)throw Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,t.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}])},627125,e=>{"use strict";e.s(["splitHeader",0,e=>{let t,r=e.length,i=[],s=!1,a=0;for(let n=0;n<r;++n){let r=e[n];switch(r){case'"':"\\"!==t&&(s=!s);break;case",":s||(i.push(e.slice(a,n)),a=n+1)}t=r}return i.push(e.slice(a)),i.map(e=>{let t=(e=e.trim()).length;return t<2?e:('"'===e[0]&&'"'===e[t-1]&&(e=e.slice(1,t-1)),e.replace(/\\"/g,'"'))})}])},824587,e=>{"use strict";function t(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}e.s(["extendedEncodeURIComponent",()=>t])},575560,e=>{"use strict";let t="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",r="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",i="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",s="(\\d?\\d)",a="(\\d{4})",n=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),o=RegExp(`^${t}, ${s} ${r} ${a} ${i} GMT$`),l=RegExp(`^${t}, ${s}-${r}-(\\d\\d) ${i} GMT$`),c=RegExp(`^${t} ${r} ( [1-9]|\\d\\d) ${i} ${a}$`),u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function h(e,t,r){let i=Number(e);if(i<t||i>r)throw Error(`Value ${i} out of range [${t}, ${r}]`)}e.s(["_parseEpochTimestamp",0,e=>{if(null==e)return;let t=NaN;if("number"==typeof e)t=e;else if("string"==typeof e){if(!/^-?\d*\.?\d+$/.test(e))throw TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else"object"==typeof e&&1===e.tag&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(1e3*t))},"_parseRfc3339DateTimeWithOffset",0,e=>{if(null==e)return;if("string"!=typeof e)throw TypeError("RFC3339 timestamps must be strings");let t=n.exec(e);if(!t)throw TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,r,i,s,a,o,l,,c,u]=t;h(i,1,12),h(s,1,31),h(a,0,23),h(o,0,59),h(l,0,60);let f=new Date(Date.UTC(Number(r),Number(i)-1,Number(s),Number(a),Number(o),Number(l),Number(c)?Math.round(1e3*parseFloat(`0.${c}`)):0));if(f.setUTCFullYear(Number(r)),"Z"!=u.toUpperCase()){let[,e,t,r]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0];f.setTime(f.getTime()+("-"===e?1:-1)*(60*Number(t)*6e4+60*Number(r)*1e3))}return f},"_parseRfc7231DateTime",0,e=>{let t,r,i,s,a,n,f,d;if(null!=e){if("string"!=typeof e)throw TypeError("RFC7231 timestamps must be strings.");if((d=o.exec(e))?[,t,r,i,s,a,n,f]=d:(d=l.exec(e))?([,t,r,i,s,a,n,f]=d,i=(Number(i)+1900).toString()):(d=c.exec(e))&&([,r,t,s,a,n,f,i]=d),i&&n){let e=Date.UTC(Number(i),u.indexOf(r),Number(t),Number(s),Number(a),Number(n),f?Math.round(1e3*parseFloat(`0.${f}`)):0);h(t,1,31),h(s,0,23),h(a,0,59),h(n,0,60);let o=new Date(e);return o.setUTCFullYear(Number(i)),o}throw TypeError(`Invalid RFC7231 date-time value ${e}.`)}}])},528376,e=>{"use strict";var t=e.i(472419),r=e.i(575560),i=e.i(474811),s=e.i(895998),a=e.i(627125),n=e.i(968556),o=e.i(418159),l=e.i(921150),c=e.i(896283);class u extends l.SerdeContext{settings;constructor(e){super(),this.settings=e}read(e,o){let l=t.NormalizedSchema.of(e);if(l.isListSchema())return(0,a.splitHeader)(o).map(e=>this.read(l.getValueSchema(),e));if(l.isBlobSchema())return(this.serdeContext?.base64Decoder??n.fromBase64)(o);if(l.isTimestampSchema())switch((0,c.determineTimestampFormat)(l,this.settings)){case 5:return(0,r._parseRfc3339DateTimeWithOffset)(o);case 6:return(0,r._parseRfc7231DateTime)(o);case 7:return(0,r._parseEpochTimestamp)(o);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",o),new Date(o)}if(l.isStringSchema()){let e=l.getMergedTraits().mediaType,t=o;if(e)return l.getMergedTraits().httpHeader&&(t=this.base64ToUtf8(t)),("application/json"===e||e.endsWith("+json"))&&(t=i.LazyJsonString.from(t)),t}return l.isNumericSchema()?Number(o):l.isBigIntegerSchema()?BigInt(o):l.isBigDecimalSchema()?new s.NumericValue(o,"bigDecimal"):l.isBooleanSchema()?"true"===String(o).toLowerCase():o}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??o.toUtf8)((this.serdeContext?.base64Decoder??n.fromBase64)(e))}}e.s(["FromStringShapeDeserializer",()=>u])},508602,e=>{"use strict";var t=e.i(105671);e.s(["fromUtf8",0,e=>{let r=(0,t.fromString)(e,"utf8");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT)}])},776163,59842,e=>{"use strict";var t=e.i(843131),r=e.i(896283),i=e.i(472419),s=e.i(474811),a=e.i(895998),n=e.i(946980),o=e.i(968556),l=t,c=e.i(84411);function u(e,t,r){if(r?.source){let e=r.source;if("number"==typeof t&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||e!==String(t)))return e.includes(".")?new a.NumericValue(e,"bigDecimal"):BigInt(e)}return t}var h=e.i(775371),f=e.i(705557);let d=(e,t)=>(0,h.collectBody)(e,t).then(e=>(t?.utf8Encoder??f.toUtf8)(e)).then(e=>{if(e.length)try{return JSON.parse(e)}catch(t){throw t?.name==="SyntaxError"&&Object.defineProperty(t,"$responseBodyText",{value:e}),t}return{}});e.s(["loadRestJsonErrorCode",0,(e,t)=>{let r=(e,t)=>Object.keys(e).find(e=>e.toLowerCase()===t.toLowerCase()),i=e=>{let t=e;return"number"==typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},s=r(e.headers,"x-amzn-errortype");if(void 0!==s)return i(e.headers[s]);if(t&&"object"==typeof t){let e=r(t,"code");if(e&&void 0!==t[e])return i(t[e]);if(void 0!==t.__type)return i(t.__type)}},"parseJsonBody",0,d],59842);class m extends l.SerdeContextConfig{settings;constructor(e){super(),this.settings=e}async read(e,t){return this._read(e,"string"==typeof t?JSON.parse(t,u):await d(t,this.serdeContext))}readObject(e,t){return this._read(e,t)}_read(e,t){let l=null!==t&&"object"==typeof t,u=i.NormalizedSchema.of(e);if(l){if(u.isStructSchema()){let e,r,i=u.isUnionSchema(),s={},{jsonName:a}=this.settings;for(let[n,o]of(a&&(r={}),i&&(e=new c.UnionSerde(t,s)),u.structIterator())){let l=n;a&&(r[l=o.getMergedTraits().jsonName??l]=n),i&&e.mark(l),null!=t[l]&&(s[n]=this._read(o,t[l]))}if(i)e.writeUnknown();else if("string"==typeof t.__type)for(let[e,i]of Object.entries(t)){let t=a?r[e]??e:e;t in s||(s[t]=i)}return s}if(Array.isArray(t)&&u.isListSchema()){let e=u.getValueSchema(),r=[],i=!!u.getMergedTraits().sparse;for(let s of t)(i||null!=s)&&r.push(this._read(e,s));return r}if(u.isMapSchema()){let e=u.getValueSchema(),r={},i=!!u.getMergedTraits().sparse;for(let[s,a]of Object.entries(t))(i||null!=a)&&(r[s]=this._read(e,a));return r}}if(u.isBlobSchema()&&"string"==typeof t)return(0,o.fromBase64)(t);let h=u.getMergedTraits().mediaType;if(u.isStringSchema()&&"string"==typeof t&&h)return"application/json"===h||h.endsWith("+json")?s.LazyJsonString.from(t):t;if(u.isTimestampSchema()&&null!=t)switch((0,r.determineTimestampFormat)(u,this.settings)){case 5:return(0,n.parseRfc3339DateTimeWithOffset)(t);case 6:return(0,n.parseRfc7231DateTime)(t);case 7:return(0,n.parseEpochTimestamp)(t);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",t),new Date(t)}if(u.isBigIntegerSchema()&&("number"==typeof t||"string"==typeof t))return BigInt(t);if(u.isBigDecimalSchema()&&void 0!=t)return t instanceof a.NumericValue?t:"bigDecimal"===t.type&&"string"in t?new a.NumericValue(t.string,t.type):new a.NumericValue(String(t),"bigDecimal");if(u.isNumericSchema()&&"string"==typeof t){switch(t){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return t}if(u.isDocumentSchema())if(!l)return structuredClone(t);else{let e=Array.isArray(t)?[]:{};for(let[r,i]of Object.entries(t))i instanceof a.NumericValue?e[r]=i:e[r]=this._read(u,i);return e}return t}}var p=e.i(573242),g=e.i(794123),S=t;let y=String.fromCharCode(925);class b{values=new Map;counter=0;stage=0;createReplacer(){if(1===this.stage)throw Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(2===this.stage)throw Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(e,t)=>{if(t instanceof a.NumericValue){let e=`${y+"nv"+this.counter++}_`+t.string;return this.values.set(`"${e}"`,t.string),e}if("bigint"==typeof t){let e=t.toString(),r=`${y+"b"+this.counter++}_`+e;return this.values.set(`"${r}"`,e),r}return t}}replaceInJson(e){if(0===this.stage)throw Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(2===this.stage)throw Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,0===this.counter)return e;for(let[t,r]of this.values)e=e.replace(t,r);return e}}class w extends S.SerdeContextConfig{settings;buffer;useReplacer=!1;rootSchema;constructor(e){super(),this.settings=e}write(e,t){this.rootSchema=i.NormalizedSchema.of(e),this.buffer=this._write(this.rootSchema,t)}writeDiscriminatedDocument(e,t){this.write(e,t),"object"==typeof this.buffer&&(this.buffer.__type=i.NormalizedSchema.of(e).getName(!0))}flush(){let{rootSchema:e,useReplacer:t}=this;if(this.rootSchema=void 0,this.useReplacer=!1,e?.isStructSchema()||e?.isDocumentSchema()){if(!t)return JSON.stringify(this.buffer);let e=new b;return e.replaceInJson(JSON.stringify(this.buffer,e.createReplacer(),0))}return this.buffer}_write(e,t,o){let l=null!==t&&"object"==typeof t,c=i.NormalizedSchema.of(e);if(l){if(c.isStructSchema()){let e,r={},{jsonName:i}=this.settings;for(let[s,a]of(i&&(e={}),c.structIterator())){let n=this._write(a,t[s],c);if(void 0!==n){let t=s;i&&(t=a.getMergedTraits().jsonName??s,e[s]=t),r[t]=n}}if(c.isUnionSchema()&&0===Object.keys(r).length){let{$unknown:e}=t;if(Array.isArray(e)){let[t,i]=e;r[t]=this._write(15,i)}}else if("string"==typeof t.__type)for(let[s,a]of Object.entries(t)){let t=i?e[s]??s:s;t in r||(r[t]=this._write(15,a))}return r}if(Array.isArray(t)&&c.isListSchema()){let e=c.getValueSchema(),r=[],i=!!c.getMergedTraits().sparse;for(let s of t)(i||null!=s)&&r.push(this._write(e,s));return r}if(c.isMapSchema()){let e=c.getValueSchema(),r={},i=!!c.getMergedTraits().sparse;for(let[s,a]of Object.entries(t))(i||null!=a)&&(r[s]=this._write(e,a));return r}if(t instanceof Uint8Array&&(c.isBlobSchema()||c.isDocumentSchema()))return c===this.rootSchema?t:(this.serdeContext?.base64Encoder??g.toBase64)(t);if(t instanceof Date&&(c.isTimestampSchema()||c.isDocumentSchema()))switch((0,r.determineTimestampFormat)(c,this.settings)){case 5:return t.toISOString().replace(".000Z","Z");case 6:return(0,n.dateToUtcString)(t);case 7:return t.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",t),t.getTime()/1e3}t instanceof a.NumericValue&&(this.useReplacer=!0)}if(!(null===t&&o?.isStructSchema())){if(c.isStringSchema()){if(void 0===t&&c.isIdempotencyToken())return(0,p.generateIdempotencyToken)();let e=c.getMergedTraits().mediaType;return null!=t&&e&&("application/json"===e||e.endsWith("+json"))?s.LazyJsonString.from(t):t}if("number"==typeof t&&c.isNumericSchema())return Math.abs(t)===1/0||isNaN(t)?String(t):t;if("string"==typeof t&&c.isBlobSchema())return c===this.rootSchema?t:(this.serdeContext?.base64Encoder??g.toBase64)(t);if("bigint"==typeof t&&(this.useReplacer=!0),c.isDocumentSchema())if(!l)return structuredClone(t);else{let e=Array.isArray(t)?[]:{};for(let[r,i]of Object.entries(t))i instanceof a.NumericValue?(this.useReplacer=!0,e[r]=i):e[r]=this._write(c,i);return e}return t}}}class T extends t.SerdeContextConfig{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new w(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new m(this.settings);return e.setSerdeContext(this.serdeContext),e}}e.s(["JsonCodec",()=>T],776163)}];

//# sourceMappingURL=5c86f_e7f27469._.js.map