(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,416493,e=>{"use strict";var t=e.i(371352),n=e.i(197402);let r=(0,t.create)(e=>({user:null,isLoading:!0,isInitialized:!1,setUser:t=>e({user:t,isLoading:!1}),setLoading:t=>e({isLoading:t}),initialize:()=>{if(e({isLoading:!0}),!n.onAuthChange)return console.error("[AuthStore] onAuthChange not available"),e({isLoading:!1,isInitialized:!0}),()=>{};try{let t=(0,n.onAuthChange)(t=>{e({user:t,isLoading:!1,isInitialized:!0})});return("() => {}"===t.toString()||t.toString().includes("noop"))&&(console.warn("[AuthStore] Firebase Auth not available, forcing initialization."),e({user:null,isLoading:!1,isInitialized:!0})),t}catch(t){return console.error("[AuthStore] Error during initialization:",t),e({isLoading:!1,isInitialized:!0}),()=>{}}},signOut:async()=>{e({isLoading:!0}),await (0,n.signOut)(),e({user:null,isLoading:!1})}}));e.s(["useAuthStore",0,r])},454682,373294,e=>{"use strict";let t=(0,e.i(946089).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);e.s(["Building2",()=>t],454682);var n=e.i(833145);function r(){let[e,t]=(0,n.useState)(!1),[r,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{i(!0);let e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),!!r&&e}e.s(["useMobile",()=>r],373294)},58333,(e,t,n)=>{t.exports=e.r(559625)},197402,e=>{"use strict";e.i(169556);var t=e.i(290555),n=e.i(597482);async function r(){if(!n.auth)return{error:"Auth não disponível"};try{return await (0,t.signOut)(n.auth),{error:null}}catch(e){return{error:e.message}}}let i=async(e,r)=>{if(!n.auth)throw Error("Auth não disponível");return(await (0,t.signInWithEmailAndPassword)(n.auth,e,r)).user},a=async(r,i,a)=>{if(!n.auth)throw Error("Auth não disponível");let o=await (0,t.createUserWithEmailAndPassword)(n.auth,r,i);if(a&&o.user){let{updateProfile:t}=await e.A(290917);await t(o.user,{displayName:a})}return o.user};function o(e){return!n.auth||n.auth._isMock?()=>{}:(0,t.onAuthStateChanged)(n.auth,e)}e.s(["loginWithEmail",0,i,"logout",0,r,"onAuthChange",()=>o,"signOut",()=>r,"signupWithEmail",0,a])},186855,e=>{"use strict";let t=(0,e.i(946089).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>t],186855)},603873,e=>{"use strict";function t(e,n,{checkForDefaultPrevented:r=!0}={}){return function(t){if(e?.(t),!1===r||!t.defaultPrevented)return n?.(t)}}"undefined"!=typeof window&&window.document&&window.document.createElement,e.s(["composeEventHandlers",()=>t])},604574,e=>{"use strict";var t=e.i(833145),n=globalThis?.document?t.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>n])},607824,e=>{"use strict";var t=e.i(833145);function n(e){let n=t.useRef(e);return t.useEffect(()=>{n.current=e}),t.useMemo(()=>(...e)=>n.current?.(...e),[])}e.s(["useCallbackRef",()=>n])},298802,e=>{"use strict";var t=e.i(833145),n=e.i(730042),r=e.i(604574),i=e=>{var i;let o,s,{present:u,children:l}=e,c=function(e){var n,i;let[o,s]=t.useState(),u=t.useRef(null),l=t.useRef(e),c=t.useRef("none"),[d,f]=(n=e?"mounted":"unmounted",i={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>i[e][t]??e,n));return t.useEffect(()=>{let e=a(u.current);c.current="mounted"===d?e:"none"},[d]),(0,r.useLayoutEffect)(()=>{let t=u.current,n=l.current;if(n!==e){let r=c.current,i=a(t);e?f("MOUNT"):"none"===i||t?.display==="none"?f("UNMOUNT"):n&&r!==i?f("ANIMATION_OUT"):f("UNMOUNT"),l.current=e}},[e,f]),(0,r.useLayoutEffect)(()=>{if(o){let e,t=o.ownerDocument.defaultView??window,n=n=>{let r=a(u.current).includes(CSS.escape(n.animationName));if(n.target===o&&r&&(f("ANIMATION_END"),!l.current)){let n=o.style.animationFillMode;o.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===o.style.animationFillMode&&(o.style.animationFillMode=n)})}},r=e=>{e.target===o&&(c.current=a(u.current))};return o.addEventListener("animationstart",r),o.addEventListener("animationcancel",n),o.addEventListener("animationend",n),()=>{t.clearTimeout(e),o.removeEventListener("animationstart",r),o.removeEventListener("animationcancel",n),o.removeEventListener("animationend",n)}}f("ANIMATION_END")},[o,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:t.useCallback(e=>{u.current=e?getComputedStyle(e):null,s(e)},[])}}(u),d="function"==typeof l?l({present:c.isPresent}):t.Children.only(l),f=(0,n.useComposedRefs)(c.ref,(i=d,(s=(o=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in o&&o.isReactWarning)?i.ref:(s=(o=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in o&&o.isReactWarning)?i.props.ref:i.props.ref||i.ref));return"function"==typeof l||c.isPresent?t.cloneElement(d,{ref:f}):null};function a(e){return e?.animationName||"none"}i.displayName="Presence",e.s(["Presence",()=>i])},261698,e=>{"use strict";var t=e.i(833145),n=e.i(604574);t[" useEffectEvent ".trim().toString()],t[" useInsertionEffect ".trim().toString()];var r=t[" useInsertionEffect ".trim().toString()]||n.useLayoutEffect;function i({prop:e,defaultProp:n,onChange:i=()=>{},caller:a}){let[o,s,u]=function({defaultProp:e,onChange:n}){let[i,a]=t.useState(e),o=t.useRef(i),s=t.useRef(n);return r(()=>{s.current=n},[n]),t.useEffect(()=>{o.current!==i&&(s.current?.(i),o.current=i)},[i,o]),[i,a,s]}({defaultProp:n,onChange:i}),l=void 0!==e,c=l?e:o;{let n=t.useRef(void 0!==e);t.useEffect(()=>{let e=n.current;if(e!==l){let t=l?"controlled":"uncontrolled";console.warn(`${a} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}n.current=l},[l,a])}return[c,t.useCallback(t=>{if(l){let n="function"==typeof t?t(e):t;n!==e&&u.current?.(n)}else s(t)},[l,e,s,u])]}Symbol("RADIX:SYNC_STATE"),e.s(["useControllableState",()=>i],261698)},643380,e=>{"use strict";var t=e.i(833145),n=e.i(604574),r=t[" useId ".trim().toString()]||(()=>void 0),i=0;function a(e){let[a,o]=t.useState(r());return(0,n.useLayoutEffect)(()=>{e||o(e=>e??String(i++))},[e]),e||(a?`radix-${a}`:"")}e.s(["useId",()=>a])},999060,e=>{"use strict";var t=e.i(833145),n=e.i(604574);function r(e){let[r,i]=t.useState(void 0);return(0,n.useLayoutEffect)(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,r;if(!Array.isArray(t)||!t.length)return;let a=t[0];if("borderBoxSize"in a){let e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,r=t.blockSize}else n=e.offsetWidth,r=e.offsetHeight;i({width:n,height:r})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}i(void 0)},[e]),r}e.s(["useSize",()=>r])},371352,e=>{"use strict";var t=e.i(833145);let n=e=>{let t,n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(r,i,a);return a},r=e=>{let r=e?n(e):n,i=e=>(function(e,n=e=>e){let r=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>n(e.getState()),[e,n]),t.default.useCallback(()=>n(e.getInitialState()),[e,n]));return t.default.useDebugValue(r),r})(r,e);return Object.assign(i,r),i},i=e=>e?r(e):r;e.s(["create",()=>i],371352)},730042,e=>{"use strict";var t=e.i(833145);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function r(...e){return t=>{let r=!1,i=e.map(e=>{let i=n(e,t);return r||"function"!=typeof i||(r=!0),i});if(r)return()=>{for(let t=0;t<i.length;t++){let r=i[t];"function"==typeof r?r():n(e[t],null)}}}}function i(...e){return t.useCallback(r(...e),e)}e.s(["composeRefs",()=>r,"useComposedRefs",()=>i])},54203,163904,894756,e=>{"use strict";var t=e.i(430459),n=e.i(833145),r=e.i(730042),i=Symbol.for("react.lazy"),a=n[" use ".trim().toString()];function o(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function s(e){var i;let s,u=(i=e,(s=n.forwardRef((e,t)=>{let{children:i,...s}=e;if(o(i)&&"function"==typeof a&&(i=a(i._payload)),n.isValidElement(i)){var u;let e,a,o=(u=i,(a=(e=Object.getOwnPropertyDescriptor(u.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?u.ref:(a=(e=Object.getOwnPropertyDescriptor(u,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?u.props.ref:u.props.ref||u.ref),l=function(e,t){let n={...t};for(let r in t){let i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...e)=>{let t=a(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...a}:"className"===r&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}(s,i.props);return i.type!==n.Fragment&&(l.ref=t?(0,r.composeRefs)(t,o):o),n.cloneElement(i,l)}return n.Children.count(i)>1?n.Children.only(null):null})).displayName=`${i}.SlotClone`,s),l=n.forwardRef((e,r)=>{let{children:i,...s}=e;o(i)&&"function"==typeof a&&(i=a(i._payload));let l=n.Children.toArray(i),d=l.find(c);if(d){let e=d.props.children,i=l.map(t=>t!==d?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,t.jsx)(u,{...s,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,i):null})}return(0,t.jsx)(u,{...s,ref:r,children:i})});return l.displayName=`${e}.Slot`,l}var u=s("Slot"),l=Symbol("radix.slottable");function c(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}e.s(["Slot",()=>u,"createSlot",()=>s],163904);var d=e.i(534465);let f=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,p=d.clsx,m=(e,t)=>n=>{var r;if((null==t?void 0:t.variants)==null)return p(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(e=>{let t=null==n?void 0:n[e],r=null==a?void 0:a[e];if(null===t)return null;let o=f(t)||f(r);return i[e][o]}),s=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return p(e,o,null==t||null==(r=t.compoundVariants)?void 0:r.reduce((e,t)=>{let{class:n,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...a,...s}[t]):({...a,...s})[t]===n})?[...e,n,r]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)};e.s(["cva",0,m],894756);var h=e.i(255006);let g=m("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function v({className:e,variant:n="default",size:r="default",asChild:i=!1,...a}){return(0,t.jsx)(i?u:"button",{"data-slot":"button","data-variant":n,"data-size":r,className:(0,h.cn)(g({variant:n,size:r,className:e})),...a})}e.s(["Button",()=>v],54203)},860205,e=>{"use strict";let t=(0,e.i(946089).default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>t],860205)},143957,e=>{"use strict";let t=(0,e.i(946089).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);e.s(["Sparkles",()=>t],143957)},282956,e=>{"use strict";e.i(151495);var t=e.i(430459),n=e.i(833145),r=e.i(32848),i=e.i(690946),a=e.i(179813),o=e.i(397951),s=e.i(178509),u=n,l=e.i(9577);function c(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class d extends u.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=(0,s.isHTMLElement)(e)&&e.offsetWidth||0,r=(0,s.isHTMLElement)(e)&&e.offsetHeight||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=n-i.width-i.left,i.bottom=r-i.height-i.top}return null}componentDidUpdate(){}render(){return this.props.children}}function f({children:e,isPresent:r,anchorX:i,anchorY:a,root:o}){let s=(0,u.useId)(),f=(0,u.useRef)(null),p=(0,u.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:m}=(0,u.useContext)(l.MotionConfigContext),h=function(...e){return n.useCallback(function(...e){return t=>{let n=!1,r=e.map(e=>{let r=c(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?n():c(e[t],null)}}}}(...e),e)}(f,e.props?.ref??e?.ref);return(0,u.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:u,right:l,bottom:c}=p.current;if(r||!f.current||!e||!t)return;let d="left"===i?`left: ${u}`:`right: ${l}`,h="bottom"===a?`bottom: ${c}`:`top: ${n}`;f.current.dataset.motionPopId=s;let g=document.createElement("style");m&&(g.nonce=m);let v=o??document.head;return v.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${d}px !important;
            ${h}px !important;
          }
        `),()=>{v.contains(g)&&v.removeChild(g)}},[r]),(0,t.jsx)(d,{isPresent:r,childRef:f,sizeRef:p,children:u.cloneElement(e,{ref:h})})}let p=({children:e,initial:r,isPresent:a,onExitComplete:s,custom:u,presenceAffectsLayout:l,mode:c,anchorX:d,anchorY:p,root:h})=>{let g=(0,i.useConstant)(m),v=(0,n.useId)(),y=!0,b=(0,n.useMemo)(()=>(y=!1,{id:v,initial:r,isPresent:a,custom:u,onExitComplete:e=>{for(let t of(g.set(e,!0),g.values()))if(!t)return;s&&s()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[a,g,s]);return l&&y&&(b={...b}),(0,n.useMemo)(()=>{g.forEach((e,t)=>g.set(t,!1))},[a]),n.useEffect(()=>{a||g.size||!s||s()},[a]),"popLayout"===c&&(e=(0,t.jsx)(f,{isPresent:a,anchorX:d,anchorY:p,root:h,children:e})),(0,t.jsx)(o.PresenceContext.Provider,{value:b,children:e})};function m(){return new Map}var h=e.i(564388);let g=e=>e.key||"";function v(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}let y=({children:e,custom:o,initial:s=!0,onExitComplete:u,presenceAffectsLayout:l=!0,mode:c="sync",propagate:d=!1,anchorX:f="left",anchorY:m="top",root:y})=>{let[b,w]=(0,h.usePresence)(d),x=(0,n.useMemo)(()=>v(e),[e]),E=d&&!b?[]:x.map(g),A=(0,n.useRef)(!0),S=(0,n.useRef)(x),C=(0,i.useConstant)(()=>new Map),R=(0,n.useRef)(new Set),[k,M]=(0,n.useState)(x),[T,O]=(0,n.useState)(x);(0,a.useIsomorphicLayoutEffect)(()=>{A.current=!1,S.current=x;for(let e=0;e<T.length;e++){let t=g(T[e]);E.includes(t)?(C.delete(t),R.current.delete(t)):!0!==C.get(t)&&C.set(t,!1)}},[T,E.length,E.join("-")]);let D=[];if(x!==k){let e=[...x];for(let t=0;t<T.length;t++){let n=T[t],r=g(n);E.includes(r)||(e.splice(t,0,n),D.push(n))}return"wait"===c&&D.length&&(e=D),O(v(e)),M(x),null}let{forceRender:L}=(0,n.useContext)(r.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:T.map(e=>{let n=g(e),r=(!d||!!b)&&(x===T||E.includes(n));return(0,t.jsx)(p,{isPresent:r,initial:(!A.current||!!s)&&void 0,custom:o,presenceAffectsLayout:l,mode:c,root:y,onExitComplete:r?void 0:()=>{if(R.current.has(n)||(R.current.add(n),!C.has(n)))return;C.set(n,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(L?.(),O(S.current),d&&w?.(),u&&u())},anchorX:f,anchorY:m,children:e},n)})})};e.s(["AnimatePresence",()=>y],282956)},69864,e=>{"use strict";e.i(240925);var t=e.i(977031);let n={maxRetries:3,initialDelay:1e3,maxDelay:1e4,factor:2},r=["aborted","deadline-exceeded","resource-exhausted","unavailable","internal"];async function i(e,a={}){let o,{maxRetries:s,initialDelay:u,maxDelay:l,factor:c}={...n,...a},d=u;for(let n=0;n<=s;n++)try{return await e()}catch(e){if(o=e,!(e instanceof t.FirestoreError&&r.includes(e.code))||n===s)break;console.warn(`[Resilience] Falha na opera\xe7\xe3o (tentativa ${n+1}/${s+1}). Erro: ${e.code}. Tentando novamente em ${d}ms...`),await new Promise(e=>setTimeout(e,d)),d=Math.min(d*c,l)}throw console.error("[Resilience] Operação falhou permanentemente após retries.",o),o}e.s(["withResilience",()=>i])},26953,e=>{"use strict";e.i(240925);var t=e.i(977031),n=e.i(597482),r=e.i(69864),i=e.i(587971);async function a(e,r){let i=(0,t.doc)(n.db,"users",e),a=t.Timestamp.now();return await (0,t.setDoc)(i,{...r,credits:10,usage:0,createdAt:a,lastLogin:a}),e}async function o(e,r){let i=(0,t.doc)(n.db,"users",e);await (0,t.updateDoc)(i,{credits:r})}async function s(e){let r=(0,t.doc)(n.db,"users",e),i=await (0,t.getDoc)(r);return i.exists()?{id:i.id,...i.data()}:null}async function u(e){let r=(0,t.doc)(n.db,"users",e);await (0,t.updateDoc)(r,{lastLogin:t.Timestamp.now()})}async function l(e){let r=t.Timestamp.now();return(await (0,t.addDoc)((0,t.collection)(n.db,"funnels"),{...e,status:"draft",createdAt:r,updatedAt:r})).id}async function c(e){let r=(0,t.query)((0,t.collection)(n.db,"funnels"),(0,t.where)("userId","==",e));return(await (0,t.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()})).sort((e,t)=>{let n=e.updatedAt?.seconds||0;return(t.updatedAt?.seconds||0)-n})}async function d(e,i){let a=(0,t.doc)(n.db,"funnels",e);await (0,r.withResilience)(async()=>{await (0,t.updateDoc)(a,{...i,updatedAt:t.Timestamp.now()})})}async function f(e){let r=(0,t.doc)(n.db,"funnels",e);await (0,t.deleteDoc)(r)}async function p(e){let r=t.Timestamp.now(),i=Object.fromEntries(Object.entries(e).filter(([e,t])=>void 0!==t));return(await (0,t.addDoc)((0,t.collection)(n.db,"conversations"),{...i,createdAt:r,updatedAt:r})).id}async function m(e){let r=(0,t.query)((0,t.collection)(n.db,"conversations"),(0,t.where)("userId","==",e),(0,t.limit)(50));return(await (0,t.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()})).sort((e,t)=>{let n=e.updatedAt?.seconds||0;return(t.updatedAt?.seconds||0)-n})}async function h(e,i){let a=(0,t.doc)(n.db,"conversations",e);await (0,r.withResilience)(async()=>{await (0,t.updateDoc)(a,{...i,updatedAt:t.Timestamp.now()})})}async function g(e){let r=(0,t.doc)(n.db,"conversations",e);await (0,t.deleteDoc)(r)}async function v(e,r){let i=await (0,t.addDoc)((0,t.collection)(n.db,"conversations",e,"messages"),{...r,conversationId:e,createdAt:t.Timestamp.now()});return await h(e,{}),i.id}function y(e,r){let i=(0,t.query)((0,t.collection)(n.db,"conversations",e,"messages"),(0,t.orderBy)("createdAt","asc"));return(0,t.onSnapshot)(i,e=>{r(e.docs.map(e=>({id:e.id,...e.data()})))})}async function b(e){let[t,n]=await Promise.all([c(e),m(e)]),r=t.filter(e=>!["completed","killed"].includes(e.status)).length,i=t.filter(e=>"review"===e.status).length;return{activeFunnels:r,pendingEvaluations:i,decisionsThisMonth:t.filter(e=>{let t=e.createdAt.toDate(),n=new Date;return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()&&["approved","killed","adjusting"].includes(e.status)}).length,totalConversations:n.length,performance_benchmarks:[{metric:"CPC Médio",value:"--",benchmark_2026:"R$ 0,50",status:"neutral"},{metric:"CTR Global",value:"--",benchmark_2026:"2.5%",status:"neutral"},{metric:"ROAS Alvo",value:"--",benchmark_2026:"4.0x",status:"neutral"}]}}async function w(e){let r=(0,t.doc)(n.db,"brands",e),i=await (0,t.getDoc)(r);return i.exists()?{id:i.id,...i.data()}:null}async function x(e,r,a){let o=(0,t.doc)(n.db,"tenants",e,"integrations",r),s=t.Timestamp.now(),u={id:r,tenantId:e,provider:r,status:"active",config:(0,i.encryptSensitiveFields)(a),updatedAt:s};return(await (0,t.getDoc)(o)).exists()?await (0,t.updateDoc)(o,u):await (0,t.setDoc)(o,{...u,createdAt:s}),r}async function E(e){let r=(0,t.query)((0,t.collection)(n.db,"tenants",e,"integrations"));return(await (0,t.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()}))}async function A(e){let r=(0,t.doc)(n.db,"campaigns",e),i=await (0,t.getDoc)(r);return i.exists()?{id:i.id,...i.data()}:null}async function S(e,i){let a=(0,t.doc)(n.db,"campaigns",e);return await (0,r.withResilience)(async()=>{await (0,t.setDoc)(a,{...i,updatedAt:t.Timestamp.now()},{merge:!0})})}e.s(["addMessage",()=>v,"createConversation",()=>p,"createFunnel",()=>l,"createUser",()=>a,"deleteConversation",()=>g,"deleteFunnel",()=>f,"getBrand",()=>w,"getCampaign",()=>A,"getIntegrations",()=>E,"getUser",()=>s,"getUserConversations",()=>m,"getUserFunnels",()=>c,"getUserStats",()=>b,"saveIntegration",()=>x,"setCredits",()=>o,"subscribeToMessages",()=>y,"updateCampaignManifesto",()=>S,"updateFunnel",()=>d,"updateUserLastLogin",()=>u])}]);