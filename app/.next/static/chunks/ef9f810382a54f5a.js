(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,708260,e=>{"use strict";var t=e.i(430459),s=e.i(833145),a=e.i(58333),r=e.i(749442),i=e.i(416493),n=e.i(26953),l=e.i(62046),o=e.i(335629),c=e.i(615090),d=e.i(282956),m=e.i(54203),x=e.i(20049),p=e.i(628626),h=e.i(783365),u=e.i(867540),g=e.i(255006),f=e.i(374432),b=e.i(894756),j=e.i(297371);let v=f.Root,N=f.Trigger;f.Close;let w=f.Portal,y=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(f.Overlay,{className:(0,g.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:a}));y.displayName=f.Overlay.displayName;let C=(0,b.cva)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),k=s.forwardRef(({side:e="right",className:s,children:a,...r},i)=>(0,t.jsxs)(w,{children:[(0,t.jsx)(y,{}),(0,t.jsxs)(f.Content,{ref:i,className:(0,g.cn)(C({side:e}),s),...r,children:[a,(0,t.jsxs)(f.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,t.jsx)(j.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));k.displayName=f.Content.displayName,s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(f.Title,{ref:a,className:(0,g.cn)("text-lg font-semibold text-foreground",e),...s})).displayName=f.Title.displayName,s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(f.Description,{ref:a,className:(0,g.cn)("text-sm text-muted-foreground",e),...s})).displayName=f.Description.displayName;var z=e.i(373294);function _({conversations:e,isLoading:s,conversationId:a,isCreating:r,accentColor:i,onNewConversation:n,onSelectConversation:l,onDeleteConversation:o}){let f=(0,z.useMobile)(),b=()=>(0,t.jsxs)("div",{className:"flex h-full flex-col bg-[#0a0a0c] overflow-hidden",children:[(0,t.jsx)("div",{className:"p-4 flex-shrink-0",children:(0,t.jsxs)(m.Button,{onClick:n,disabled:r,className:(0,g.cn)("w-full justify-center h-11 shadow-lg shadow-black/20","indigo"===i?"bg-indigo-500 hover:bg-indigo-400":"amber"===i?"bg-amber-500 hover:bg-amber-400":"btn-accent"),children:[(0,t.jsx)(x.Plus,{className:"mr-2 h-4 w-4"}),"Nova Conversa"]})}),(0,t.jsxs)("div",{className:"flex-1 relative overflow-hidden group/sidebar",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 right-0 h-8 bg-gradient-to-b from-[#0a0a0c] to-transparent z-10 pointer-events-none opacity-0 group-hover/sidebar:opacity-100 transition-opacity"}),(0,t.jsx)("div",{className:"absolute inset-0 overflow-y-auto custom-scrollbar px-3 pb-8 scroll-smooth",children:(0,t.jsx)(d.AnimatePresence,{children:s?(0,t.jsx)("div",{className:"space-y-2 py-2",children:[1,2,3,4,5].map(e=>(0,t.jsx)("div",{className:"h-12 rounded-xl bg-zinc-800/20 animate-pulse border border-white/[0.02]"},e))}):0===e.length?(0,t.jsxs)("div",{className:"px-3 py-12 text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-zinc-900/50 border border-white/[0.05] flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(p.MessageSquare,{className:"h-5 w-5 text-zinc-700"})}),(0,t.jsxs)("p",{className:"text-sm text-zinc-500 font-medium",children:["Inicie sua primeira",(0,t.jsx)("br",{}),"consultoria"]})]}):(0,t.jsx)("div",{className:"space-y-1 py-2",children:e.map(e=>(0,t.jsxs)(c.motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},onClick:()=>l(e.id),className:(0,g.cn)("group flex items-center gap-3 rounded-xl px-3 py-3 cursor-pointer transition-all min-h-[48px] border border-transparent",e.id===a?"indigo"===i?"bg-indigo-500/10 text-white border-indigo-500/20 shadow-sm shadow-indigo-500/5":"amber"===i?"bg-amber-500/10 text-white border-amber-500/20 shadow-sm shadow-amber-500/5":"bg-emerald-500/10 text-white border-emerald-500/20 shadow-sm shadow-emerald-500/5":"text-zinc-500 hover:bg-white/[0.02] hover:text-zinc-300 hover:border-white/[0.05]"),children:[(0,t.jsx)("div",{className:(0,g.cn)("p-1.5 rounded-lg transition-colors",e.id===a?"indigo"===i?"bg-indigo-500/20 text-indigo-400":"amber"===i?"bg-amber-500/20 text-amber-400":"bg-emerald-500/20 text-emerald-400":"bg-zinc-900 text-zinc-600 group-hover:text-zinc-400"),children:(0,t.jsx)(p.MessageSquare,{className:"h-3.5 w-3.5 flex-shrink-0"})}),(0,t.jsx)("span",{className:"flex-1 truncate text-[13px] font-medium tracking-tight",children:e.title}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),o(e.id,t)},className:"p-1.5 opacity-0 group-hover:opacity-100 hover:bg-red-500/10 rounded-lg transition-all","aria-label":"Delete conversation",children:(0,t.jsx)(h.Trash2,{className:"h-3.5 w-3.5 text-zinc-600 hover:text-red-400"})})]},e.id))})})}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-[#0a0a0c] to-transparent z-10 pointer-events-none"})]})]});return f?(0,t.jsxs)(v,{children:[(0,t.jsx)(N,{asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"icon",className:"fixed left-3 top-3.5 z-40 md:hidden h-9 w-9 text-zinc-400 bg-zinc-900/50 backdrop-blur-md border border-white/[0.04] rounded-xl hover:bg-zinc-800",children:(0,t.jsx)(u.Menu,{className:"h-5 w-5"})})}),(0,t.jsx)(k,{side:"left",className:"p-0 w-[280px] bg-[#0a0a0c] border-r border-white/[0.04]",children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)("div",{className:"p-4 border-b border-white/[0.04] bg-[#0d0d0f]",children:(0,t.jsxs)("h2",{className:"text-sm font-bold text-white flex items-center gap-2",children:[(0,t.jsx)(p.MessageSquare,{className:"h-4 w-4 text-emerald-500"}),"HistÃ³rico"]})}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,t.jsx)(b,{})})]})})]}):(0,t.jsx)("div",{className:"w-72 flex-shrink-0 border-r border-white/[0.04] bg-[#0a0a0c] hidden md:flex flex-col h-full",children:(0,t.jsx)(b,{})})}var S=e.i(298072),O=e.i(143957),R=e.i(946089);let E=(0,R.default)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);var A=e.i(151999),T=e.i(587975),P=e.i(651752),D=e.i(860205),I=e.i(311585),M=e.i(439469),U=e.i(167301),L=e.i(451466),F=e.i(602851),$=e.i(720715);let H={general:P.Zap,funnel:D.Target,copy:I.Pencil,social:M.Share2,ads:U.BarChart3,design:L.Palette,party:F.Users};function B({mode:e,onModeChange:s}){return(0,t.jsx)("div",{className:"flex items-center gap-1 p-1 rounded-xl bg-zinc-900/50 border border-white/[0.04] max-w-full overflow-x-auto no-scrollbar",children:Object.entries($.CHAT_MODES).map(([a,r])=>{let i=H[a]||P.Zap,n=e===a;return(0,t.jsxs)("button",{onClick:()=>s(a),className:(0,g.cn)("flex items-center gap-1.5 px-2 py-1.5 sm:px-3 rounded-lg text-xs font-medium transition-all flex-shrink-0",n?"funnel"===a?"bg-indigo-500/20 text-indigo-400":"copy"===a?"bg-amber-500/20 text-amber-400":"social"===a?"bg-rose-500/20 text-rose-400":"design"===a?"bg-purple-500/20 text-purple-400":"party"===a?"bg-fuchsia-500/20 text-fuchsia-400 border border-fuchsia-500/30 shadow-[0_0_10px_rgba(217,70,239,0.1)]":"bg-emerald-500/20 text-emerald-400":"text-zinc-500 hover:text-zinc-300 hover:bg-white/[0.03]"),title:r.label,children:[(0,t.jsx)(i,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{className:(0,g.cn)("hidden xs:inline",n&&"inline"),children:r.label})]},a)})})}var G=e.i(634697);let V=(0,R.default)("sword",[["path",{d:"m11 19-6-6",key:"s7kpr"}],["path",{d:"m5 21-2-2",key:"1kw20b"}],["path",{d:"m8 16-4 4",key:"1oqv8h"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5",key:"pkxemp"}]]),Y=(0,R.default)("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),q=[{name:"Direct Response Masters",ids:["gary_halbert","dan_kennedy_copy","eugene_schwartz"],icon:"âš¡",color:"from-amber-500/20 to-orange-500/20"},{name:"The Big Three (Funnel)",ids:["russell_brunson","frank_kern","ryan_deiss"],icon:"ðŸŽ¯",color:"from-indigo-500/20 to-blue-500/20"},{name:"Social Growth",ids:["justin_welsh","nikita_beer","rachel_karten"],icon:"ðŸš€",color:"from-fuchsia-500/20 to-rose-500/20"}];function W({selectedIds:e,onChange:a,intensity:r,onIntensityChange:i}){let n=e.length>=3,l=(0,s.useMemo)(()=>{let e=Object.values($.COUNSELORS_REGISTRY);return{funnel:e.filter(e=>["russell_brunson","dan_kennedy","frank_kern","sam_ovens","ryan_deiss","perry_belcher"].includes(e.id)),copy:e.filter(e=>["eugene_schwartz","claude_hopkins","gary_halbert","joseph_sugarman","david_ogilvy","john_carlton","drayton_bird","frank_kern_copy","dan_kennedy_copy"].includes(e.id)),social:e.filter(e=>["lia_haberman","rachel_karten","nikita_beer","justin_welsh"].includes(e.id)),ads:e.filter(e=>["justin_brooke","nicholas_kusmich","jon_loomer","savannah_sanchez"].includes(e.id))}},[]);return(0,t.jsxs)(c.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"w-full bg-zinc-950 border border-white/[0.08] rounded-2xl overflow-hidden shadow-2xl mb-4",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-white/[0.04] flex flex-col sm:flex-row sm:items-center justify-between gap-4 bg-white/[0.02]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-fuchsia-500/20 text-fuchsia-400",children:(0,t.jsx)(F.Users,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-black text-white leading-none uppercase tracking-tighter",children:"Alto Conselho"}),(0,t.jsx)("p",{className:"text-[9px] text-zinc-500 mt-1 font-mono uppercase tracking-wider",children:"Selecione atÃ© 3 especialistas"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"hidden lg:flex items-center gap-2 mr-2",children:q.map(e=>(0,t.jsxs)("button",{onClick:()=>{a(e.ids)},className:(0,g.cn)("group relative px-3 py-1.5 rounded-xl border border-white/5 overflow-hidden transition-all hover:border-white/20","bg-gradient-to-br",e.color),children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/5 transition-colors"}),(0,t.jsxs)("span",{className:"relative z-10 text-[10px] font-bold text-zinc-300 group-hover:text-white flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"text-xs",children:e.icon}),e.name]})]},e.name))}),(0,t.jsxs)("div",{className:"flex items-center bg-black/40 rounded-full p-1 border border-white/[0.06]",children:[(0,t.jsxs)("button",{onClick:()=>i("debate"),className:(0,g.cn)("flex items-center gap-1.5 px-3 py-1 rounded-full text-[10px] font-black transition-all","debate"===r?"bg-fuchsia-500 text-white shadow-[0_0_10px_rgba(217,70,239,0.3)]":"text-zinc-500 hover:text-zinc-300"),children:[(0,t.jsx)(V,{className:"h-3 w-3"}),"DEBATE"]}),(0,t.jsxs)("button",{onClick:()=>i("consensus"),className:(0,g.cn)("flex items-center gap-1.5 px-3 py-1 rounded-full text-[10px] font-black transition-all","consensus"===r?"bg-emerald-500 text-white shadow-[0_0_10px_rgba(16,185,129,0.3)]":"text-zinc-500 hover:text-zinc-300"),children:[(0,t.jsx)(Y,{className:"h-3 w-3"}),"CONSENSO"]})]})]})]}),(0,t.jsx)("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 max-h-[400px] overflow-y-auto custom-scrollbar",children:Object.entries(l).map(([s,r])=>(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"text-[10px] font-black text-zinc-600 uppercase tracking-[0.2em] pl-1",children:"funnel"===s?"ðŸ›ï¸ Funil":"copy"===s?"âœï¸ Copy":"social"===s?"ðŸš€ Social":"ðŸ“Š Ads"}),(0,t.jsx)("div",{className:"space-y-2",children:r.map(s=>{let r=e.includes(s.id),i=n&&!r;return(0,t.jsxs)(c.motion.button,{whileHover:i?{}:{scale:1.02},whileTap:i?{}:{scale:.95},onClick:()=>{var t;return t=s.id,void(e.includes(t)?a(e.filter(e=>e!==t)):!n&&a([...e,t]))},disabled:i,className:(0,g.cn)("w-full flex items-center gap-3 p-3 rounded-xl border transition-all text-left group relative overflow-hidden",r?"bg-white/[0.05] border-white/20 shadow-[0_0_20px_rgba(255,255,255,0.05)]":i?"bg-transparent border-transparent opacity-10 grayscale pointer-events-none":"bg-white/[0.02] border-white/[0.05] hover:bg-white/[0.05] hover:border-white/10"),children:[r&&(0,t.jsx)(c.motion.div,{initial:{opacity:0},animate:{opacity:[.1,.2,.1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at center, ${s.color}40, transparent 70%)`}}),(0,t.jsx)("div",{className:(0,g.cn)("h-10 w-10 rounded-lg flex items-center justify-center text-lg transition-all relative z-10",r?"scale-100":"scale-90 group-hover:scale-95"),style:{backgroundColor:r?`${s.color}30`:`${s.color}10`,color:s.color,border:r?`1px solid ${s.color}50`:`1px solid ${s.color}20`},children:r?(0,t.jsx)(c.motion.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:15},children:(0,t.jsx)(G.Check,{className:"h-5 w-5 stroke-[3px]"})}):(0,t.jsx)("span",{children:s.icon})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 relative z-10",children:[(0,t.jsx)("p",{className:(0,g.cn)("text-[12px] font-black tracking-tighter truncate uppercase",r?"text-white":"text-zinc-400 group-hover:text-zinc-200"),children:s.name}),(0,t.jsx)("p",{className:(0,g.cn)("text-[9px] truncate font-mono uppercase tracking-widest mt-0.5",r?"text-white/60":"text-zinc-600 group-hover:text-zinc-500"),children:s.expertise})]}),r&&(0,t.jsx)(c.motion.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-2 right-2",children:(0,t.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-white shadow-[0_0_8px_white] animate-pulse"})})]},s.id)})})]},s))}),(0,t.jsxs)("div",{className:"px-4 py-4 bg-black/80 border-t border-white/[0.06] flex items-center justify-between backdrop-blur-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex -space-x-2",children:[(0,t.jsx)(d.AnimatePresence,{mode:"popover",children:e.map(e=>{let s=$.COUNSELORS_REGISTRY[e];return s?(0,t.jsxs)(c.motion.div,{initial:{scale:0,x:-10},animate:{scale:1,x:0},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:400,damping:25},className:"h-10 w-10 rounded-full border-2 border-zinc-950 flex items-center justify-center text-base shadow-xl relative z-10 group",style:{backgroundColor:s.color,boxShadow:`0 0 20px ${s.color}30`},children:[(0,t.jsx)("span",{className:"group-hover:scale-110 transition-transform",children:s.icon}),(0,t.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 h-3 w-3 rounded-full bg-emerald-500 border-2 border-zinc-950 shadow-[0_0_8px_rgba(16,185,129,0.5)]"})]},e):null})}),0===e.length&&(0,t.jsx)("div",{className:"h-10 w-10 rounded-full border-2 border-dashed border-zinc-800 flex items-center justify-center text-[10px] text-zinc-700 font-black",children:"0/3"})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:(0,g.cn)("text-[10px] font-black uppercase tracking-[0.2em] transition-colors",3===e.length?"text-emerald-400":"text-zinc-500"),children:3===e.length?"Mesa Pronta":"Convocando..."}),(0,t.jsx)("span",{className:"text-[9px] text-zinc-600 font-mono uppercase tracking-widest",children:0===e.length?"Aguardando seleÃ§Ã£o":`${e.length} de 3 estrategistas`})]})]}),e.length>0&&(0,t.jsxs)(c.motion.button,{initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.05,color:"#f87171"},whileTap:{scale:.95},onClick:()=>a([]),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/[0.02] border border-white/5 text-[9px] font-black text-zinc-500 uppercase tracking-[0.2em] transition-all",children:[(0,t.jsx)(j.X,{className:"h-3 w-3"}),"Limpar"]})]})]})}var J=e.i(661776),Z=e.i(619904),K=e.i(274840);e.i(240925);var X=e.i(977031);function Q({onSend:e,isLoading:a,disabled:r=!1,disabledMessage:i,mode:n,onModeChange:m}){let[x,p]=(0,s.useState)(""),[h,u]=(0,s.useState)([]),[f,b]=(0,s.useState)("debate"),[v,N]=(0,s.useState)([]),[w,y]=(0,s.useState)(!1),C=(0,s.useRef)(null),k=(0,s.useRef)(null),z=(0,l.useActiveBrand)(),{user:_}=(0,o.useUser)();(0,s.useEffect)(()=>{y(!0)},[]);let R=$.CHAT_MODES[n],P=R.accentColor,D="party"===n,I=!D||h.length>=3,M=async e=>{if(!e||!z||!_)return;let t=Array.from(e).map(e=>({file:e,id:Math.random().toString(36).substring(7),status:"uploading",progress:0,previewUrl:e.type.startsWith("image/")?URL.createObjectURL(e):void 0}));N(e=>[...e,...t]),t.forEach(async e=>{try{let t=(0,J.validateBrandAssetFile)(e.file);if(!t.valid)throw Error(t.error);let{url:s,metadata:a}=await (0,J.uploadBrandAsset)(e.file,z.id,_.id,t=>{N(s=>s.map(s=>s.id===e.id?{...s,progress:t}:s))});await (0,Z.createAsset)({brandId:z.id,userId:_.id,name:e.file.name,originalName:e.file.name,type:e.file.type.startsWith("image/")?"image":"reference",mimeType:e.file.type,size:e.file.size,url:s,status:"ready",isApprovedForAI:!0,createdAt:X.Timestamp.now(),metadata:{sourceType:e.file.type.startsWith("image/")?"image":"pdf",originalName:e.file.name,isApprovedForAI:!0,extractedAt:new Date().toISOString(),processingMethod:"gemini-vision"}}),N(t=>t.map(t=>t.id===e.id?{...t,status:"analyzing"}:t));let r=await (0,g.fileToBase64)(e.file),i=e.file.type.startsWith("image/")?"Analise esta imagem sob a perspectiva de um estrategista de funis. Identifique elementos de conversÃ£o, copy, design e pontos de melhoria. Seja conciso e direto.":"Analise este documento PDF. Extraia os pontos estratÃ©gicos mais relevantes para um conselho de marketing. Seja conciso.",n=await (0,K.analyzeMultimodalWithGemini)(i,r,e.file.type);N(t=>t.map(t=>t.id===e.id?{...t,status:"ready",insight:n}:t))}catch(t){console.error("Erro ao processar anexo:",t),N(s=>s.map(s=>s.id===e.id?{...s,status:"error",error:t instanceof Error?t.message:"Erro no upload"}:s))}})},U=v.some(e=>"uploading"===e.status||"analyzing"===e.status);(0,s.useEffect)(()=>{D?0===h.length&&u(["russell_brunson","eugene_schwartz","dan_kennedy"]):u([])},[n]);let L=D?h.map(e=>$.COUNSELORS_REGISTRY[e]?.name||e).join(", "):R.counselors.map(e=>$.COUNSELORS_REGISTRY[e]?.name||e).join(", "),F="general"===n?R.footer:D?`ðŸŽ‰ Party: ${L||"Nenhum selecionado"}`:`${R.footer.split(":")[0]}: ${L}`,H=a||w&&r||U,G=!x.trim()&&0===v.length||H||!I,V=()=>{if(!x.trim()&&0===v.length||H||!I)return;let t=x.trim(),s=v.filter(e=>"ready"===e.status&&e.insight);if(s.length>0){let e=s.map(e=>`--- REFER\xcaNCIA ANEXADA: ${e.file.name} ---
${e.insight}`).join("\n\n");t=`[CONTEXTO DE ANEXOS]:
${e}

---

PERGUNTA DO USU\xc1RIO: ${t||"(AnÃ¡lise de referÃªncia enviada)"}`}D?e(t,{selectedAgents:h,intensity:f}):e(t),p(""),N([]),C.current&&(C.current.style.height="auto")};return(0,s.useEffect)(()=>{C.current&&(C.current.style.height="auto",C.current.style.height=`${Math.min(C.current.scrollHeight,200)}px`)},[x]),(0,t.jsx)("div",{className:"border-t border-white/[0.04] bg-[#09090b]/90 backdrop-blur-2xl p-3 sm:p-4 pb-6 sm:pb-4",onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&e.dataTransfer.files.length>0&&M(e.dataTransfer.files)},children:(0,t.jsxs)("div",{className:"mx-auto max-w-3xl space-y-3",children:[(0,t.jsx)(d.AnimatePresence,{children:v.length>0&&(0,t.jsx)(c.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"flex flex-wrap gap-2 pb-1",children:v.map(e=>(0,t.jsxs)(c.motion.div,{className:"relative group flex items-center gap-2 rounded-xl border border-white/[0.06] bg-zinc-900/80 p-1.5 pr-2",children:[(0,t.jsx)("div",{className:"h-8 w-8 rounded-lg overflow-hidden bg-zinc-800 flex items-center justify-center shrink-0",children:e.previewUrl?(0,t.jsx)("img",{src:e.previewUrl,alt:"Preview",className:"h-full w-full object-cover"}):(0,t.jsx)(A.FileText,{className:"h-4 w-4 text-zinc-500"})}),(0,t.jsxs)("div",{className:"flex flex-col min-w-0 pr-1",children:[(0,t.jsx)("span",{className:"text-[10px] text-zinc-300 truncate max-w-[100px] font-medium",children:e.file.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:["uploading"===e.status&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"h-1 w-12 rounded-full bg-zinc-800 overflow-hidden",children:(0,t.jsx)(c.motion.div,{className:"h-full bg-emerald-500",initial:{width:0},animate:{width:`${e.progress}%`}})}),(0,t.jsxs)("span",{className:"text-[8px] text-zinc-500",children:[e.progress,"%"]})]}),"analyzing"===e.status&&(0,t.jsxs)("span",{className:"text-[9px] text-indigo-400 flex items-center gap-1 animate-pulse",children:[(0,t.jsx)(T.Loader2,{className:"h-2.5 w-2.5 animate-spin"})," Analisando..."]}),"ready"===e.status&&(0,t.jsx)("span",{className:"text-[9px] text-emerald-500 font-medium",children:"Pronto"}),"error"===e.status&&(0,t.jsx)("span",{className:"text-[9px] text-red-500 truncate max-w-[80px]",children:e.error})]})]}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void N(e=>{let s=e.filter(e=>e.id!==t),a=e.find(e=>e.id===t);return a?.previewUrl&&URL.revokeObjectURL(a.previewUrl),s})},className:"absolute -top-1.5 -right-1.5 h-4 w-4 rounded-full bg-zinc-900 border border-white/10 flex items-center justify-center text-zinc-400 hover:text-white hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:(0,t.jsx)(j.X,{className:"h-2.5 w-2.5"})})]},e.id))})}),(0,t.jsx)(d.AnimatePresence,{children:"party"===n&&(0,t.jsx)(W,{selectedIds:h,onChange:u,intensity:f,onIntensityChange:b})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)(B,{mode:n,onModeChange:m}),(0,t.jsxs)(c.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>m(D?"general":"party"),className:(0,g.cn)("inline-flex items-center gap-2 rounded-xl px-3 py-2 text-xs font-semibold transition-all border",D?"bg-emerald-500/10 border-emerald-500/40 text-emerald-200 shadow-[0_0_24px_rgba(16,185,129,0.35)]":"bg-zinc-900/60 border-white/5 text-zinc-200 hover:border-white/10"),children:[(0,t.jsx)(O.Sparkles,{className:"h-4 w-4"}),D?"Alto Conselho Ativo":"Invocar Alto Conselho"]})]}),D&&!I&&(0,t.jsx)("p",{className:"text-[11px] text-amber-400 font-medium",children:"Selecione pelo menos 3 especialistas para iniciar o debate."})]}),(0,t.jsxs)("div",{className:(0,g.cn)("relative flex items-end gap-2 sm:gap-3 rounded-2xl border border-white/[0.06] bg-zinc-900/60 p-2 sm:p-3 transition-all duration-300","focus-within:border-white/[0.1] focus-within:bg-zinc-900/80 focus-within:shadow-[0_0_20px_rgba(255,255,255,0.02)]",r&&"border-red-500/50 bg-red-500/5"),children:[(0,t.jsx)("input",{type:"file",ref:k,onChange:e=>M(e.target.files),className:"hidden",multiple:!0,accept:"image/*,application/pdf"}),(0,t.jsx)("button",{type:"button",onClick:()=>k.current?.click(),disabled:H,className:(0,g.cn)("flex h-10 w-10 shrink-0 items-center justify-center rounded-xl transition-all duration-300","text-zinc-500 hover:text-white hover:bg-white/[0.05] disabled:opacity-30"),children:(0,t.jsx)(E,{className:"h-5 w-5"})}),(0,t.jsx)("textarea",{ref:C,value:x,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),V())},placeholder:w&&r?i||"Saldo insuficiente":R.placeholder,disabled:H,rows:1,className:"flex-1 resize-none bg-transparent py-2.5 px-0 text-[16px] sm:text-sm text-white placeholder:text-zinc-600 focus:outline-none disabled:opacity-50 min-h-[44px] sm:min-h-0",style:{maxHeight:"160px"}}),(0,t.jsx)(c.motion.button,{whileHover:H?{}:{scale:1.05},whileTap:H?{}:{scale:.95},onClick:V,disabled:G,className:(0,g.cn)("flex h-10 w-10 sm:h-11 sm:w-11 shrink-0 items-center justify-center rounded-xl transition-all duration-300",(x.trim()||v.length>0)&&!H&&I?"indigo"===P?"bg-indigo-500 text-white hover:bg-indigo-400 shadow-[0_0_15px_rgba(99,102,241,0.3)]":"amber"===P?"bg-amber-500 text-white hover:bg-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.3)]":"blue"===P?"bg-blue-500 text-white hover:bg-blue-400 shadow-[0_0_15px_rgba(59,130,246,0.3)]":"bg-emerald-500 text-white hover:bg-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.3)]":"bg-zinc-800 text-zinc-500"),children:(0,t.jsx)(S.Send,{className:"h-5 w-5"})})]}),(0,t.jsx)("p",{className:"text-center text-[10px] sm:text-xs text-zinc-600 px-4",children:r?"âš ï¸ FaÃ§a upgrade para obter mais crÃ©ditos.":F})]})})}let ee=(0,R.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var et=e.i(913821),es=e.i(151763);let ea=(0,R.default)("gavel",[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]]);var er=e.i(888660),ei=e.i(290876),en=e.i(603873),el=e.i(730042),eo=e.i(614099),ec=e.i(865941),ed=e.i(63751),em=e.i(643380),ex=e.i(674080),ep=e.i(695330),eh=e.i(298802);function eu(e){var a;let r,i=(a=e,(r=s.forwardRef((e,t)=>{let{children:a,...r}=e;if(s.isValidElement(a)){var i;let e,n,l=(i=a,(n=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(n=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),o=function(e,t){let s={...t};for(let a in t){let r=e[a],i=t[a];/^on[A-Z]/.test(a)?r&&i?s[a]=(...e)=>{let t=i(...e);return r(...e),t}:r&&(s[a]=r):"style"===a?s[a]={...r,...i}:"className"===a&&(s[a]=[r,i].filter(Boolean).join(" "))}return{...e,...s}}(r,a.props);return a.type!==s.Fragment&&(o.ref=t?(0,el.composeRefs)(t,l):l),s.cloneElement(a,o)}return s.Children.count(a)>1?s.Children.only(null):null})).displayName=`${a}.SlotClone`,r),n=s.forwardRef((e,a)=>{let{children:r,...n}=e,l=s.Children.toArray(r),o=l.find(ef);if(o){let e=o.props.children,r=l.map(t=>t!==o?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,t.jsx)(i,{...n,ref:a,children:s.isValidElement(e)?s.cloneElement(e,void 0,r):null})}return(0,t.jsx)(i,{...n,ref:a,children:r})});return n.displayName=`${e}.Slot`,n}e.i(751111);var eg=Symbol("radix.slottable");function ef(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===eg}var eb=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let r=eu(`Primitive.${a}`),i=s.forwardRef((e,s)=>{let{asChild:i,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(i?r:a,{...n,ref:s})});return i.displayName=`Primitive.${a}`,{...e,[a]:i}},{}),ej=e.i(261698),ev=e.i(661433),eN=e.i(140118),ew="Popover",[ey,eC]=function(e,a=[]){let r=[],i=()=>{let t=r.map(e=>s.createContext(e));return function(a){let r=a?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return i.scopeName=e,[function(a,i){let n=s.createContext(i),l=r.length;r=[...r,i];let o=a=>{let{scope:r,children:i,...o}=a,c=r?.[e]?.[l]||n,d=s.useMemo(()=>o,Object.values(o));return(0,t.jsx)(c.Provider,{value:d,children:i})};return o.displayName=a+"Provider",[o,function(t,r){let o=r?.[e]?.[l]||n,c=s.useContext(o);if(c)return c;if(void 0!==i)return i;throw Error(`\`${t}\` must be used within \`${a}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=a.reduce((t,{useScope:s,scopeName:a})=>{let r=s(e)[`__scope${a}`];return{...t,...r}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return a.scopeName=t.scopeName,a}(i,...a)]}(ew,[ex.createPopperScope]),ek=(0,ex.createPopperScope)(),[ez,e_]=ey(ew),eS=e=>{let{__scopePopover:a,children:r,open:i,defaultOpen:n,onOpenChange:l,modal:o=!1}=e,c=ek(a),d=s.useRef(null),[m,x]=s.useState(!1),[p,h]=(0,ej.useControllableState)({prop:i,defaultProp:n??!1,onChange:l,caller:ew});return(0,t.jsx)(ex.Root,{...c,children:(0,t.jsx)(ez,{scope:a,contentId:(0,em.useId)(),triggerRef:d,open:p,onOpenChange:h,onOpenToggle:s.useCallback(()=>h(e=>!e),[h]),hasCustomAnchor:m,onCustomAnchorAdd:s.useCallback(()=>x(!0),[]),onCustomAnchorRemove:s.useCallback(()=>x(!1),[]),modal:o,children:r})})};eS.displayName=ew;var eO="PopoverAnchor";s.forwardRef((e,a)=>{let{__scopePopover:r,...i}=e,n=e_(eO,r),l=ek(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=n;return s.useEffect(()=>(o(),()=>c()),[o,c]),(0,t.jsx)(ex.Anchor,{...l,...i,ref:a})}).displayName=eO;var eR="PopoverTrigger",eE=s.forwardRef((e,s)=>{let{__scopePopover:a,...r}=e,i=e_(eR,a),n=ek(a),l=(0,el.useComposedRefs)(s,i.triggerRef),o=(0,t.jsx)(eb.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":eB(i.open),...r,ref:l,onClick:(0,en.composeEventHandlers)(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?o:(0,t.jsx)(ex.Anchor,{asChild:!0,...n,children:o})});eE.displayName=eR;var eA="PopoverPortal",[eT,eP]=ey(eA,{forceMount:void 0}),eD=e=>{let{__scopePopover:s,forceMount:a,children:r,container:i}=e,n=e_(eA,s);return(0,t.jsx)(eT,{scope:s,forceMount:a,children:(0,t.jsx)(eh.Presence,{present:a||n.open,children:(0,t.jsx)(ep.Portal,{asChild:!0,container:i,children:r})})})};eD.displayName=eA;var eI="PopoverContent",eM=s.forwardRef((e,s)=>{let a=eP(eI,e.__scopePopover),{forceMount:r=a.forceMount,...i}=e,n=e_(eI,e.__scopePopover);return(0,t.jsx)(eh.Presence,{present:r||n.open,children:n.modal?(0,t.jsx)(eL,{...i,ref:s}):(0,t.jsx)(eF,{...i,ref:s})})});eM.displayName=eI;var eU=eu("PopoverContent.RemoveScroll"),eL=s.forwardRef((e,a)=>{let r=e_(eI,e.__scopePopover),i=s.useRef(null),n=(0,el.useComposedRefs)(a,i),l=s.useRef(!1);return s.useEffect(()=>{let e=i.current;if(e)return(0,ev.hideOthers)(e)},[]),(0,t.jsx)(eN.RemoveScroll,{as:eU,allowPinchZoom:!0,children:(0,t.jsx)(e$,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,en.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),l.current||r.triggerRef.current?.focus()}),onPointerDownOutside:(0,en.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;l.current=2===t.button||s},{checkForDefaultPrevented:!1}),onFocusOutside:(0,en.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),eF=s.forwardRef((e,a)=>{let r=e_(eI,e.__scopePopover),i=s.useRef(!1),n=s.useRef(!1);return(0,t.jsx)(e$,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(i.current||r.triggerRef.current?.focus(),t.preventDefault()),i.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(i.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let s=t.target;r.triggerRef.current?.contains(s)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),e$=s.forwardRef((e,s)=>{let{__scopePopover:a,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:n,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:m,...x}=e,p=e_(eI,a),h=ek(a);return(0,ec.useFocusGuards)(),(0,t.jsx)(ed.FocusScope,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:n,children:(0,t.jsx)(eo.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:m,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:(0,t.jsx)(ex.Content,{"data-state":eB(p.open),role:"dialog",id:p.contentId,...h,...x,ref:s,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),eH="PopoverClose";function eB(e){return e?"open":"closed"}function eG({...e}){return(0,t.jsx)(eS,{"data-slot":"popover",...e})}function eV({...e}){return(0,t.jsx)(eE,{"data-slot":"popover-trigger",...e})}function eY({className:e,align:s="center",sideOffset:a=4,...r}){return(0,t.jsx)(eD,{children:(0,t.jsx)(eM,{"data-slot":"popover-content",align:s,sideOffset:a,className:(0,g.cn)("bg-popover text-popover-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-hidden",e),...r})})}s.forwardRef((e,s)=>{let{__scopePopover:a,...r}=e,i=e_(eH,a);return(0,t.jsx)(eb.button,{type:"button",...r,ref:s,onClick:(0,en.composeEventHandlers)(e.onClick,()=>i.onOpenChange(!1))})}).displayName=eH,s.forwardRef((e,s)=>{let{__scopePopover:a,...r}=e,i=ek(a);return(0,t.jsx)(ex.Arrow,{...i,...r,ref:s})}).displayName="PopoverArrow";var eq=e.i(779017),eW=e.i(563529),eJ=e.i(634292),eZ=e.i(100655);let eK={russell_brunson:{...$.COUNSELORS.russell_brunson,council:"funnel"},dan_kennedy:{...$.COUNSELORS.dan_kennedy,council:"funnel"},frank_kern:{...$.COUNSELORS.frank_kern,council:"funnel"},sam_ovens:{...$.COUNSELORS.sam_ovens,council:"funnel"},ryan_deiss:{...$.COUNSELORS.ryan_deiss,council:"funnel"},perry_belcher:{...$.COUNSELORS.perry_belcher,council:"funnel"},eugene_schwartz:{name:"Eugene Schwartz",icon:"ðŸŽ¯",color:"#6366f1",expertise:"ConsciÃªncia de Mercado",council:"copy"},claude_hopkins:{name:"Claude Hopkins",icon:"ðŸ”¬",color:"#3b82f6",expertise:"MÃ©todo CientÃ­fico",council:"copy"},gary_halbert:{name:"Gary Halbert",icon:"âš¡",color:"#f59e0b",expertise:"Headlines",council:"copy"},joseph_sugarman:{name:"Joseph Sugarman",icon:"ðŸ“–",color:"#8b5cf6",expertise:"Storytelling",council:"copy"},david_ogilvy:{name:"David Ogilvy",icon:"ðŸ‘”",color:"#64748b",expertise:"Brand Premium",council:"copy"},john_carlton:{name:"John Carlton",icon:"ðŸŽ¤",color:"#ec4899",expertise:"Voz AutÃªntica",council:"copy"},drayton_bird:{name:"Drayton Bird",icon:"âœ‚ï¸",color:"#14b8a6",expertise:"Simplicidade",council:"copy"},copy_consciencia:{name:"Eugene Schwartz",icon:"ðŸŽ¯",color:"#6366f1",expertise:"ConsciÃªncia de Mercado",council:"copy"},copy_headline:{name:"Gary Halbert",icon:"âš¡",color:"#f59e0b",expertise:"Headlines",council:"copy"},copy_oferta:{name:"Dan Kennedy",icon:"ðŸ’°",color:"#10b981",expertise:"Oferta & UrgÃªncia",council:"copy"},copy_fluxo:{name:"John Carlton",icon:"ðŸŽ¤",color:"#ec4899",expertise:"Fluxo Natural",council:"copy"},copy_premium:{name:"David Ogilvy",icon:"ðŸ‘”",color:"#64748b",expertise:"Brand Premium",council:"copy"}};function eX({counselors:e,sources:s,compact:a=!1}){let r=new Set;if(e?.forEach(e=>r.add(e)),s?.forEach(e=>{e.counselor&&r.add(e.counselor)}),0===r.size)return null;let i=Array.from(r).map(e=>eK[e]).filter(Boolean);if(0===i.length)return null;let n=i.filter(e=>"funnel"===e.council),l=i.filter(e=>"copy"===e.council);return a?(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-3",children:i.map((e,s)=>{let a=e.name?.split(" ").pop()||e.name||"Unknown";return(0,t.jsxs)(c.motion.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.05*s},className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs",style:{backgroundColor:`${e.color}15`,color:e.color},children:[(0,t.jsx)("span",{children:e.icon}),(0,t.jsx)("span",{className:"font-medium",children:a})]},(e.name||"counselor")+s)})}):(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/5",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,t.jsx)("span",{className:"text-xs text-zinc-500 font-medium",children:"Conselheiros consultados"})}),(0,t.jsxs)("div",{className:"space-y-2",children:[n.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[(0,t.jsx)("span",{className:"text-[10px] text-zinc-600 uppercase tracking-wider mr-1",children:"Funil:"}),n.map((e,s)=>(0,t.jsxs)(c.motion.span,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.05*s},className:"inline-flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs border cursor-default",style:{backgroundColor:`${e.color}10`,borderColor:`${e.color}30`,color:e.color},title:e.expertise,children:[(0,t.jsx)("span",{children:e.icon}),(0,t.jsx)("span",{className:"font-medium",children:e.name})]},e.name))]}),l.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[(0,t.jsx)("span",{className:"text-[10px] text-zinc-600 uppercase tracking-wider mr-1",children:"Copy:"}),l.map((e,s)=>(0,t.jsxs)(c.motion.span,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.1+.05*s},className:"inline-flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs border cursor-default",style:{backgroundColor:`${e.color}10`,borderColor:`${e.color}30`,color:e.color},title:e.expertise,children:[(0,t.jsx)("span",{children:e.icon}),(0,t.jsx)("span",{className:"font-medium",children:e.name})]},e.name))]})]})]})}function eQ({source:e}){let s=e.file.split(/[/\\]/).pop()?.replace(".md","")||"Documento",a=e.rerankScore||e.similarity||0,r=Math.round(100*a),i="brand_asset"===e.type;return(0,t.jsxs)(eG,{children:[(0,t.jsx)(eV,{asChild:!0,children:(0,t.jsxs)("button",{className:(0,g.cn)("inline-flex items-center gap-1 rounded px-2 py-0.5 text-[10px] transition-all","bg-zinc-800/50 text-zinc-400 hover:bg-zinc-700 hover:text-zinc-200","border border-transparent",i&&"border-emerald-500/30 bg-emerald-500/5 text-emerald-400/90 hover:bg-emerald-500/10"),children:[(0,t.jsx)(A.FileText,{className:"size-3"}),s,a>0&&(0,t.jsxs)("span",{className:(0,g.cn)("text-[9px] opacity-60 ml-0.5",i?"text-emerald-500":"text-zinc-500"),children:[r,"%"]})]})}),(0,t.jsxs)(eY,{side:"top",align:"start",className:"w-80 bg-zinc-900 border-zinc-800 p-0 overflow-hidden shadow-2xl",children:[(0,t.jsxs)("div",{className:"p-3 border-b border-zinc-800 flex items-center justify-between bg-zinc-900/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:(0,g.cn)("p-1.5 rounded",i?"bg-emerald-500/10 text-emerald-500":"bg-zinc-800 text-zinc-400"),children:(0,t.jsx)(A.FileText,{className:"size-3.5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-xs font-semibold text-zinc-200 truncate max-w-[180px]",children:s}),(0,t.jsxs)("p",{className:"text-[9px] text-zinc-500 uppercase tracking-tighter",children:[e.type||"Documento"," ",e.section&&`â€¢ ${e.section}`]})]})]}),(0,t.jsx)("a",{href:"#",className:"text-zinc-500 hover:text-zinc-300 transition-colors",onClick:e=>e.preventDefault(),children:(0,t.jsx)(eJ.ExternalLink,{className:"size-3.5"})})]}),(0,t.jsxs)("div",{className:"p-3 space-y-3",children:[e.content&&(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] text-zinc-500",children:[(0,t.jsx)(eZ.Info,{className:"size-3"}),(0,t.jsx)("span",{children:"Snippet extraÃ­do"})]}),(0,t.jsx)(eW.ScrollArea,{className:"h-24 w-full rounded border border-zinc-800/50 bg-black/20 p-2",children:(0,t.jsxs)("p",{className:"text-[11px] leading-relaxed text-zinc-400 italic",children:['"',e.content.length>300?`${e.content.substring(0,300)}...`:e.content,'"']})})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-zinc-500",children:[(0,t.jsx)(D.Target,{className:"size-3"}),(0,t.jsx)("span",{children:"RelevÃ¢ncia Contextual"})]}),(0,t.jsxs)("span",{className:(0,g.cn)("font-mono font-medium",a>.8?"text-emerald-500":"text-zinc-400"),children:[r,"%"]})]}),(0,t.jsx)(eq.Progress,{value:r,className:"h-1 bg-zinc-800",indicatorClassName:(0,g.cn)(a>.8?"bg-emerald-500":"bg-zinc-500")})]}),e.counselor&&(0,t.jsxs)("div",{className:"pt-1 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[9px] text-zinc-600 uppercase tracking-wider",children:"Associado a:"}),(0,t.jsxs)("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded bg-zinc-800/50 border border-zinc-700/50",children:[(0,t.jsx)("span",{className:"text-[10px]",children:eK[e.counselor]?.icon}),(0,t.jsx)("span",{className:"text-[10px] text-zinc-400 font-medium",children:eK[e.counselor]?.name.split(" ").pop()})]})]})]})]})]})}function e0({sources:e}){if(!e||0===e.length)return null;let s=e.map(e=>"string"==typeof e?{file:e}:e).filter(e=>e?.file);return 0===s.length?null:(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap gap-1.5 items-center",children:[(0,t.jsx)("span",{className:"text-xs text-zinc-600 font-medium mr-0.5",children:"Fontes:"}),s.slice(0,6).map((e,s)=>(0,t.jsx)(eQ,{source:e},s)),s.length>6&&(0,t.jsxs)("span",{className:"text-[10px] text-zinc-500 ml-1",children:["+",s.length-6," mais"]})]})}var e1=e.i(237938),e5=e.i(182492),e2=e.i(263838),e4=e.i(569995),e3=e.i(43048),e6=e.i(431342);function e8({data:e}){let[a,r]=(0,s.useState)(null);console.log("[AssetPreview] Build Version: 11.24.4 (Ultra-Resilient Parser Active)");let i=(e=>{if(!e)return null;if(e.strategy?.summary||e.strategy?.steps)return e;let t={strategy:{summary:e.strategy?.summary||e.funnel_strategy?.summary||e.summary||"EstratÃ©gia Sugerida",rationale:e.strategy?.rationale||e.funnel_strategy?.rationale||e.rationale||"",steps:e.strategy?.steps||e.funnel_strategy?.steps||e.steps||e.estrategias_aumento_ltv||[]},market_data:e.market_data||e.data||[],assets:e.assets||[]};return(t.strategy&&!t.strategy.summary&&t.strategy.steps&&t.strategy.steps.length>0&&(t.strategy.summary="EstratÃ©gia Detalhada"),t.strategy?.summary||t.strategy?.steps&&0!==t.strategy.steps.length)?t:null})(e);return i?(0,t.jsxs)("div",{className:"mt-6 space-y-8 animate-in-up",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-emerald-400 font-semibold uppercase tracking-wider text-xs",children:[(0,t.jsx)(e4.Lightbulb,{className:"h-4 w-4"}),"EstratÃ©gia Recomendada"]}),(0,t.jsxs)(e3.Card,{className:"card-premium p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:i.strategy.summary}),i.strategy.rationale&&(0,t.jsx)("p",{className:"text-zinc-400 text-sm mb-4 leading-relaxed",children:i.strategy.rationale}),(0,t.jsx)("div",{className:"space-y-2",children:i.strategy.steps?.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-3 text-zinc-300 text-sm",children:[(0,t.jsx)("div",{className:"mt-1 flex-shrink-0 w-5 h-5 rounded-full bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center text-[10px] font-bold text-emerald-400",children:s+1}),(0,t.jsx)("span",{children:"string"==typeof e?e:JSON.stringify(e)})]},s))})]})]}),i.market_data&&i.market_data.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-emerald-400 font-semibold uppercase tracking-wider text-xs",children:[(0,t.jsx)(U.BarChart3,{className:"h-4 w-4"}),"Benchmarks de 2026"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.market_data.map((e,s)=>(0,t.jsxs)(e3.Card,{className:"card-premium card-hover p-5 flex flex-col justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("span",{className:"text-zinc-500 text-xs font-medium uppercase tracking-tight",children:e.label}),(0,t.jsx)(e6.Badge,{className:(0,g.cn)("text-[10px] font-bold uppercase","success"===e.status?"badge-success":"warning"===e.status?"badge-warning":"danger"===e.status?"badge-error":"bg-zinc-800"),children:e.status})]}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsxs)("span",{className:"stat-value text-2xl",children:[e.value,"%"===e.unit?"%":""]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-[10px] text-zinc-500",children:[(0,t.jsx)(er.ArrowRight,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:["Meta 2026: ",e.benchmark_2026,"%"===e.unit?"%":""]})]})]})]}),(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-white/[0.04] text-[10px] text-zinc-600 italic",children:e.source_context})]},s))})]}),e.assets&&e.assets.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-emerald-400 font-semibold uppercase tracking-wider text-xs",children:[(0,t.jsx)(P.Zap,{className:"h-4 w-4"}),"Ativos Prontos para Uso"]}),(0,t.jsx)("div",{className:"space-y-4",children:e.assets.map((e,s)=>(0,t.jsx)("div",{className:"group relative",children:(0,t.jsxs)(e3.Card,{className:"card-premium p-0 overflow-hidden border-white/[0.06] hover:border-emerald-500/30 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-white/[0.02] border-b border-white/[0.04]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"p-1.5 rounded-md bg-emerald-500/10 text-emerald-400",children:(e=>{switch(e){case"DM_SCRIPT":return(0,t.jsx)(p.MessageSquare,{className:"h-4 w-4"});case"STORY_SEQUENCE":return(0,t.jsx)(e5.Layers,{className:"h-4 w-4"});case"AD_COPY":return(0,t.jsx)(e2.Megaphone,{className:"h-4 w-4"});case"HOOK":return(0,t.jsx)(P.Zap,{className:"h-4 w-4"});default:return(0,t.jsx)(A.FileText,{className:"h-4 w-4"})}})(e.type)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-bold text-zinc-200",children:e.title}),(0,t.jsx)("span",{className:"text-[10px] text-zinc-500 uppercase tracking-widest",children:e.type})]})]}),(0,t.jsx)(m.Button,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1.5 text-xs text-zinc-400 hover:text-emerald-400 hover:bg-emerald-500/10",onClick:()=>{var t;return t=e.content,void(navigator.clipboard.writeText(t),r(s),setTimeout(()=>r(null),2e3))},children:a===s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G.Check,{className:"h-3.5 w-3.5"}),"Copiado"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(es.Copy,{className:"h-3.5 w-3.5"}),"Copiar Script"]})})]}),(0,t.jsx)("div",{className:"p-4 bg-zinc-950/30",children:(0,t.jsx)("pre",{className:"text-xs sm:text-sm text-zinc-300 whitespace-pre-wrap font-mono leading-relaxed",children:e.content})}),(0,t.jsxs)("div",{className:"px-4 py-2 bg-white/[0.01] text-[10px] text-zinc-600 flex justify-between items-center",children:[(0,t.jsxs)("span",{children:["ReferÃªncia: ",e.counselor_reference]}),(0,t.jsxs)("span",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)(G.Check,{className:"h-3 w-3 text-emerald-500"})," Pronto para disparar"]})]})]})},s))})]})]}):(console.warn("[AssetPreview] Payload da IA nÃ£o pÃ´de ser normalizado. Chaves encontradas:",Object.keys(e||{})),null)}function e9({message:e,index:a,campaignId:r}){let i,[n,l]=(0,s.useState)(!1),o="user"===e.role,d=o?[]:(e=>{if(!e.includes("[NANOBANANA_PROMPT]"))return[];let t=[],s="[NANOBANANA_PROMPT]";try{let a=0;for(;-1!==(a=e.indexOf(s,a));){let r=e.indexOf("{",a);if(-1===r){a+=s.length;continue}let i=0,n=!1,l=!1,o=null;for(let t=r;t<e.length;t++){let s=e[t];if(l){l=!1;continue}if("\\"===s){l=!0;continue}if('"'===s){n=!n;continue}if(!n){if("{"===s)i++;else if("}"===s&&(i--,0===i)){o=e.substring(r,t+1),a=t+1;break}}}if(o)try{let e=o.replace(/```json/g,"").replace(/```/g,"").replace(/,\s*([}\]])/g,"$1").replace(/(\r\n|\n|\r)/gm," "),s=JSON.parse(e);(s.visualPrompt||s.prompt)&&t.push(s)}catch(a){console.warn("Falha ao parsear bloco extraÃ­do:",o);let e=(e,t)=>{let s=RegExp(`"${e}"\\s*:\\s*"([\\s\\S]*?)"(?=\\s*[,}])`),a=t.match(s);return a?a[1].trim():null},s=e("visualPrompt",o)||e("prompt",o);s&&t.push({platform:e("platform",o)||"universal",format:e("format",o)||"square",safeZone:e("safeZone",o)||"feed",visualPrompt:s.replace(/\\"/g,'"'),prompt:s.replace(/\\"/g,'"'),aspectRatio:e("aspectRatio",o)||"1:1"})}else a+=s.length}}catch(e){console.warn("Erro geral na detecÃ§Ã£o de prompts NanoBanana.",e)}return t})(e.content),m=o?null:(e=>{let t="[COUNCIL_OUTPUT]:";if(!e.includes(t))return null;try{let s=e.indexOf(t),a=e.indexOf("{",s);if(-1===a)return null;let r=0,i=!1,n=!1,l=null;for(let t=a;t<e.length;t++){let s=e[t];if(n){n=!1;continue}if("\\"===s){n=!0;continue}if('"'===s){i=!i;continue}if(!i){if("{"===s)r++;else if("}"===s&&(r--,0===r)){l=e.substring(a,t+1);break}}}if(l){let e=l.replace(/,\s*([}\]])/g,"$1").replace(/(\r\n|\n|\r)/gm," ");return JSON.parse(e)}}catch(e){console.warn("Council output found but could not be parsed as valid JSON.",e)}return null})(e.content),x=o?[]:function(e){let t=[],s=e.split("\n"),a=null;for(let e=0;e<s.length;e++){let r=s[e];if(r.includes("### ðŸŽ™ï¸ DeliberaÃ§Ã£o do Conselho")){a&&t.push(a),t.push({type:"header",content:r.trim()}),a=null;continue}if(r.includes("### âš–ï¸ Veredito do Moderador")||r.includes("### âš–ï¸ Veredito")||r.includes("### âš–ï¸ Veredito do Conselho")||r.includes("[VEREDITO_DO_CONSELHO]")||r.includes("### âš–ï¸ Veredito do Conselho")){a&&t.push(a),a={type:"verdict",content:""};continue}let i=r.match(/\*\*\[(.*?)\]\*\*:\s*(.*)/);if(i){a&&t.push(a);let e=i[1],s=i[2];a={type:"agent",agentId:Object.keys($.COUNSELORS_REGISTRY).find(t=>$.COUNSELORS_REGISTRY[t].name.toUpperCase()===e.toUpperCase()),agentName:e,content:s+"\n"};continue}if("---"===r.trim()){a&&t.push(a),a=null;continue}a?a.content+=r+"\n":""!==r.trim()&&(a={type:"text",content:r+"\n"})}return a&&t.push(a),t.map(e=>{let t=e.content.trim();return{...e,content:t,mentions:"agent"===e.type?function(e,t){let s=new Set;for(let a of Object.values($.COUNSELORS_REGISTRY)){if(a.id===t)continue;let r=a.name.split(" "),i=r[r.length-1];RegExp(`\\b(${a.name}|${i})\\b`,"gi").test(e)&&s.add(a.id)}return Array.from(s)}(t,e.agentId):void 0}}).filter(e=>""!==e.content||"header"===e.type)}(e.content),p=o?[]:(i=[],x.forEach(e=>{"agent"===e.type&&e.agentId&&e.mentions&&e.mentions.length>0&&i.push({from:e.agentId,to:e.mentions})}),i);return(0,t.jsxs)(c.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.03*a},className:(0,g.cn)("group flex gap-3 sm:gap-4 px-3 sm:px-6 py-4 sm:py-5 border-b border-white/[0.02]",o?"bg-transparent":"bg-white/[0.01]"),children:[(0,t.jsx)("div",{className:"flex-shrink-0 pt-0.5",children:o?(0,t.jsx)("div",{className:"flex h-6 w-6 sm:h-8 sm:w-8 items-center justify-center rounded-lg bg-zinc-800 text-sm font-medium text-zinc-300 shadow-sm",children:(0,t.jsx)(et.User,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}):(0,t.jsx)("div",{className:"flex h-6 w-6 sm:h-8 sm:w-8 items-center justify-center rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 shadow-lg shadow-emerald-500/10",children:(0,t.jsx)(ee,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-white"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"flex items-center justify-between gap-2 mb-1 sm:mb-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[13px] sm:text-sm font-semibold text-zinc-300",children:o?"VocÃª":"Conselho"}),e.createdAt&&(0,t.jsx)("span",{className:"text-[10px] sm:text-xs text-zinc-600 font-medium",children:e.createdAt.toDate?.().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})}),(0,t.jsx)("div",{className:"text-[15px] sm:text-base leading-relaxed text-zinc-200",children:o?(0,t.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}):(0,t.jsxs)("div",{className:"space-y-4",children:[p.length>0&&(0,t.jsxs)("div",{className:"mb-6 flex flex-wrap items-center gap-y-2 gap-x-3 p-3 rounded-xl bg-white/[0.02] border border-white/[0.05] shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] text-zinc-500 font-bold uppercase tracking-widest border-r border-white/10 pr-3",children:[(0,t.jsx)(M.Share2,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:"Fluxo de Debate"})]}),(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:p.map((e,s)=>{let a=$.COUNSELORS_REGISTRY[e.from];return(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"text-xs",title:a.name,children:a.icon}),(0,t.jsx)(er.ArrowRight,{className:"h-2 w-2 text-zinc-600"}),(0,t.jsx)("div",{className:"flex -space-x-1",children:e.to.map(e=>{let s=$.COUNSELORS_REGISTRY[e];return(0,t.jsx)("span",{className:"text-xs",title:s.name,children:s.icon},e)})}),s<p.length-1&&(0,t.jsx)("div",{className:"h-3 w-px bg-white/10 mx-1"})]},s)})})]}),x.length>0?x.map((e,s)=>{if("header"===e.type)return(0,t.jsx)("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4 border-b border-white/10 pb-2",children:e.content.replace("###","").trim()},s);if("agent"===e.type){let a=e.agentId?$.COUNSELORS_REGISTRY[e.agentId]:null,r=a?.color||"#10b981",i=a?.icon||"ðŸ’¬";return(0,t.jsxs)("div",{className:"relative group/agent pl-4 border-l-2",style:{borderLeftColor:r},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-lg",children:i}),(0,t.jsx)("span",{className:"font-bold text-sm uppercase tracking-wider",style:{color:r},children:e.agentName})]}),e.mentions&&e.mentions.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 opacity-60 group-hover/agent:opacity-100 transition-opacity",children:[(0,t.jsx)("div",{className:"flex -space-x-2",children:e.mentions.map(e=>{let s=$.COUNSELORS_REGISTRY[e];return(0,t.jsx)("div",{className:"h-5 w-5 rounded-full bg-zinc-900 border border-white/10 flex items-center justify-center text-[10px]",title:`Citando ${s?.name}`,children:s?.icon},e)})}),(0,t.jsx)(M.Share2,{className:"h-3 w-3 text-zinc-500"})]})]}),(0,t.jsx)(ei.MarkdownRenderer,{content:e.content,components:{strong:({node:e,...s})=>{let a=s.children?.toString()||"",r=Object.values($.COUNSELORS_REGISTRY).find(e=>a.includes(e.name)||a.toUpperCase()===e.name.toUpperCase());return r?(0,t.jsxs)("span",{className:"px-1.5 py-0.5 rounded bg-white/5 border border-white/10 text-xs font-bold inline-flex items-center gap-1 mx-0.5 group/mention cursor-default",style:{color:r.color},children:[(0,t.jsx)("span",{className:"group-hover/mention:scale-110 transition-transform",children:r.icon}),a,(0,t.jsx)(er.ArrowRight,{className:"h-2 w-2 opacity-0 -ml-1 group-hover/mention:opacity-100 transition-all"})]}):(0,t.jsx)("strong",{className:"text-white font-semibold",...s})}}}),e.mentions&&e.mentions.length>0&&(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-[10px] text-zinc-500 font-medium",children:[(0,t.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-white/5 to-transparent"}),(0,t.jsx)("span",{className:"uppercase tracking-tighter opacity-50",children:"Cross-Reference Flow"}),(0,t.jsx)("div",{className:"h-px flex-1 bg-gradient-to-l from-white/5 to-transparent"})]})]},s)}return"verdict"===e.type?(0,t.jsx)("div",{className:"mt-6 relative overflow-hidden p-0.5 rounded-xl bg-gradient-to-r from-emerald-500 via-blue-500 to-purple-500 animate-gradient-x shadow-lg shadow-emerald-500/10",children:(0,t.jsxs)("div",{className:"bg-zinc-900/95 backdrop-blur-sm p-4 rounded-[10px] h-full w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)("div",{className:"p-1.5 rounded-lg bg-emerald-500/20 text-emerald-400",children:(0,t.jsx)(ea,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-blue-400 uppercase tracking-wider text-sm",children:"Veredito do Conselho"})]}),(0,t.jsx)(ei.MarkdownRenderer,{content:e.content.replace("[VEREDITO_DO_CONSELHO]","").trim(),className:"prose-p:text-zinc-100 prose-p:font-medium"})]})},s):(0,t.jsx)(ei.MarkdownRenderer,{content:e.content},s)}):(0,t.jsx)(ei.MarkdownRenderer,{content:e.content}),d.length>0&&(0,t.jsxs)("div",{className:"space-y-4 mt-4 border-t border-purple-500/10 pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(O.Sparkles,{className:"h-4 w-4 text-purple-400"}),(0,t.jsx)("span",{className:"text-xs font-bold text-purple-300 uppercase tracking-wider",children:"AÃ§Ãµes de Design DisponÃ­veis"})]}),(0,t.jsx)("div",{className:"space-y-3",children:d.map((s,a)=>(0,t.jsx)(e1.DesignGenerationCard,{promptData:s,conversationId:e.id,campaignId:r},`${e.id}-design-${a}`))})]}),m&&(0,t.jsx)(e8,{data:m})]})}),!o&&(e.metadata?.counselors||e.metadata?.sources)&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(eX,{counselors:e.metadata.counselors,sources:e.metadata.sources,compact:!0})}),!o&&e.metadata?.sources&&e.metadata.sources.length>0&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(e0,{sources:e.metadata.sources})}),!o&&(0,t.jsx)("div",{className:"mt-3 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(e.content),l(!0),setTimeout(()=>l(!1),2e3)},className:"flex items-center gap-1.5 h-8 px-2 -ml-2 rounded-lg text-xs text-zinc-500 hover:text-zinc-300 hover:bg-white/[0.03] transition-colors",children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G.Check,{className:"h-3.5 w-3.5"}),"Copiado"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(es.Copy,{className:"h-3.5 w-3.5"}),"Copiar"]})})})]})]})}function e7({messages:e,isSending:s,accentColor:a,campaignId:r}){return(0,t.jsxs)("div",{className:"flex flex-col w-full pb-32",children:[e.map((e,s)=>(0,t.jsx)(e9,{message:e,index:s,campaignId:r},e.id)),s&&(0,t.jsxs)(c.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-4 px-6 py-5 bg-white/[0.01]",children:[(0,t.jsx)("div",{className:(0,g.cn)("flex h-8 w-8 items-center justify-center rounded-lg","indigo"===a?"bg-gradient-to-br from-indigo-500 to-indigo-600":"amber"===a?"bg-gradient-to-br from-amber-500 to-amber-600":"bg-gradient-to-br from-emerald-500 to-emerald-600"),children:(0,t.jsx)(ee,{className:"h-4 w-4 text-white"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 justify-center",children:[(0,t.jsx)("span",{className:"text-[10px] uppercase tracking-wider font-bold text-zinc-500 animate-pulse",children:"Consultando Contexto..."}),(0,t.jsx)("div",{className:"flex items-center gap-1.5",children:[0,.2,.4].map(e=>(0,t.jsx)(c.motion.div,{animate:{scale:[1,1.2,1]},transition:{duration:.6,repeat:1/0,delay:e},className:(0,g.cn)("h-1.5 w-1.5 rounded-full","indigo"===a?"bg-indigo-500/50":"amber"===a?"bg-amber-500/50":"bg-emerald-500/50")},e))})]})]})]})}function te({onSuggestionClick:e,mode:s}){let a="funnel"===s?["Como estruturar um funil de quiz?","Minha taxa de conversÃ£o estÃ¡ baixa","Qual tipo de funil para high ticket?","Como aplicar a Value Ladder?"]:"copy"===s?["Como criar headlines que convertem?","Qual copy para audiÃªncia fria?","Como estruturar uma oferta irresistÃ­vel?","Me ajude com uma sequÃªncia de emails"]:"social"===s?["Como viralizar no TikTok em 2025?","Ideias de hooks para Reels de 15s","Como converter seguidores em leads?","EstratÃ©gia de conteÃºdo para LinkedIn"]:"ads"===s?["Qual o melhor criativo para Meta Ads?","Como baixar o CPA no TikTok?","EstratÃ©gia de escala para $10k/dia","Como evitar bloqueios no Facebook?"]:"design"===s?["Como estruturar uma thumbnail de YouTube?","Briefing para carrossel do Instagram","Crie um prompt de criativo estÃ¡tico","Checklist de design para conversÃ£o"]:["Como criar urgÃªncia sem ser apelativo?","Como qualificar leads no topo do funil?","Preciso melhorar meu VSL script","Como aumentar o LTV dos clientes?"],r="funnel"===s?"indigo":"copy"===s?"amber":"social"===s?"rose":"ads"===s?"blue":"design"===s?"purple":"emerald";return(0,t.jsx)("div",{className:"flex h-full flex-col items-center justify-center p-4 sm:p-8",children:(0,t.jsxs)(c.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4},className:"text-center max-w-2xl",children:[(0,t.jsxs)("div",{className:"relative mx-auto mb-4 sm:mb-8 scale-90 sm:scale-100",children:[(0,t.jsx)("div",{className:(0,g.cn)("absolute inset-0 rounded-3xl blur-2xl opacity-40","indigo"===r?"bg-indigo-500/20":"amber"===r?"bg-amber-500/20":"rose"===r?"bg-rose-500/20":"blue"===r?"bg-blue-500/20":"purple"===r?"bg-purple-500/20":"bg-emerald-500/20")}),(0,t.jsx)("div",{className:(0,g.cn)("relative flex h-16 w-16 sm:h-20 sm:w-20 items-center justify-center rounded-2xl sm:rounded-3xl shadow-xl mx-auto","indigo"===r?"bg-gradient-to-br from-indigo-500 to-indigo-600 shadow-indigo-500/20":"amber"===r?"bg-gradient-to-br from-amber-500 to-amber-600 shadow-amber-500/20":"rose"===r?"bg-gradient-to-br from-rose-500 to-rose-600 shadow-rose-500/20":"blue"===r?"bg-gradient-to-br from-blue-500 to-blue-600 shadow-blue-500/20":"purple"===r?"bg-gradient-to-br from-purple-500 to-purple-600 shadow-purple-500/20":"bg-gradient-to-br from-emerald-500 to-emerald-600 shadow-emerald-500/20"),children:(0,t.jsx)(ee,{className:"h-8 w-8 sm:h-10 sm:w-10 text-white"})})]}),(0,t.jsx)("h2",{className:"text-lg sm:text-2xl font-bold text-white mb-2 sm:mb-3",children:$.CHAT_MODES[s].title}),(0,t.jsxs)("p",{className:"text-xs sm:text-base text-zinc-500 mb-6 sm:mb-8 leading-relaxed px-6 sm:px-4",children:["funnel"===s&&`Consulte especialistas em arquitetura de funil, qualifica\xe7\xe3o, LTV e monetiza\xe7\xe3o.`,"copy"===s&&`Consulte copywriters lend\xe1rios sobre headlines, persuas\xe3o, ofertas e estrutura.`,"social"===s&&`Consulte especialistas em redes sociais e viraliza\xe7\xe3o.`,"ads"===s&&`Consulte especialistas em tr\xe1fego pago, escala e otimiza\xe7\xe3o de campanhas.`,"design"===s&&`Consulte o Diretor de Design para criar briefings visuais e prompts de alta convers\xe3o.`,"general"===s&&`Pergunte sobre funis, ofertas, copy e estrat\xe9gias de growth.`]}),(0,t.jsx)("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-2 mb-8 px-4 sm:px-0 max-w-lg mx-auto",children:a.map((s,a)=>(0,t.jsxs)(c.motion.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1+.05*a},onClick:()=>e(s),className:(0,g.cn)("flex items-center gap-2 rounded-xl border px-3 py-2.5 sm:px-4 sm:py-3 text-[13px] sm:text-sm text-zinc-300 transition-all text-left","indigo"===r?"border-white/[0.04] bg-white/[0.01] hover:border-indigo-500/30 hover:bg-indigo-500/5":"amber"===r?"border-white/[0.04] bg-white/[0.01] hover:border-amber-500/30 hover:bg-amber-500/5":"rose"===r?"border-white/[0.04] bg-white/[0.01] hover:border-rose-500/30 hover:bg-rose-500/5":"border-white/[0.04] bg-white/[0.01] hover:border-emerald-500/30 hover:bg-emerald-500/5"),children:[(0,t.jsx)(O.Sparkles,{className:(0,g.cn)("h-3.5 w-3.5 shrink-0 opacity-70","indigo"===r?"text-indigo-400":"amber"===r?"text-amber-400":"rose"===r?"text-rose-400":"text-emerald-400")}),(0,t.jsx)("span",{className:"line-clamp-1",children:s})]},s))}),(0,t.jsxs)("div",{className:"hidden sm:block space-y-4",children:["funnel"===s&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-zinc-600 uppercase tracking-wider mb-2",children:"Conselho de Funil"}),(0,t.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:$.CHAT_MODES.funnel.counselors.map((e,s)=>{let a=$.COUNSELORS_REGISTRY[e];return a?(0,t.jsxs)(c.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.5+.05*s},className:"flex items-center gap-1.5 rounded-full bg-zinc-800/50 px-3 py-1.5",title:a.expertise,children:[(0,t.jsx)("span",{className:"text-sm",children:a.icon}),(0,t.jsx)("span",{className:"text-xs text-zinc-400",children:a.name.split(" ").slice(-1)[0]})]},e):null})})]}),"copy"===s&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-zinc-600 uppercase tracking-wider mb-2",children:"Conselho de Copy"}),(0,t.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:$.CHAT_MODES.copy.counselors.map((e,s)=>{let a=$.COUNSELORS_REGISTRY[e];return a?(0,t.jsxs)(c.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.7+.05*s},className:"flex items-center gap-1.5 rounded-full bg-zinc-800/50 px-3 py-1.5",title:a.expertise,children:[(0,t.jsx)("span",{className:"text-sm",children:a.icon}),(0,t.jsx)("span",{className:"text-xs text-zinc-400",children:a.name.split(" ").slice(-1)[0]})]},e):null})})]}),"social"===s&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-zinc-600 uppercase tracking-wider mb-2",children:"Conselho Social"}),(0,t.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:$.CHAT_MODES.social.counselors.map((e,s)=>{let a=$.COUNSELORS_REGISTRY[e];return a?(0,t.jsxs)(c.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.5+.05*s},className:"flex items-center gap-1.5 rounded-full bg-zinc-800/50 px-3 py-1.5",title:a.expertise,children:[(0,t.jsx)("span",{className:"text-sm",children:a.icon}),(0,t.jsx)("span",{className:"text-xs text-zinc-400",children:a.name.split(" ").slice(-1)[0]})]},e):null})})]}),"ads"===s&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-zinc-600 uppercase tracking-wider mb-2",children:"Conselho de Ads"}),(0,t.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:$.CHAT_MODES.ads.counselors.map((e,s)=>{let a=$.COUNSELORS_REGISTRY[e];return a?(0,t.jsxs)(c.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.5+.05*s},className:"flex items-center gap-1.5 rounded-full bg-zinc-800/50 px-3 py-1.5",title:a.expertise,children:[(0,t.jsx)("span",{className:"text-sm",children:a.icon}),(0,t.jsx)("span",{className:"text-xs text-zinc-400",children:a.name.split(" ").slice(-1)[0]})]},e):null})})]}),"design"===s&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-zinc-600 uppercase tracking-wider mb-2",children:"Diretor de Design"}),(0,t.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:$.CHAT_MODES.design.counselors.map((e,s)=>{let a=$.COUNSELORS_REGISTRY[e];return a?(0,t.jsxs)(c.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.5+.05*s},className:"flex items-center gap-1.5 rounded-full bg-zinc-800/50 px-3 py-1.5",title:a.expertise,children:[(0,t.jsx)("span",{className:"text-sm",children:a.icon}),(0,t.jsx)("span",{className:"text-xs text-zinc-400",children:a.name})]},e):null})})]}),"general"===s&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-zinc-600 uppercase tracking-wider mb-2",children:"23 Especialistas do Conselho"}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-center gap-2 px-12",children:[["russell_brunson","dan_kennedy","frank_kern","eugene_schwartz","gary_halbert","savannah_sanchez","design_director"].map((e,s)=>{let a=$.COUNSELORS_REGISTRY[e];return a?(0,t.jsxs)(c.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.5+.05*s},className:"flex items-center gap-1.5 rounded-full bg-zinc-800/50 px-3 py-1.5",title:a.expertise,children:[(0,t.jsx)("span",{className:"text-sm",children:a.icon}),(0,t.jsx)("span",{className:"text-xs text-zinc-400",children:"design_director"===e?"Design":a.name.split(" ").slice(-1)[0]})]},e):null}),(0,t.jsx)("div",{className:"flex items-center gap-1.5 rounded-full bg-emerald-500/10 px-3 py-1.5 border border-emerald-500/20",children:(0,t.jsx)("span",{className:"text-xs text-emerald-400",children:"+16 experts"})})]})]})]})]})})}var tt=e.i(903679),ts=e.i(2528),ta=e.i(91435),tr=e.i(82238),ti=e.i(808940);let tn=(0,R.default)("file-search",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]]);var tl=e.i(790548),to=e.i(625179),tc=e.i(221911),td=e.i(219587),tm=e.i(362164);let tx={guideline:ti.BookOpen,brand_book:ti.BookOpen,strategy:D.Target,reference:tn,other:A.FileText,url:tt.Link,image:ts.Image};function tp({brandId:e,className:a}){let{assets:r,isLoading:i}=(0,td.useBrandAssets)(e),[n,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null);if(i)return(0,t.jsxs)("div",{className:(0,g.cn)("flex items-center gap-2 px-3 py-1.5",a),children:[(0,t.jsx)(T.Loader2,{className:"h-3 w-3 animate-spin text-zinc-500"}),(0,t.jsx)("span",{className:"text-xs text-zinc-500 font-medium",children:"Carregando..."})]});let d=r.length;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(tm.Dialog,{open:n,onOpenChange:l,children:[(0,t.jsx)(tm.DialogTrigger,{asChild:!0,children:(0,t.jsxs)("button",{className:(0,g.cn)("group flex items-center gap-2 px-3 h-9 sm:h-8 rounded-full transition-all duration-300",d>0?"bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20":"bg-zinc-500/10 hover:bg-zinc-500/20 border border-zinc-500/10",a),children:[(0,t.jsxs)("div",{className:"relative shrink-0",children:[(0,t.jsx)(O.Sparkles,{className:(0,g.cn)("h-4 w-4 sm:h-3.5 sm:w-3.5 transition-transform duration-500 group-hover:rotate-12",d>0?"text-emerald-400":"text-zinc-500")}),d>0&&(0,t.jsxs)("span",{className:"absolute -top-1 -right-1 flex h-2 w-2",children:[(0,t.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),(0,t.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]})]}),(0,t.jsx)("span",{className:(0,g.cn)("text-xs font-medium tracking-tight transition-colors",d>0?"text-emerald-400":"text-zinc-500"),children:d>0?`${d} Ativos`:"Sem contexto"}),d>0&&(0,t.jsx)(tl.ChevronRight,{className:"h-3 w-3 text-emerald-500/50 group-hover:text-emerald-400 transition-colors"})]})}),(0,t.jsxs)(tm.DialogContent,{className:"sm:max-w-[425px] bg-zinc-950 border-white/[0.04] p-0 overflow-hidden shadow-2xl",children:[(0,t.jsxs)(tm.DialogHeader,{className:"p-6 pb-2",children:[(0,t.jsxs)(tm.DialogTitle,{className:"flex items-center gap-2 text-white",children:[(0,t.jsx)(O.Sparkles,{className:"h-4 w-4 text-emerald-400"}),"Contexto Ativo da Marca"]}),(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:"Documentos que personalizam as respostas da IA."})]}),(0,t.jsx)(eW.ScrollArea,{className:"max-h-[60vh] px-6 pb-6",children:(0,t.jsx)("div",{className:"space-y-3 mt-4",children:0===d?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,t.jsx)("div",{className:"h-12 w-12 rounded-full bg-zinc-900 flex items-center justify-center mb-3",children:(0,t.jsx)(A.FileText,{className:"h-6 w-6 text-zinc-700"})}),(0,t.jsx)("p",{className:"text-sm text-zinc-400",children:"Nenhum asset encontrado."})]}):r.map(e=>{let s=tx[e.type]||A.FileText,a=!!e.extractedText?.trim();return(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/[0.02] border border-white/[0.04] hover:bg-white/[0.04] transition-colors group",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-lg bg-zinc-900 flex items-center justify-center border border-white/[0.04] text-zinc-400 group-hover:text-white transition-colors",children:(0,t.jsx)(s,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-white truncate",title:e.name,children:e.name}),a&&(0,t.jsx)("button",{onClick:()=>c(e),className:"shrink-0 p-1.5 rounded-lg text-zinc-500 hover:text-emerald-400 hover:bg-emerald-500/10 transition-all",title:"Ver texto extraÃ­do",children:(0,t.jsx)(to.Eye,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,t.jsx)(e6.Badge,{variant:"outline",className:"text-[10px] h-4 px-1.5 bg-white/[0.02] text-zinc-500 border-white/[0.04] capitalize",children:e.type.replace("_"," ")}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:"ready"===e.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ta.CheckCircle2,{className:"h-3 w-3 text-emerald-500"}),(0,t.jsx)("span",{className:"text-[10px] text-emerald-500/80",children:"Pronto"})]}):"processing"===e.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.Loader2,{className:"h-3 w-3 animate-spin text-amber-500"}),(0,t.jsx)("span",{className:"text-[10px] text-amber-500/80",children:"Processando"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tr.AlertCircle,{className:"h-3 w-3 text-red-500"}),(0,t.jsx)("span",{className:"text-[10px] text-red-500/80",children:"Erro"})]})})]})]})]},e.id)})})})]})]}),(0,t.jsx)(tm.Dialog,{open:!!o,onOpenChange:e=>!e&&c(null),children:(0,t.jsxs)(tm.DialogContent,{className:"sm:max-w-2xl bg-zinc-950 border-white/[0.04] p-0 overflow-hidden shadow-2xl",children:[(0,t.jsx)(tm.DialogHeader,{className:"p-6 border-b border-white/[0.04]",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-lg bg-emerald-500/10 flex items-center justify-center text-emerald-400",children:(0,t.jsx)(A.FileText,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(tm.DialogTitle,{className:"text-white text-base",children:["Preview: ",o?.name]}),(0,t.jsx)("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Texto extraÃ­do e processado para o RAG"})]})]}),(0,t.jsxs)("a",{href:o?.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/[0.03] border border-white/[0.04] text-xs text-zinc-400 hover:text-white hover:bg-white/[0.06] transition-all",children:[(0,t.jsx)(tc.FileDown,{className:"h-3.5 w-3.5"}),"Original"]})]})}),(0,t.jsx)(eW.ScrollArea,{className:"h-[60vh] p-6 bg-zinc-900/30",children:o?.extractedText?(0,t.jsx)(ei.MarkdownRenderer,{content:o.extractedText}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full py-12 text-center",children:[(0,t.jsx)(tr.AlertCircle,{className:"h-8 w-8 text-zinc-700 mb-3"}),(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:"Nenhum texto extraÃ­do disponÃ­vel."})]})}),(0,t.jsx)("div",{className:"p-4 border-t border-white/[0.04] bg-zinc-950/50 flex justify-end",children:(0,t.jsx)(m.Button,{variant:"ghost",onClick:()=>c(null),className:"text-zinc-400 hover:text-white hover:bg-white/[0.04]",children:"Fechar Preview"})})]})})]})}let th=(0,R.default)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),tu=(0,R.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);function tg({isOpen:e,onOpenChange:s}){return(0,t.jsx)(tm.Dialog,{open:e,onOpenChange:s,children:(0,t.jsxs)(tm.DialogContent,{className:"sm:max-w-[480px] bg-[#0c0c0e] border-white/[0.08] p-0 overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative p-6 pt-10",children:[(0,t.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-32 bg-gradient-to-b from-violet-600/20 to-transparent blur-2xl"}),(0,t.jsxs)(tm.DialogHeader,{className:"relative text-center space-y-4",children:[(0,t.jsx)("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-violet-500 to-fuchsia-600 shadow-lg shadow-violet-500/20",children:(0,t.jsx)(th,{className:"h-8 w-8 text-white"})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(tm.DialogTitle,{className:"text-2xl font-bold text-white text-center",children:"VocÃª atingiu o limite de crÃ©ditos"}),(0,t.jsx)(tm.DialogDescription,{className:"text-zinc-400 text-center text-base",children:"Sua conta gratuita possui 10 crÃ©ditos mensais. FaÃ§a o upgrade agora para continuar gerando estratÃ©gias ilimitadas."})]})]}),(0,t.jsxs)("div",{className:"mt-8 space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-zinc-300 uppercase tracking-wider text-center",children:"Vantagens do Plano Pro"}),(0,t.jsx)("div",{className:"grid gap-3",children:["CrÃ©ditos ilimitados para o Conselho","Acesso a todos os 15 especialistas","Upload de arquivos e URLs (Contexto Ilimitado)","ExportaÃ§Ã£o em PDF e Notion"].map((e,s)=>(0,t.jsxs)(c.motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*s},className:"flex items-center gap-3 rounded-xl border border-white/[0.04] bg-white/[0.02] p-3",children:[(0,t.jsx)(ta.CheckCircle2,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-sm text-zinc-300",children:e})]},s))})]})]}),(0,t.jsxs)(tm.DialogFooter,{className:"p-6 bg-white/[0.02] border-t border-white/[0.04] flex-col sm:flex-col gap-3",children:[(0,t.jsx)(m.Button,{className:"w-full h-12 bg-violet-600 hover:bg-violet-500 text-white font-bold text-lg rounded-xl shadow-lg shadow-violet-600/20 transition-all hover:scale-[1.02] active:scale-[0.98]",onClick:()=>window.open("https://conselho-de-funil.vercel.app/pricing","_blank"),children:"Ver Planos de Upgrade"}),(0,t.jsxs)("button",{className:"flex items-center justify-center gap-2 text-sm text-zinc-500 hover:text-zinc-300 transition-colors py-2",onClick:()=>window.open("https://wa.me/seunumerodesuporte","_blank"),children:[(0,t.jsx)(tu,{className:"h-4 w-4"}),"Falar com suporte"]})]})]})})}var tf=e.i(275982);function tb(){let e=(0,a.useRouter)(),c=(0,a.useSearchParams)(),d=c.get("id"),m=c.get("funnelId"),x=c.get("campaignId"),p="undefined"!==x&&x?x:null,h=c.get("mode"),u=(0,l.useActiveBrand)(),{user:g}=(0,o.useUser)(),[f,b]=(0,s.useState)("general");(0,s.useEffect)(()=>{h&&["general","funnel","copy","social","ads","design"].includes(h)&&b(h)},[h]);let[j,v]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!1),y=(0,s.useRef)(null),C=$.CHAT_MODES[f],k=C.accentColor,z=tf.CONFIG.ENABLE_CREDIT_LIMIT&&g?.credits!==void 0&&g.credits<=0,{conversations:S,isLoading:O,create:R,remove:E}=function(){let{user:e}=(0,i.useAuthStore)(),[t,a]=(0,s.useState)([]),[r,l]=(0,s.useState)(!0),[o,c]=(0,s.useState)(null),d=(0,s.useCallback)(async()=>{if(!e){a([]),l(!1);return}try{l(!0);let t=await (0,n.getUserConversations)(e.uid);a(t),c(null)}catch(e){console.error("Error loading conversations:",e),c("Erro ao carregar conversas")}finally{l(!1)}},[e]);return(0,s.useEffect)(()=>{d()},[d]),{conversations:t,isLoading:r,error:o,create:async(t="Nova conversa",s)=>{if(!e)throw Error("User not authenticated");let a=await (0,n.createConversation)({userId:e.uid,title:t,context:{mode:"general"},brandId:s});return await d(),a},remove:async e=>{await (0,n.deleteConversation)(e),await d()},refresh:d}}(),{messages:A,isSending:T,sendMessage:P,error:D}=function(e){let[t,a]=(0,s.useState)([]),[r,i]=(0,s.useState)(!0),[l,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(!e){a([]),i(!1);return}i(!0);let t=(0,n.subscribeToMessages)(e,e=>{a(e),i(!1)});return()=>t()},[e]),{messages:t,isLoading:r,isSending:l,error:c,sendMessage:async(t,s="general",a,r,i)=>{if(e){o(!0),d(null);try{await (0,n.addMessage)(e,{role:"user",content:t});let l=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,conversationId:e,mode:s,...a?{funnelId:a}:{},...i?{campaignId:i}:{},...r?{selectedAgents:r.selectedAgents,intensity:r.intensity}:{}})});if(!l.ok){let t=await l.json();if(403===l.status&&"insufficient_credits"===t.error)throw await (0,n.addMessage)(e,{role:"assistant",content:"âŒ **Saldo de crÃ©ditos insuficiente.**\n\nSeu saldo de crÃ©ditos acabou. FaÃ§a upgrade para continuar consultando o conselho."}),Error("Saldo de crÃ©ditos insuficiente");throw Error(t.error||"Failed to get response")}}catch(t){console.error("Error sending message:",t),d(t instanceof Error?t.message:"Erro ao enviar mensagem"),await (0,n.addMessage)(e,{role:"assistant",content:`âš ï¸ Desculpe, ocorreu um erro ao processar sua mensagem. Por favor, tente novamente.

*Erro: ${t instanceof Error?t.message:"Erro desconhecido"}*`})}finally{o(!1)}}}}}(d);(0,s.useEffect)(()=>{"Saldo de crÃ©ditos insuficiente"===D&&w(!0)},[D]),(0,s.useEffect)(()=>{y.current&&(y.current.scrollTop=y.current.scrollHeight)},[A,T]);let I=async()=>{v(!0);try{let t=await R("Nova conversa",u?.id);e.push(`/chat?id=${t}`)}finally{v(!1)}},M=async(t,s)=>{s.stopPropagation(),await E(t),t===d&&e.push("/chat")},U=async(t,s)=>{let a="funnel"===f?"funnel_creation":"copy"===f?"copy":"social"===f?"social":"ads"===f?"ads":"design"===f?"design":"party"===f?"party":"general";if(!d){let r=await R("Nova conversa",u?.id),i=m?`/chat?id=${r}&funnelId=${m}`:`/chat?id=${r}`;p&&(i+=`&campaignId=${p}`),e.push(i),setTimeout(()=>{P(t,a,m||void 0,s,p||void 0)},500);return}await P(t,a,m||void 0,s,p||void 0)};return(0,t.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,t.jsx)(r.Header,{title:C.title,subtitle:C.subtitle,actions:(0,t.jsx)(tp,{brandId:u?.id})}),(0,t.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,t.jsx)(_,{conversations:S,isLoading:O,conversationId:d,isCreating:j,accentColor:k,onNewConversation:I,onSelectConversation:t=>{e.push(`/chat?id=${t}`)},onDeleteConversation:M}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col relative overflow-hidden",children:[(0,t.jsx)("div",{ref:y,className:"flex-1 overflow-y-auto custom-scrollbar bg-[#09090b]",children:(0,t.jsx)("div",{className:"min-h-full flex flex-col justify-end",children:d&&0!==A.length?(0,t.jsx)(e7,{messages:A,isSending:T,accentColor:k,campaignId:p}):(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,t.jsx)(te,{onSuggestionClick:U,mode:f})})})}),(0,t.jsx)(Q,{onSend:U,isLoading:T,disabled:z,disabledMessage:"Saldo de crÃ©ditos insuficiente",mode:f,onModeChange:b})]})]}),(0,t.jsx)(tg,{isOpen:N,onOpenChange:w})]})}e.s(["default",()=>tb],708260)}]);