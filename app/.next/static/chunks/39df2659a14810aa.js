(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,987444,e=>{"use strict";var a=e.i(430459),t=e.i(255006);function s({className:e,type:s,...r}){return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,t.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>s])},43048,e=>{"use strict";var a=e.i(430459),t=e.i(255006);function s({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function i({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...s})}function n({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...s})}function l({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>r,"CardTitle",()=>i])},249454,121849,e=>{"use strict";var a=e.i(371352);let t=e=>a=>{try{let s=e(a);if(s instanceof Promise)return s;return{then:e=>t(e)(s),catch(e){return this}}}catch(e){return{then(e){return this},catch:a=>t(a)(e)}}},s=(e,a)=>(s,r,i)=>{let n,l={storage:function(e,a){let t;try{t=e()}catch(e){return}return{getItem:e=>{var a;let s=e=>null===e?null:JSON.parse(e,void 0),r=null!=(a=t.getItem(e))?a:null;return r instanceof Promise?r.then(s):s(r)},setItem:(e,a)=>t.setItem(e,JSON.stringify(a,void 0)),removeItem:e=>t.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,a)=>({...a,...e}),...a},c=!1,d=0,o=new Set,m=new Set,x=l.storage;if(!x)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),s(...e)},r,i);let u=()=>{let e=l.partialize({...r()});return x.setItem(l.name,{state:e,version:l.version})},p=i.setState;i.setState=(e,a)=>(p(e,a),u());let h=e((...e)=>(s(...e),u()),r,i);i.getInitialState=()=>h;let g=()=>{var e,a;if(!x)return;let i=++d;c=!1,o.forEach(e=>{var a;return e(null!=(a=r())?a:h)});let p=(null==(a=l.onRehydrateStorage)?void 0:a.call(l,null!=(e=r())?e:h))||void 0;return t(x.getItem.bind(x))(l.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];else{if(l.migrate){let a=l.migrate(e.state,e.version);return a instanceof Promise?a.then(e=>[!0,e]):[!0,a]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var a;if(i!==d)return;let[t,c]=e;if(s(n=l.merge(c,null!=(a=r())?a:h),!0),t)return u()}).then(()=>{i===d&&(null==p||p(n,void 0),n=r(),c=!0,m.forEach(e=>e(n)))}).catch(e=>{i===d&&(null==p||p(void 0,e))})};return i.persist={setOptions:e=>{l={...l,...e},e.storage&&(x=e.storage)},clearStorage:()=>{null==x||x.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>g(),hasHydrated:()=>c,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(m.add(e),()=>{m.delete(e)})},l.skipHydration||g(),n||h};e.s(["persist",()=>s],121849);let r=(0,a.create)()(s(e=>({selectedBrand:null,brands:[],isLoading:!1,setSelectedBrand:a=>e({selectedBrand:a}),setBrands:a=>e({brands:a}),setLoading:a=>e({isLoading:a}),clearBrand:()=>e({selectedBrand:null})}),{name:"brand-storage",partialize:e=>({selectedBrand:e.selectedBrand})}));e.s(["useBrandStore",0,r],249454)},587975,e=>{"use strict";let a=(0,e.i(946089).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],587975)},62046,e=>{"use strict";var a=e.i(249454);function t(){let{selectedBrand:e}=(0,a.useBrandStore)();return e}e.s(["useActiveBrand",()=>t])},707150,e=>{"use strict";var a=e.i(430459),t=e.i(833145),s=e.i(43048),r=e.i(667285),i=e.i(374406),n=e.i(860205),l=e.i(281853),c=e.i(908773),d=e.i(587975),o=e.i(91435),m=e.i(360619),x=e.i(100655),u=e.i(54203),p=e.i(987444),h=e.i(62046),g=e.i(255006),f=e.i(590439);function b(){let e=(0,h.useActiveBrand)(),[b,j]=(0,t.useState)(""),[v,N]=(0,t.useState)(!1),[y,z]=(0,t.useState)(null),w=async()=>{if(!b)return void f.toast.error("Por favor, insira uma URL válida.");if(!e?.id)return void f.toast.error("Nenhuma marca ativa selecionada.");N(!0),z(null);try{let a=await fetch("/api/intelligence/autopsy/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brandId:e.id,url:b,depth:"quick"})});if(!a.ok){let e=await a.json();throw Error(e.error||"Erro ao executar diagnóstico.")}let t=await a.json();z(t.report),f.toast.success("Diagnóstico concluído com sucesso!")}catch(e){console.error("[AUTOPSY_UI_ERROR]:",e),f.toast.error(e.message||"Falha ao processar a URL.")}finally{N(!1)}};return(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Funnel Autopsy"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Diagnóstico profundo e identificação de gargalos em funis de alta escala."})]}),(0,a.jsx)(s.Card,{className:"bg-zinc-900/50 border-zinc-800",children:(0,a.jsx)(s.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(c.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-500"}),(0,a.jsx)(p.Input,{placeholder:"Insira a URL do funil para análise (ex: https://lp.concorrente.com)",className:"pl-10 bg-zinc-950 border-zinc-800 focus:ring-emerald-500/20",value:b,onChange:e=>j(e.target.value),disabled:v})]}),(0,a.jsx)(u.Button,{onClick:w,disabled:v||!b,className:"bg-emerald-600 hover:bg-emerald-700 text-white min-w-[140px]",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Analisando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Stethoscope,{className:"mr-2 h-4 w-4"}),"Iniciar Autópsia"]})})]})})}),y?(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)(s.Card,{className:"bg-zinc-900/50 border-zinc-800",children:[(0,a.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Activity,{className:"w-5 h-5 text-emerald-500"}),"Resumo do Diagnóstico"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-zinc-500",children:"Health Score:"}),(0,a.jsxs)("div",{className:(0,g.cn)("text-2xl font-bold px-3 py-1 rounded-lg",y.score>=7?"text-emerald-500 bg-emerald-500/10":y.score>=4?"text-amber-500 bg-amber-500/10":"text-red-500 bg-red-500/10"),children:[y.score,"/10"]})]})]}),(0,a.jsxs)(s.CardContent,{className:"space-y-6",children:[(0,a.jsxs)("p",{className:"text-zinc-300 leading-relaxed italic",children:['"',y.summary,'"']}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(y.heuristics).map(([e,t])=>(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-zinc-950/50 border border-zinc-800/50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-xs font-bold uppercase tracking-widest text-zinc-500",children:e}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium",children:[t.score,"/10"]}),(e=>{switch(e){case"pass":return(0,a.jsx)(o.CheckCircle2,{className:"w-4 h-4 text-emerald-500"});case"fail":return(0,a.jsx)(m.XCircle,{className:"w-4 h-4 text-red-500"});case"warning":return(0,a.jsx)(l.AlertTriangle,{className:"w-4 h-4 text-amber-500"});default:return(0,a.jsx)(x.Info,{className:"w-4 h-4 text-zinc-500"})}})(t.status)]})]}),(0,a.jsx)("ul",{className:"space-y-2",children:t.findings.map((e,t)=>(0,a.jsxs)("li",{className:"text-xs text-zinc-400 flex gap-2",children:[(0,a.jsx)("span",{className:"text-emerald-500/50",children:"•"}),e]},t))})]},e))})]})]}),(0,a.jsxs)(s.Card,{className:"bg-zinc-900/50 border-zinc-800",children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Target,{className:"w-5 h-5 text-blue-500"}),"Plano de Ação Recomendado"]})}),(0,a.jsx)(s.CardContent,{children:(0,a.jsx)("div",{className:"space-y-4",children:y.recommendations.map((e,t)=>(0,a.jsx)("div",{className:"p-4 rounded-xl bg-zinc-950/50 border border-zinc-800/50 flex flex-col md:flex-row gap-4",children:(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:(0,g.cn)("text-[10px] font-bold uppercase px-2 py-0.5 rounded border",(e=>{switch(e){case"high":return"bg-red-500/10 text-red-500 border-red-500/20";case"medium":return"bg-amber-500/10 text-amber-500 border-amber-500/20";case"low":return"bg-blue-500/10 text-blue-500 border-blue-500/20";default:return"bg-zinc-500/10 text-zinc-500 border-zinc-500/20"}})(e.priority)),children:e.priority}),(0,a.jsx)("span",{className:"text-[10px] font-bold uppercase px-2 py-0.5 rounded border border-zinc-700 text-zinc-400",children:e.type})]}),(0,a.jsx)("p",{className:"text-sm font-medium text-white",children:e.action}),(0,a.jsx)("p",{className:"text-xs text-zinc-500",children:e.impact})]})},t))})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(s.Card,{className:"bg-zinc-900/50 border-zinc-800 overflow-hidden",children:[(0,a.jsx)(s.CardHeader,{className:"pb-2",children:(0,a.jsx)(s.CardTitle,{className:"text-sm uppercase tracking-widest text-zinc-500",children:"Preview da Página"})}),(0,a.jsxs)(s.CardContent,{className:"p-0",children:[y.metadata.screenshotUrl?(0,a.jsx)("img",{src:y.metadata.screenshotUrl,alt:"Funnel Preview",className:"w-full h-auto object-cover border-y border-zinc-800"}):(0,a.jsx)("div",{className:"h-40 flex items-center justify-center bg-zinc-950 text-zinc-700",children:(0,a.jsx)("p",{className:"text-xs",children:"Screenshot indisponível"})}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,a.jsx)("span",{className:"text-zinc-500",children:"Tempo de Carregamento:"}),(0,a.jsxs)("span",{className:"text-zinc-300 font-mono",children:[y.metadata.loadTimeMs,"ms"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("span",{className:"text-[10px] font-bold uppercase text-zinc-500",children:"Tech Stack Detectado:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[y.metadata.techStack.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 rounded bg-zinc-800 text-[10px] text-zinc-300",children:e},t)),0===y.metadata.techStack.length&&(0,a.jsx)("span",{className:"text-[10px] text-zinc-600 italic",children:"Nenhuma tecnologia identificada"})]})]})]})]})]}),(0,a.jsx)(s.Card,{className:"bg-emerald-500/5 border-emerald-500/10",children:(0,a.jsx)(s.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(l.AlertTriangle,{className:"w-5 h-5 text-emerald-500 shrink-0"}),(0,a.jsxs)("div",{className:"text-xs space-y-2",children:[(0,a.jsx)("p",{className:"font-bold text-emerald-400",children:"Insight do Athos"}),(0,a.jsxs)("p",{className:"text-zinc-400 leading-relaxed",children:["Este diagnóstico foi gerado comparando os dados da página com os playbooks de conversão do Wilder. Priorize as recomendações de ",(0,a.jsx)("strong",{children:"Alta Prioridade"})," para ver impacto imediato no ROAS."]})]})]})})})]})]}):!v&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 border-2 border-dashed border-zinc-800 rounded-2xl bg-zinc-900/20",children:[(0,a.jsx)(r.Stethoscope,{className:"w-12 h-12 text-zinc-700 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-zinc-400",children:"Nenhum diagnóstico ativo"}),(0,a.jsx)("p",{className:"text-sm text-zinc-500 mt-1",children:"Insira uma URL acima para iniciar a autópsia forense do funil."})]})]})}e.s(["default",()=>b])}]);