(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,587975,e=>{"use strict";let a=(0,e.i(946089).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],587975)},634292,e=>{"use strict";let a=(0,e.i(946089).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>a],634292)},62046,e=>{"use strict";var a=e.i(249454);function s(){let{selectedBrand:e}=(0,a.useBrandStore)();return e}e.s(["useActiveBrand",()=>s])},151763,e=>{"use strict";let a=(0,e.i(946089).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>a],151763)},284680,e=>{"use strict";let a=(0,e.i(946089).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],284680)},965072,e=>{"use strict";let a=(0,e.i(946089).default)("linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);e.s(["Linkedin",()=>a],965072)},888660,e=>{"use strict";let a=(0,e.i(946089).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>a],888660)},182492,e=>{"use strict";let a=(0,e.i(946089).default)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);e.s(["Layers",()=>a],182492)},329075,e=>{"use strict";let a=(0,e.i(946089).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>a],329075)},661776,e=>{"use strict";e.i(840779);var a=e.i(970152),s=e.i(597482);e.i(570815);let t=(0,a.getStorage)(s.default);async function r(e,s,r,i){let l=`brand-assets/${r}/${s}/${Date.now()}_${i}`,o=(0,a.ref)(t,l);try{let t=e.split("&")[0].split("?")[0],l=await fetch(t),n=await l.blob();return await (0,a.uploadBytesResumable)(o,n,{contentType:n.type,customMetadata:{userId:r,brandId:s,originalName:i,uploadedAt:new Date().toISOString()}}),await (0,a.getDownloadURL)(o)}catch(e){throw console.error("Erro ao processar binÃ¡rio da imagem para upload:",e),Error("Falha na conversÃ£o binÃ¡ria da imagem gerada.")}}async function i(e,s,r){let i=Date.now(),l=e.name.split(".").pop(),o=`logo_${i}.${l}`,n=`brands/${r}/${s}/logos/${o}`,d=(0,a.ref)(t,n),c=(0,a.uploadBytesResumable)(d,e,{contentType:e.type});return new Promise((e,s)=>{c.on("state_changed",null,e=>s(e),async()=>{try{let s=await (0,a.getDownloadURL)(c.snapshot.ref);e(s)}catch(e){s(e)}})})}async function l(e,s,r,i){let l=Date.now(),o=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),n=`${l}_${o}`,d=`brand-assets/${r}/${s}/${n}`,c=(0,a.ref)(t,d),p={contentType:e.type,customMetadata:{userId:r,brandId:s,originalName:e.name,uploadedAt:new Date().toISOString()}},x=(0,a.uploadBytesResumable)(c,e,p);return new Promise((e,s)=>{x.on("state_changed",e=>{let a=e.bytesTransferred/e.totalBytes*100;i?.(Math.round(a))},e=>{s(e)},async()=>{try{let s=await (0,a.getDownloadURL)(x.snapshot.ref);e({url:s,metadata:x.snapshot.metadata})}catch(e){s(e)}})})}async function o(e){let s=(0,a.ref)(t,e);await (0,a.deleteObject)(s)}function n(e){let a=[".pdf",".doc",".docx",".txt",".md",".png",".jpg",".jpeg",".webp",".svg"];if(!["application/pdf","application/x-pdf","application/vnd.pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/markdown","image/png","image/jpeg","image/webp","image/svg+xml"].includes(e.type)){let s="."+e.name.split(".").pop()?.toLowerCase();if(!a.includes(s))return{valid:!1,error:`Formato n\xe3o suportado. Use: ${a.join(", ")}`}}return e.type.startsWith("image/"),e.size>0xa00000?{valid:!1,error:`Arquivo muito grande. M\xe1ximo: 10MB`}:0===e.size?{valid:!1,error:"O arquivo parece estar vazio ou corrompido."}:{valid:!0}}e.s(["deleteBrandAssetFromStorage",()=>o,"uploadBase64Image",()=>r,"uploadBrandAsset",()=>l,"uploadLogo",()=>i,"validateBrandAssetFile",()=>n])},619904,e=>{"use strict";e.i(240925);var a=e.i(977031),s=e.i(597482),t=e.i(661776);async function r(e,t,r,i){try{let l=(0,a.collection)(s.db,"brands",e,"audit_logs");await (0,a.addDoc)(l,{action:t,details:r,userId:i,createdAt:a.Timestamp.now()})}catch(e){console.error("Failed to log audit:",e)}}async function i(e){return(await (0,a.addDoc)((0,a.collection)(s.db,"brand_assets"),{...e,isApprovedForAI:e.isApprovedForAI??!1})).id}async function l(e){let t=(0,a.query)((0,a.collection)(s.db,"brand_assets"),(0,a.where)("brandId","==",e),(0,a.orderBy)("createdAt","desc"));return(await (0,a.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()}))}async function o(e,t,i){let l=(0,a.doc)(s.db,"brand_assets",e),o=await (0,a.getDoc)(l);if(!o.exists())throw Error("Asset nÃ£o encontrado");let n=o.data();await (0,a.updateDoc)(l,{isApprovedForAI:t}),await r(n.brandId,t?"APPROVE_ASSET_AI":"REVOKE_ASSET_AI",{assetId:e,assetName:n.name},i);let d=(0,a.collection)(s.db,"brand_assets",e,"chunks"),c=await (0,a.getDocs)(d);if(!c.empty){let e=(0,a.writeBatch)(s.db);c.docs.forEach(a=>{e.update(a.ref,{"metadata.isApprovedForAI":t})}),await e.commit()}}async function n(e,r){try{await (0,t.deleteBrandAssetFromStorage)(r)}catch(e){console.error("Erro ao deletar do Storage:",e)}let i=(0,a.doc)(s.db,"brand_assets",e);await (0,a.deleteDoc)(i)}e.s(["createAsset",()=>i,"deleteAsset",()=>n,"getBrandAssets",()=>l,"toggleAssetApproval",()=>o],619904)},818168,e=>{"use strict";let a=(0,e.i(946089).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>a],818168)},152919,e=>{"use strict";let a=(0,e.i(946089).default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);e.s(["Type",()=>a],152919)},896450,e=>{"use strict";let a=(0,e.i(946089).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>a],896450)},237938,e=>{"use strict";var a=e.i(430459),s=e.i(833145),t=e.i(451466),r=e.i(587975),i=e.i(329075),l=e.i(143957),o=e.i(91435),n=e.i(82238),d=e.i(634292),c=e.i(860205),p=e.i(896450),x=e.i(186855),m=e.i(818168),h=e.i(182492),u=e.i(152919),b=e.i(100655),g=e.i(151763),f=e.i(634697),v=e.i(854184);let j=(0,e.i(946089).default)("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);var w=e.i(965072),N=e.i(908773),y=e.i(888660),k=e.i(54203),C=e.i(255006),A=e.i(62046),z=e.i(619904),S=e.i(661776),T=e.i(26953);e.i(240925);var E=e.i(977031),I=e.i(590439),B=e.i(533763);let D={meta:j,google:N.Search,linkedin:w.Linkedin,universal:v.Globe},P={meta:"text-blue-400 bg-blue-500/10 border-blue-500/20",google:"text-red-400 bg-red-500/10 border-red-500/20",linkedin:"text-sky-400 bg-sky-500/10 border-sky-500/20",universal:"text-zinc-400 bg-zinc-500/10 border-zinc-500/20"};function R({promptData:e,conversationId:v,campaignId:j}){let[w,N]=(0,s.useState)("idle"),[R,L]=(0,s.useState)(null),[$,M]=(0,s.useState)(!1),[O,F]=(0,s.useState)(!1),[U,_]=(0,s.useState)(!1),[V,H]=(0,s.useState)(null),[q,G]=(0,s.useState)(!1),[Z,K]=(0,s.useState)(!1),[W,J]=(0,s.useState)(!1),[Y,Q]=(0,s.useState)(null),X=(0,A.useActiveBrand)(),ee=D[e.platform]||D.universal,ea=P[e.platform]||P.universal,es=(e,a)=>{navigator.clipboard.writeText(e),Q(a),I.toast.success("Copiado para a Ã¡rea de transferÃªncia!"),setTimeout(()=>Q(null),2e3)},et=async()=>{if(!X)return void I.toast.error("Selecione uma marca para gerar o criativo");N("generating"),H(null);try{let a=e.visualPrompt||e.prompt,s=e.platform||e.format||"design",t=await fetch("/api/design/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a,type:s,platform:e.platform,format:e.format,safeZone:e.safeZone,aspectRatio:e.aspectRatio,brandId:X.id,userId:X.userId,brandContext:e.brandContext})});if(!t.ok){let e=await t.json().catch(()=>({})),a=e.error||e.details||"Falha na resposta da API",s=e.details?` (${e.details})`:"";throw Error(`${a}${s}`)}let r=await t.json();if(r.success){let a=r.imageUrl;if(a.startsWith("data:"))try{console.log("ðŸ“¤ Fazendo upload da imagem Base64 para o Firebase Storage..."),a=await (0,S.uploadBase64Image)(r.imageUrl,X.id,X.userId,`design_${r.processId}.webp`),console.log("âœ… Upload concluÃ­do com sucesso:",a)}catch(e){console.error("Falha ao fazer upload da imagem para o Storage:",e)}L(a),N("success");try{await (0,z.createAsset)({brandId:X.id,userId:X.userId,name:`Design: ${e.platform||"universal"} - ${new Date().toLocaleDateString()}`,originalName:`design_${r.processId}.webp`,type:"image",mimeType:"image/webp",size:0,url:a,status:"ready",isApprovedForAI:!0,createdAt:E.Timestamp.now(),description:`Gerado via NanoBanana (${e.platform||"universal"}): ${e.visualPrompt||e.prompt||"Sem prompt"}`,tags:["ai-generated",(e.platform||"design").toLowerCase()]}),I.toast.success("Criativo gerado e salvo na galeria da marca!")}catch(e){console.error("Error saving asset:",e),I.toast.error("Criativo gerado, mas houve um erro ao salvar na galeria.")}}else throw Error(r.error||"Erro desconhecido")}catch(e){console.error("Generation Error:",e),H(String(e)),N("error"),I.toast.error("Erro ao gerar criativo. Tente novamente.")}},er=async()=>{},ei=async()=>{if(R)try{let e=await fetch(R),a=await e.blob(),s=window.URL.createObjectURL(a),t=document.createElement("a");t.href=s,t.download=`conselho_design_${Date.now()}.webp`,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(s),I.toast.success("Download iniciado!")}catch(e){console.error("Download error:",e),I.toast.error("Erro ao baixar imagem. Tente abrir em uma nova aba.")}},el=async()=>{if(j&&R){F(!0);try{await (0,T.updateCampaignManifesto)(j,{design:{visualStyle:e.brandContext?.style||"Professional",preferredColors:e.brandContext?.colors||[],visualPrompts:[e.visualPrompt||e.prompt||""],aspectRatios:[e.aspectRatio||"1:1"],assetsUrl:[R]},status:"active"}),_(!0),I.toast.success("Criativo selecionado para a Linha de Ouro!")}catch(e){console.error("Error selecting for campaign:",e),I.toast.error("Erro ao selecionar para a campanha.")}finally{F(!1)}}};return(0,a.jsx)("div",{className:"mt-3 max-w-md overflow-hidden rounded-xl border border-purple-500/20 bg-purple-500/5 transition-all shadow-md",children:(0,a.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-purple-500/20 text-purple-400 shrink-0",children:(0,a.jsx)(t.Palette,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"text-[13px] font-bold text-white truncate",children:"NanoBanana AI"}),(0,a.jsx)("span",{className:"text-[9px] uppercase tracking-tighter px-1.5 py-0.5 rounded-full bg-purple-500/20 text-purple-300 border border-purple-500/30 font-bold",children:"Motor Visual"})]}),e.objective&&(0,a.jsxs)("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-[9px] font-bold uppercase",children:[(0,a.jsx)(c.Target,{className:"w-2.5 h-2.5"}),e.objective]})]})})]}),"idle"===w&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center justify-between gap-1 px-2 py-1.5 rounded-lg bg-black/40 border border-white/5 shadow-inner",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)("span",{className:"text-[8px] text-zinc-500 uppercase font-bold tracking-tight",children:"Plataforma"}),(0,a.jsxs)("div",{className:(0,C.cn)("flex items-center gap-1 text-[10px] font-bold px-1 py-0.5 rounded border capitalize",ea),children:[(0,a.jsx)(ee,{className:"w-2.5 h-2.5"}),e.platform||"Universal"]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-0.5",children:[(0,a.jsx)("span",{className:"text-[8px] text-zinc-500 uppercase font-bold tracking-tight",children:"Zonas"}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-[10px] text-zinc-300 font-bold px-1 py-0.5 rounded bg-white/5 border border-white/5 capitalize",children:[(0,a.jsx)(p.Shield,{className:"w-2.5 h-2.5 text-emerald-500/70"}),e.safeZone||"Feed"]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-0.5",children:[(0,a.jsx)("span",{className:"text-[8px] text-zinc-500 uppercase font-bold tracking-tight",children:"Aspecto"}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-[10px] text-zinc-300 font-bold px-1 py-0.5 rounded bg-white/5 border border-white/5",children:[(0,a.jsx)(h.Layers,{className:"w-2.5 h-2.5 text-purple-400/70"}),e.aspectRatio||"1:1"]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-0.5",children:[(0,a.jsx)("span",{className:"text-[8px] text-zinc-500 uppercase font-bold tracking-tight",children:"EstratÃ©gia"}),(0,a.jsxs)("button",{onClick:()=>J(!W),className:(0,C.cn)("flex items-center gap-1 text-[10px] font-bold px-1 py-0.5 rounded border transition-all",W?"bg-purple-500/20 border-purple-500/50 text-purple-300":"bg-white/5 border-white/10 text-zinc-400 hover:bg-white/10"),children:[(0,a.jsx)(l.Sparkles,{className:"w-2.5 h-2.5"}),"C.H.A.P.E.U"]})]})]}),W&&e.strategy&&(0,a.jsxs)("div",{className:"p-2.5 rounded-lg bg-purple-500/10 border border-purple-500/20 space-y-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-purple-300 text-[10px] font-bold uppercase tracking-wider mb-1",children:[(0,a.jsx)(b.Info,{className:"w-3 h-3"}),"Racional EstratÃ©gico"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-x-3 gap-y-2",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("span",{className:"text-[8px] text-zinc-500 uppercase font-bold",children:"Contraste"}),(0,a.jsx)("p",{className:"text-[9px] text-zinc-300 leading-tight",children:e.strategy.contrastFocus})]}),(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("span",{className:"text-[8px] text-zinc-500 uppercase font-bold",children:"EquilÃ­brio"}),(0,a.jsx)("p",{className:"text-[9px] text-zinc-300 leading-tight capitalize",children:e.strategy.balanceType})]}),(0,a.jsxs)("div",{className:"space-y-0.5 col-span-2",children:[(0,a.jsx)("span",{className:"text-[8px] text-zinc-500 uppercase font-bold",children:"Hierarquia de Leitura"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-0.5",children:e.strategy.hierarchyOrder.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-1 text-[8px] bg-black/40 px-1.5 py-0.5 rounded border border-white/5 text-zinc-400",children:[(0,a.jsx)("span",{className:"text-purple-400 font-bold",children:s+1}),e]},s))})]})]})]}),(0,a.jsxs)(k.Button,{onClick:et,className:"w-full bg-purple-600 hover:bg-purple-500 text-white border-0 shadow-lg shadow-purple-900/20 h-9 text-xs font-bold transition-all hover:scale-[1.01] active:scale-[0.98]",children:[(0,a.jsx)(l.Sparkles,{className:"mr-2 h-3.5 w-3.5"}),"Gerar Criativo Baseado na IntenÃ§Ã£o"]})]}),"generating"===w&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-4 text-center",children:[(0,a.jsx)("div",{className:"relative mb-2",children:(0,a.jsx)(r.Loader2,{className:"h-6 w-6 text-purple-500 animate-spin"})}),(0,a.jsx)("h4",{className:"text-xs font-medium text-white",children:"Processando sua visÃ£o..."})]}),"success"===w&&R&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"relative group rounded-lg overflow-hidden border border-purple-500/30 shadow-lg",children:[(0,a.jsx)("img",{src:R,alt:"Criativo Gerado",className:"w-full object-cover",style:{aspectRatio:e.aspectRatio?.replace(":","/")||"1/1"}}),q&&(0,a.jsxs)("div",{className:"absolute inset-0 pointer-events-none animate-in fade-in duration-300",children:[("stories"===e.safeZone||"reels"===e.safeZone)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"absolute top-0 left-0 right-0 h-[14%] bg-gradient-to-b from-black/60 to-transparent border-b border-dashed border-red-500/40",children:[(0,a.jsxs)("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full border border-white/40 bg-white/10"}),(0,a.jsx)("div",{className:"w-20 h-2 rounded bg-white/30"})]}),(0,a.jsx)("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 text-[7px] font-black text-red-400 uppercase tracking-widest bg-black/40 px-1.5 py-0.5 rounded",children:"Danger: Header / Profile"})]}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 h-[22%] bg-gradient-to-t from-black/80 to-transparent border-t border-dashed border-red-500/40",children:[(0,a.jsxs)("div",{className:"absolute bottom-6 left-4 right-16 space-y-2",children:[(0,a.jsx)("div",{className:"w-1/2 h-2 rounded bg-white/40"}),(0,a.jsx)("div",{className:"w-3/4 h-2 rounded bg-white/20"}),(0,a.jsx)("div",{className:"w-full h-8 rounded-md border border-white/20 bg-white/10 flex items-center justify-center text-[10px] text-white/40 font-bold",children:"BUTTON / CTA"})]}),(0,a.jsx)("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 text-[7px] font-black text-red-400 uppercase tracking-widest bg-black/40 px-1.5 py-0.5 rounded",children:"Danger: CTA / Caption"})]}),"reels"===e.safeZone&&(0,a.jsxs)("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-12 flex flex-col items-center gap-4 py-8 bg-black/20 border-l border-dashed border-red-500/40",children:[[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border border-white/30 bg-white/5"},e)),(0,a.jsx)("div",{className:"absolute top-2 right-2 text-[6px] font-black text-red-400 uppercase vertical-rl",children:"Icons"})]})]}),"feed"===e.safeZone&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute inset-x-[8%] inset-y-0 border-x border-dashed border-emerald-500/30",children:(0,a.jsx)("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 text-[7px] text-emerald-400/80 font-black uppercase bg-black/60 px-1 rounded",children:"Optimal Text Margin"})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-[18%] bg-gradient-to-t from-blue-500/20 to-transparent border-t border-dashed border-blue-500/40",children:(0,a.jsxs)("div",{className:"absolute bottom-2 left-4 right-4 flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-1.5",children:[(0,a.jsx)("div",{className:"w-3/4 h-2.5 rounded bg-blue-400/30"}),(0,a.jsx)("div",{className:"w-1/2 h-2 rounded bg-blue-400/20"})]}),(0,a.jsx)("div",{className:"w-20 h-7 rounded border border-blue-500/40 bg-blue-500/20 flex items-center justify-center text-[8px] text-blue-300 font-bold uppercase",children:"CTA"})]})})]}),(0,a.jsxs)("div",{className:"absolute inset-0 grid grid-cols-3 grid-rows-3 opacity-20",children:[(0,a.jsx)("div",{className:"border border-white/20"}),(0,a.jsx)("div",{className:"border border-white/20"}),(0,a.jsx)("div",{className:"border border-white/20"}),(0,a.jsx)("div",{className:"border border-white/20"}),(0,a.jsx)("div",{className:"border border-white/20"}),(0,a.jsx)("div",{className:"border border-white/20"}),(0,a.jsx)("div",{className:"border border-white/20"}),(0,a.jsx)("div",{className:"border border-white/20"}),(0,a.jsx)("div",{className:"border border-white/20"})]})]}),(0,a.jsxs)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.Button,{size:"sm",variant:"secondary",className:"h-8 text-[10px]",asChild:!0,children:(0,a.jsxs)("a",{href:R,target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(d.ExternalLink,{className:"mr-1 h-3 w-3"}),"Ver Full"]})}),(0,a.jsxs)(k.Button,{size:"sm",className:"bg-purple-600 hover:bg-purple-700 h-8 text-[10px]",onClick:ei,children:[(0,a.jsx)(i.Download,{className:"mr-1 h-3 w-3"}),"Baixar"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(k.Button,{size:"sm",variant:"outline",className:(0,C.cn)("h-7 text-[9px] border-white/20 text-white hover:bg-white/10",q&&"bg-emerald-500/20 border-emerald-500/50 text-emerald-300"),onClick:()=>G(!q),children:[(0,a.jsx)(p.Shield,{className:"mr-1 h-3 w-3"}),"Zonas de SeguranÃ§a"]})})]})]}),e.assets&&(0,a.jsxs)("div",{className:"rounded-lg bg-black/40 border border-white/5 overflow-hidden shadow-lg shadow-black/40",children:[(0,a.jsxs)("button",{onClick:()=>K(!Z),className:"w-full flex items-center justify-between p-2.5 text-[10px] font-bold text-zinc-400 hover:bg-white/5 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Type,{className:"w-3.5 h-3.5 text-purple-400"}),"COPYWRITING PARA ",e.platform?.toUpperCase()||"AD"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-[8px] px-1.5 py-0.5 rounded bg-white/5 border border-white/10 text-zinc-500 font-medium",children:[Object.keys(e.assets).length," ativos"]}),Z?(0,a.jsx)(m.ChevronUp,{className:"w-3 h-3"}):(0,a.jsx)(x.ChevronDown,{className:"w-3 h-3"})]})]}),Z&&(0,a.jsxs)("div",{className:"p-3 pt-0 space-y-4 border-t border-white/5 bg-zinc-950/20",children:[(e.assets.headline||e.assets.primaryText)&&(0,a.jsxs)("div",{className:"space-y-3",children:[e.assets.headline&&(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-[8px] text-zinc-500 uppercase font-bold tracking-tight",children:"Headline"}),(0,a.jsx)("button",{onClick:()=>es(e.assets.headline,"headline"),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-white/10 rounded",children:"headline"===Y?(0,a.jsx)(f.Check,{className:"w-2.5 h-2.5 text-emerald-500"}):(0,a.jsx)(g.Copy,{className:"w-2.5 h-2.5 text-zinc-400"})})]}),(0,a.jsx)("p",{className:"text-[11px] text-white font-medium leading-snug pr-6",children:e.assets.headline})]}),e.assets.primaryText&&(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-[8px] text-zinc-500 uppercase font-bold tracking-tight",children:"Primary Text"}),(0,a.jsx)("button",{onClick:()=>es(e.assets.primaryText,"primary"),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-white/10 rounded",children:"primary"===Y?(0,a.jsx)(f.Check,{className:"w-2.5 h-2.5 text-emerald-500"}):(0,a.jsx)(g.Copy,{className:"w-2.5 h-2.5 text-zinc-400"})})]}),(0,a.jsxs)("p",{className:"text-[11px] text-zinc-300 leading-relaxed italic pr-6 whitespace-pre-wrap",children:['"',e.assets.primaryText,'"']})]})]}),(e.assets.headlines||e.assets.descriptions)&&(0,a.jsxs)("div",{className:"space-y-4",children:[e.assets.headlines&&e.assets.headlines.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("span",{className:"text-[8px] text-zinc-500 uppercase font-bold tracking-tight",children:"VariaÃ§Ãµes de TÃ­tulo (Google)"}),(0,a.jsx)("div",{className:"space-y-1",children:e.assets.headlines.map((e,s)=>(0,a.jsxs)("div",{className:"group flex items-start justify-between gap-2 p-1.5 rounded bg-white/5 border border-white/5 hover:border-white/10 transition-colors",children:[(0,a.jsx)("p",{className:"text-[10px] text-white leading-tight flex-1 font-medium",children:e}),(0,a.jsx)("button",{onClick:()=>es(e,`h-${s}`),className:"p-1 hover:bg-white/10 rounded shrink-0",children:Y===`h-${s}`?(0,a.jsx)(f.Check,{className:"w-2.5 h-2.5 text-emerald-500"}):(0,a.jsx)(g.Copy,{className:"w-2.5 h-2.5 text-zinc-400"})})]},s))})]}),e.assets.descriptions&&e.assets.descriptions.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("span",{className:"text-[8px] text-zinc-500 uppercase font-bold tracking-tight",children:"VariaÃ§Ãµes de DescriÃ§Ã£o (Google)"}),(0,a.jsx)("div",{className:"space-y-1",children:e.assets.descriptions.map((e,s)=>(0,a.jsxs)("div",{className:"group flex items-start justify-between gap-2 p-2 rounded bg-white/5 border border-white/5 hover:border-white/10 transition-colors",children:[(0,a.jsxs)("p",{className:"text-[10px] text-zinc-300 italic leading-snug flex-1",children:['"',e,'"']}),(0,a.jsx)("button",{onClick:()=>es(e,`d-${s}`),className:"p-1 hover:bg-white/10 rounded shrink-0",children:Y===`d-${s}`?(0,a.jsx)(f.Check,{className:"w-2.5 h-2.5 text-emerald-500"}):(0,a.jsx)(g.Copy,{className:"w-2.5 h-2.5 text-zinc-400"})})]},s))})]})]}),e.assets.callToAction&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-purple-500/10 border border-purple-500/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Target,{className:"w-3 h-3 text-purple-400"}),(0,a.jsxs)("span",{className:"text-[9px] text-purple-300 font-bold uppercase",children:["CTA: ",e.assets.callToAction]})]}),(0,a.jsx)("button",{onClick:()=>es(e.assets.callToAction,"cta"),className:"p-1 hover:bg-purple-500/20 rounded",children:"cta"===Y?(0,a.jsx)(f.Check,{className:"w-2.5 h-2.5 text-emerald-500"}):(0,a.jsx)(g.Copy,{className:"w-2.5 h-2.5 text-purple-400"})})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-emerald-400 text-[10px] font-bold justify-center py-1",children:[(0,a.jsx)(o.CheckCircle2,{className:"w-3 h-3"}),U?"CRIATIVO SELECIONADO PARA A CAMPANHA!":"CRIATIVO SALVO NA GALERIA!"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[j&&!U?(0,a.jsxs)(k.Button,{onClick:el,disabled:O,className:"col-span-2 bg-emerald-600 hover:bg-emerald-500 text-white border-0 shadow-lg shadow-emerald-900/20 h-9 text-xs font-bold transition-all hover:scale-[1.01]",children:[O?(0,a.jsx)(r.Loader2,{className:"mr-2 h-3.5 w-3.5 animate-spin"}):(0,a.jsx)(c.Target,{className:"mr-2 h-3.5 w-3.5"}),"Selecionar para Linha de Ouro"]}):U&&j?(0,a.jsx)(k.Button,{variant:"secondary",className:"col-span-2 bg-emerald-500/20 text-emerald-400 border-emerald-500/30 h-10 text-xs font-black uppercase tracking-widest hover:bg-emerald-500/30",asChild:!0,children:(0,a.jsxs)(B.default,{href:`/campaigns/${j}`,children:["Ir para EstratÃ©gia de Ads",(0,a.jsx)(y.ArrowRight,{className:"ml-2 h-4 w-4"})]})}):null,!$&&(0,a.jsxs)(k.Button,{onClick:er,className:(0,C.cn)("bg-zinc-800 hover:bg-zinc-700 text-purple-400 border border-purple-500/20 h-8 text-[10px]",U&&"opacity-50 pointer-events-none"),children:[(0,a.jsx)(l.Sparkles,{className:"mr-1.5 h-3 w-3"}),"UPSCALE HD"]}),(0,a.jsx)(k.Button,{variant:"outline",onClick:()=>{N("idle"),M(!1),L(null),_(!1)},className:(0,C.cn)("border-purple-500/30 text-purple-400 hover:bg-purple-500/10 h-8 text-[10px]",$?"col-span-2":""),children:"NOVA VARIAÃ‡ÃƒO"})]})]}),"error"===w&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"rounded-lg bg-red-500/10 border border-red-500/20 p-3 flex gap-2",children:[(0,a.jsx)(n.AlertCircle,{className:"h-4 w-4 text-red-500 shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h4",{className:"text-[11px] font-bold text-red-400 uppercase",children:"Erro na GeraÃ§Ã£o"}),(0,a.jsx)("p",{className:"text-[10px] text-red-400/70 truncate",children:V||"Falha na conexÃ£o."})]})]}),(0,a.jsx)(k.Button,{onClick:et,variant:"outline",className:"w-full border-zinc-700 text-zinc-400 hover:bg-white/5 h-8 text-[10px]",children:"Tentar Novamente"})]})]})})}e.s(["DesignGenerationCard",()=>R],237938)},396515,e=>{"use strict";var a=e.i(430459),s=e.i(833145),t=e.i(58333),r=e.i(533763);e.i(240925);var i=e.i(977031),l=e.i(597482),o=e.i(26953),n=e.i(749442),d=e.i(54203),c=e.i(284680),p=e.i(587975),x=e.i(143957),m=e.i(451466),h=e.i(182492),u=e.i(896450),b=e.i(860205),g=e.i(790548),f=e.i(651752),v=e.i(800598),j=e.i(255006),w=e.i(416493),N=e.i(185629),y=e.i(237938);function k(){let e=(0,t.useParams)(),k=(0,t.useRouter)(),C=(0,t.useSearchParams)(),{user:A}=(0,w.useAuthStore)(),z=e.id,S=C.get("campaignId"),[T,E]=(0,s.useState)(null),[I,B]=(0,s.useState)(null),[D,P]=(0,s.useState)(!0),[R,L]=(0,s.useState)(!1),[$,M]=(0,s.useState)([]);(0,s.useEffect)(()=>{!async function(){if(z)try{let e=await (0,i.getDoc)((0,i.doc)(l.db,"funnels",z));e.exists()&&E({id:e.id,...e.data()});let a=S||z,s=await (0,i.getDoc)((0,i.doc)(l.db,"campaigns",a));if(s.exists()){let e=s.data();B(e),e.design?.visualPrompts&&M(e.design.visualPrompts.map(a=>({...a,brandContext:e.funnel?.mainGoal})))}}catch(e){console.error("Error loading data:",e)}finally{P(!1)}}()},[z]);let O=async()=>{if(!T||!I?.copywriting)return void N.notify.error("Erro","Copywriting pendente.");L(!0);try{let e=await fetch("/api/design/plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({funnelId:z,userId:A?.uid,context:{objective:T.context.objective,copy:I.copywriting.mainScript,hooks:I.social?.hooks||[]}})}),a=await e.json();a.success?(M(a.prompts),N.notify.success("EstratÃ©gia visual gerada!")):N.notify.error("Erro",a.error)}catch(e){N.notify.error("Erro","Falha ao convocar Conselho de Design")}finally{L(!1)}},F=async()=>{if(z&&0!==$.length){P(!0);try{let e=S||z;await (0,o.updateCampaignManifesto)(e,{design:{visualStyle:"Modern Premium",preferredColors:["#10b981","#000000"],visualPrompts:$,aspectRatios:["1:1","9:16"]}}),N.notify.success("Diretriz Visual Aprovada!"),k.push(`/campaigns/${e}`)}catch(e){N.notify.error("Erro","Falha ao salvar estratÃ©gia visual")}finally{P(!1)}}};return D?(0,a.jsxs)("div",{className:"flex min-h-screen flex-col bg-black",children:[(0,a.jsx)(n.Header,{title:"Conselho de Design"}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)(p.Loader2,{className:"h-8 w-8 animate-spin text-purple-500"})})]}):(0,a.jsxs)("div",{className:"flex min-h-screen flex-col bg-black",children:[(0,a.jsx)(n.Header,{title:"Design Intelligence",showBack:!0}),(0,a.jsxs)("div",{className:"flex-1 p-8 max-w-5xl mx-auto w-full",children:[(0,a.jsxs)(r.default,{href:`/campaigns/${S||z}`,className:"inline-flex items-center gap-2 text-zinc-400 hover:text-white mb-6 transition-colors",children:[(0,a.jsx)(c.ArrowLeft,{className:"h-4 w-4"}),"Voltar ao Comando"]}),(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-2xl bg-purple-500/10 text-purple-500",children:(0,a.jsx)(m.Palette,{className:"h-8 w-8"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"Conselho de Design"}),(0,a.jsx)("p",{className:"text-zinc-500",children:"Framework C.H.A.P.E.U: Contraste, Hierarquia, Antropomorfismo, Prova, EmoÃ§Ã£o, UrgÃªncia."})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-3 mb-8",children:[(0,a.jsxs)("div",{className:"card-premium p-4 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-emerald-500/10 text-emerald-400",children:(0,a.jsx)(b.Target,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Base EstratÃ©gica"}),(0,a.jsx)("p",{className:"text-sm text-zinc-200 font-medium truncate",children:"Copy & Hooks Aprovados"})]})]}),(0,a.jsxs)("div",{className:"card-premium p-4 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-400",children:(0,a.jsx)(h.Layers,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Framework"}),(0,a.jsx)("p",{className:"text-sm text-zinc-200 font-medium",children:"C.H.A.P.E.U v2.0"})]})]}),(0,a.jsxs)("div",{className:"card-premium p-4 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-amber-500/10 text-amber-400",children:(0,a.jsx)(u.Shield,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"SeguranÃ§a"}),(0,a.jsx)("p",{className:"text-sm text-zinc-200 font-medium",children:"Safe Zones (Meta/LI)"})]})]})]}),0===$.length?(0,a.jsxs)("div",{className:"card-premium p-12 text-center",children:[(0,a.jsx)(x.Sparkles,{className:"h-12 w-12 text-zinc-700 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Pronto para criar o impacto visual?"}),(0,a.jsxs)(d.Button,{onClick:O,disabled:R,className:"bg-purple-600 hover:bg-purple-500 h-12 px-8 font-bold",children:[R?(0,a.jsx)(p.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}):(0,a.jsx)(m.Palette,{className:"mr-2 h-5 w-5"}),"Planejar Ativos Visuais"]})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,a.jsx)(f.Zap,{className:"h-5 w-5 text-purple-400"}),"Criativos NanoBanana"]}),(0,a.jsxs)(d.Button,{variant:"ghost",onClick:O,disabled:R,className:"text-zinc-500 hover:text-white",children:[(0,a.jsx)(v.RefreshCw,{className:(0,j.cn)("h-4 w-4 mr-2",R&&"animate-spin")}),"Recriar EstratÃ©gia"]})]}),(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2",children:$.map((e,s)=>(0,a.jsx)(y.DesignGenerationCard,{promptData:e,conversationId:z},s))}),(0,a.jsx)("div",{className:"pt-8 border-t border-white/[0.05] flex justify-end",children:(0,a.jsxs)(d.Button,{onClick:F,className:"bg-purple-600 hover:bg-purple-500 h-12 px-12 text-lg font-bold shadow-[0_0_30px_rgba(168,85,247,0.3)]",children:["Concluir Etapa Visual",(0,a.jsx)(g.ChevronRight,{className:"ml-2 h-5 w-5"})]})})]})]})]})]})}e.s(["default",()=>k])}]);