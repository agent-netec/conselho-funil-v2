(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,569995,e=>{"use strict";let a=(0,e.i(946089).default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);e.s(["Lightbulb",()=>a],569995)},482142,e=>{"use strict";let a=(0,e.i(946089).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);e.s(["TrendingDown",()=>a],482142)},228700,e=>{"use strict";let a=(0,e.i(946089).default)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);e.s(["RefreshCcw",()=>a],228700)},899270,e=>{"use strict";var a=e.i(430459),s=e.i(833145),t=e.i(58333);e.i(240925);var i=e.i(977031),n=e.i(597482),l=e.i(749442),r=e.i(615090),c=e.i(634697),d=e.i(860205),o=e.i(215156),m=e.i(439469),u=e.i(451466),x=e.i(167301),h=e.i(255006);let p=[{id:"funnel",title:"Funil",icon:d.Target,status:"pending"},{id:"copy",title:"Copy",icon:o.PenTool,status:"pending"},{id:"social",title:"Social",icon:m.Share2,status:"pending"},{id:"design",title:"Design",icon:u.Palette,status:"pending"},{id:"ads",title:"Ads",icon:x.BarChart3,status:"pending"}];function g({currentStageId:e,completedStages:s}){return(0,a.jsx)("div",{className:"w-full py-4 sm:py-6 overflow-x-auto scrollbar-none",children:(0,a.jsx)("div",{className:"flex items-center justify-between min-w-[340px] max-w-4xl mx-auto px-4 gap-2",children:p.map((t,i)=>{let n=s.includes(t.id),l=e===t.id;return(0,a.jsxs)("div",{className:"flex items-center flex-1 last:flex-none",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center relative group",children:[(0,a.jsx)(r.motion.div,{initial:!1,animate:{backgroundColor:n?"rgb(16, 185, 129)":l?"rgba(16, 185, 129, 0.2)":"rgba(255, 255, 255, 0.04)",borderColor:n||l?"rgb(16, 185, 129)":"rgba(255, 255, 255, 0.1)"},className:(0,h.cn)("flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl sm:rounded-2xl border-2 transition-all shadow-lg",n?"text-white":l?"text-emerald-400":"text-zinc-600"),children:n?(0,a.jsx)(c.Check,{className:"h-5 w-5 sm:h-6 sm:w-6"}):(0,a.jsx)(t.icon,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),(0,a.jsx)("div",{className:(0,h.cn)("absolute -bottom-6 sm:-bottom-8 flex flex-col items-center transition-all duration-300",l?"opacity-100 translate-y-0":"opacity-0 sm:opacity-60 translate-y-1"),children:(0,a.jsx)("span",{className:(0,h.cn)("text-[8px] sm:text-xs font-bold uppercase tracking-wider whitespace-nowrap",l?"text-emerald-400":"text-zinc-500"),children:t.title})})]}),i<p.length-1&&(0,a.jsx)("div",{className:"flex-1 mx-2 sm:mx-4 h-[2px] bg-zinc-800 rounded-full relative overflow-hidden",children:(0,a.jsx)(r.motion.div,{initial:{width:"0%"},animate:{width:n?"100%":"0%"},className:"absolute inset-0 bg-emerald-500",transition:{duration:.5}})})]},t.id)})})})}var f=e.i(790548),b=e.i(143957),j=e.i(82238),y=e.i(54203);function v({title:e,description:s,icon:t,status:i,summary:n,onAction:l,actionLabel:c,isActive:d}){return(0,a.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:(0,h.cn)("card-premium p-6 transition-all duration-300 border-l-4",d?"border-emerald-500 bg-emerald-500/[0.02]":"border-transparent opacity-80","ready"===i&&!d&&"border-blue-500/50"),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:(0,h.cn)("p-3 rounded-xl",d?"bg-emerald-500/10 text-emerald-400":"bg-zinc-800 text-zinc-500"),children:(0,a.jsx)(t,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white uppercase tracking-tight",children:e}),(0,a.jsx)("p",{className:"text-sm text-zinc-500",children:s})]})]}),(0,a.jsx)("div",{className:(0,h.cn)("px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest","approved"===i?"bg-emerald-500/10 text-emerald-400":"ready"===i?"bg-blue-500/10 text-blue-400":"generating"===i?"bg-amber-500/10 text-amber-400 animate-pulse":"bg-zinc-800 text-zinc-500"),children:"approved"===i?"Aprovado":"ready"===i?"Pronto":"generating"===i?"Gerando...":"Pendente"})]}),(0,a.jsx)("div",{className:"min-h-[100px] mb-6",children:n&&n.length>0?(0,a.jsx)("ul",{className:"space-y-2",children:n.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start gap-2 text-sm text-zinc-300",children:[(0,a.jsx)(f.ChevronRight,{className:"h-4 w-4 text-emerald-500 shrink-0 mt-0.5"}),(0,a.jsx)("span",{children:e})]},s))}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full py-4 text-center",children:[(0,a.jsx)(j.AlertCircle,{className:"h-8 w-8 text-zinc-700 mb-2"}),(0,a.jsx)("p",{className:"text-xs text-zinc-600 italic",children:"Aguardando conclusão da etapa anterior"})]})}),(0,a.jsx)(y.Button,{onClick:l,disabled:"generating"===i||!d&&"empty"===i,className:(0,h.cn)("w-full font-bold uppercase tracking-wider text-xs h-10 transition-all",d?"bg-emerald-600 hover:bg-emerald-500 text-white shadow-[0_0_20px_rgba(16,185,129,0.2)]":"btn-ghost border-zinc-800 text-zinc-500"),children:"generating"===i?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:(0,a.jsx)(b.Sparkles,{className:"h-4 w-4"})}),"Consultando Conselho..."]}):(0,a.jsxs)(a.Fragment,{children:[c,(0,a.jsx)(f.ChevronRight,{className:"h-4 w-4 ml-2"})]})})]})}var w=e.i(651752),N=e.i(543609),C=e.i(185629),A=e.i(557354),k=e.i(482142),z=e.i(374406),I=e.i(228700),$=e.i(281853),S=e.i(569995);function P({metrics:e,anomalies:s,onRefresh:t}){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(z.Activity,{className:"h-5 w-5 text-emerald-400"}),(0,a.jsx)("h2",{className:"text-lg font-bold text-white uppercase tracking-tight",children:"Real-Time Performance"})]}),(0,a.jsxs)(y.Button,{variant:"ghost",size:"sm",onClick:t,className:"text-zinc-500 hover:text-white",children:[(0,a.jsx)(I.RefreshCcw,{className:"h-4 w-4 mr-2"}),"Atualizar Dados"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:e.map((e,s)=>(0,a.jsxs)(r.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*s},className:"card-premium p-4 border-t-2 border-t-zinc-800",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1",children:e.label}),(0,a.jsxs)("div",{className:"flex items-end justify-between",children:[(0,a.jsxs)("div",{className:"text-2xl font-black text-white",children:["currency"===e.unit?`R$ ${e.value}`:e.value,"%"===e.unit?"%":""]}),void 0!==e.change&&(0,a.jsxs)("div",{className:(0,h.cn)("flex items-center text-xs font-bold",e.change>=0?"text-emerald-400":"text-red-400"),children:[e.change>=0?(0,a.jsx)(A.TrendingUp,{className:"h-3 w-3 mr-1"}):(0,a.jsx)(k.TrendingDown,{className:"h-3 w-3 mr-1"}),Math.abs(e.change),"%"]})]}),e.target&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-white/[0.03]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-[9px] mb-1",children:[(0,a.jsxs)("span",{className:"text-zinc-600 font-bold uppercase",children:["Meta: ",e.target,"%"===e.unit?"%":""]}),(0,a.jsx)("span",{className:(0,h.cn)("font-bold","success"===e.status?"text-emerald-500":"danger"===e.status?"text-red-500":"text-amber-500"),children:"success"===e.status?"No Alvo":"Desvio"})]}),(0,a.jsx)("div",{className:"h-1 bg-zinc-900 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:(0,h.cn)("h-full rounded-full transition-all duration-1000","success"===e.status?"bg-emerald-500":"danger"===e.status?"bg-red-500":"bg-amber-500"),style:{width:`${Math.min(Number(e.value)/e.target*100,100)}%`}})})]})]},e.label))}),s&&s.length>0&&(0,a.jsxs)(r.motion.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"card-premium p-5 border-l-4 border-l-amber-500 bg-amber-500/[0.02]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)($.AlertTriangle,{className:"h-5 w-5 text-amber-500"}),(0,a.jsx)("h3",{className:"text-sm font-bold text-white uppercase tracking-wider",children:"Detecção de Anomalia Estratégica"})]}),(0,a.jsx)("div",{className:"space-y-4",children:s.map((e,s)=>(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-amber-500/10 flex items-center justify-center shrink-0",children:(0,a.jsx)(S.Lightbulb,{className:"h-4 w-4 text-amber-500"})}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm text-zinc-300 leading-relaxed",children:e})})]},s))}),(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-white/[0.05] flex justify-end",children:(0,a.jsx)(y.Button,{size:"sm",className:"btn-accent h-8 text-[10px] uppercase font-bold tracking-widest",children:"Aplicar Ajustes no Funil"})})]})]})}function T(){let e=(0,t.useParams)(),c=(0,t.useRouter)(),[h,p]=(0,s.useState)(null),[f,j]=(0,s.useState)(!0),[y,A]=(0,s.useState)([]),[k,z]=(0,s.useState)("funnel"),[I]=(0,s.useState)([{label:"CTR Médio",value:.65,target:1.2,unit:"%",status:"danger",change:-12},{label:"CPC Médio",value:2.45,target:1.5,unit:"currency",status:"warning",change:8},{label:"Conversão",value:3.2,target:5,unit:"%",status:"warning",change:-5},{label:"ROAS",value:2.1,target:4,unit:"ratio",status:"danger",change:-15}]),[$]=(0,s.useState)(["CTR < 0.8%: O Design não está parando o scroll no Meta Ads. O framework C.H.A.P.E.U sugere aumentar o Contraste e a Hierarquia Visual nos primeiros 3 segundos.","CPC acima do benchmark: A segmentação de audiência pode estar muito ampla ou a Big Idea da copy não está ressonando com o público 'Inconsciente'."]);(0,s.useEffect)(()=>{if(!e.id)return;let a=e.id,s=(0,i.onSnapshot)((0,i.doc)(n.db,"campaigns",a),e=>{e.exists()?l(e.data()):t()});async function t(){try{let e=await (0,i.getDoc)((0,i.doc)(n.db,"funnels",a));if(e.exists()){let s=e.data(),t=(0,i.collection)(n.db,"funnels",a,"copyProposals"),r=await (0,i.getDocs)((0,i.query)(t,(0,i.where)("status","==","approved"),(0,i.limit)(1))),c=r.docs.length>0?r.docs[0].data():null,d={id:a,funnelId:a,brandId:s.brandId||"",userId:s.userId||"",name:s.name||"Nova Campanha",status:"active",funnel:{type:s.type||"Funnel",architecture:s.architecture||"",targetAudience:s.targetAudience||s.context?.audience?.who||"",mainGoal:s.mainGoal||s.context?.objective||"",stages:s.stages||[],summary:s.summary||""},copywriting:c?{bigIdea:c.content.primary?.slice(0,500)||"Big Idea aprovada",headlines:c.content.headlines||[],mainScript:c.content.primary||"",tone:c.awarenessStage||"problem_aware",keyBenefits:[],counselor_reference:c.copywriterInsights?.[0]?.copywriterName||"Conselho de Copy"}:void 0,createdAt:s.createdAt,updatedAt:s.updatedAt};l(d)}}catch(e){console.error("Erro no scanner de fallback:",e)}}function l(e){e.funnel||(e.funnel={type:"Funnel",architecture:"",targetAudience:"",mainGoal:"",stages:[],summary:""}),p(e);let a=[];e.funnel&&a.push("funnel"),e.copywriting&&a.push("copy"),e.social&&a.push("social"),e.design&&a.push("design"),e.ads&&a.push("ads"),A(a),e.copywriting?e.social?e.design?(e.ads,z("ads")):z("design"):z("social"):z("copy"),j(!1)}return()=>s()},[e.id]);let S=async e=>{h&&(C.notify.info(`Iniciando ${e}`,`O Conselho est\xe1 sendo convocado...`),"funnel"===e?c.push(`/funnels/${h.funnelId}?campaignId=${h.id}`):"copy"===e?c.push(`/funnels/${h.funnelId}/copy?campaignId=${h.id}`):"social"===e?c.push(`/funnels/${h.funnelId}/social?campaignId=${h.id}`):"design"===e?c.push(`/chat?mode=design&funnelId=${h.funnelId}&campaignId=${h.id}`):"ads"===e?c.push(`/chat?mode=ads&funnelId=${h.funnelId}&campaignId=${h.id}`):C.notify.warning("Em desenvolvimento",`A etapa de ${e} est\xe1 sendo preparada.`))};return f?(0,a.jsxs)("div",{className:"flex min-h-screen flex-col bg-black",children:[(0,a.jsx)(l.Header,{title:"Carregando Comando...",showBack:!0}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)(r.motion.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:(0,a.jsx)(b.Sparkles,{className:"h-12 w-12 text-emerald-500 opacity-20"})})})]}):h?(0,a.jsxs)("div",{className:"flex min-h-screen flex-col bg-black overflow-x-hidden",children:[(0,a.jsx)(l.Header,{title:h.name||"Campanha Sem Nome",showBack:!0,subtitle:"Campaign Command Center"}),(0,a.jsxs)("div",{className:"flex-1 max-w-7xl mx-auto w-full px-4 py-6 sm:px-6 sm:py-8",children:[(0,a.jsxs)("section",{className:"mb-8 sm:mb-12",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[(0,a.jsx)(w.Zap,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-400"}),(0,a.jsx)("h2",{className:"text-[10px] sm:text-sm font-bold uppercase tracking-[0.2em] text-zinc-400",children:"The Golden Thread"})]}),(0,a.jsx)(g,{currentStageId:k,completedStages:y})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-12",children:[(0,a.jsx)(v,{title:"O Cérebro",description:"Arquitetura & Estratégia de Funil",icon:d.Target,status:h.funnel?"approved":"empty",summary:h.funnel?[`Tipo: ${h.funnel.type}`,`Objetivo: ${h.funnel.mainGoal}`,`P\xfablico: ${h.funnel.targetAudience}`]:[],onAction:()=>S("funnel"),actionLabel:h.funnel?"Ver Estratégia":"Definir Funil",isActive:"funnel"===k}),(0,a.jsx)(v,{title:"A Voz",description:"Copywriting Persuasivo",icon:o.PenTool,status:h.copywriting?"approved":(h.funnel,"empty"),summary:h.copywriting?[`Big Idea: ${h.copywriting.bigIdea.slice(0,60)}...`,`Tom: ${h.copywriting.tone}`,`Base: ${h.copywriting.counselor_reference||"Conselho"}`]:[],onAction:()=>S("copy"),actionLabel:h.copywriting?"Ver Copy":"Gerar Copy",isActive:"copy"===k}),(0,a.jsx)(v,{title:"A Atenção",description:"Social Media & Hooks",icon:m.Share2,status:h.social?"approved":(h.copywriting,"empty"),summary:h.social?[`${h.social.hooks?.length||0} Hooks estrat\xe9gicos`,`Plataformas: ${h.social.platforms?.join(", ")||"Todas"}`]:[],onAction:()=>S("social"),actionLabel:h.social?"Ver Hooks":"Gerar Hooks",isActive:"social"===k}),(0,a.jsx)(v,{title:"O Visual",description:"Design Intelligence (C.H.A.P.E.U)",icon:u.Palette,status:h.design?"approved":h.social?"ready":"empty",summary:h.design?[`Estilo: ${h.design.visualStyle}`,`${h.design.assetsUrl?.length||0} Criativo(s) na Linha de Ouro`,"Engine: NanoBanana Pro"]:h.social?["Aguardando definição visual"]:[],onAction:()=>S("design"),actionLabel:h.design?"Ver Design":"Gerar Visuais",isActive:"design"===k}),(0,a.jsx)(v,{title:"A Escala",description:"Conselho de Ads & Tráfego",icon:x.BarChart3,status:h.ads?"approved":h.design?"ready":"empty",summary:h.ads?[`Canais: ${h.ads.channels.join(", ")}`,`Budget Sugerido: ${h.ads.suggestedBudget}`]:h.design?["Design & Copy sincronizados","Pronto para definir canais e budget"]:[],onAction:()=>S("ads"),actionLabel:h.ads?"Ver Campanha":"Gerar Estrutura Ads",isActive:"ads"===k})]}),(0,a.jsx)("section",{className:"mt-12",children:(0,a.jsx)(P,{metrics:I,anomalies:$,onRefresh:()=>C.notify.info("Sincronizando","Buscando métricas da Meta Ads API...")})})]})]}):(0,a.jsxs)("div",{className:"flex min-h-screen flex-col bg-black",children:[(0,a.jsx)(l.Header,{title:"Campanha não encontrada",showBack:!0}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center p-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(N.ShieldCheck,{className:"h-16 w-16 text-zinc-800 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"Campanha Extraviada"}),(0,a.jsx)("p",{className:"text-zinc-500 max-w-xs mx-auto",children:"Não conseguimos localizar este manifesto estratégico no nosso banco de dados."})]})})]})}e.s(["default",()=>T],899270)}]);