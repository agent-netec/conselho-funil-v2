(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,587975,e=>{"use strict";let a=(0,e.i(946089).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],587975)},284680,e=>{"use strict";let a=(0,e.i(946089).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],284680)},416145,e=>{"use strict";let a=(0,e.i(946089).default)("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);e.s(["Twitter",()=>a],416145)},965072,e=>{"use strict";let a=(0,e.i(946089).default)("linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);e.s(["Linkedin",()=>a],965072)},938203,e=>{"use strict";let a=(0,e.i(946089).default)("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);e.s(["Instagram",()=>a],938203)},710806,e=>{"use strict";var a=e.i(430459),t=e.i(833145),s=e.i(58333),i=e.i(615090),r=e.i(533763);e.i(240925);var c=e.i(977031),l=e.i(597482),n=e.i(26953),o=e.i(749442),d=e.i(54203),m=e.i(284680),x=e.i(587975),h=e.i(143957),p=e.i(800598),u=e.i(439469),f=e.i(416145),g=e.i(938203),y=e.i(965072),j=e.i(651752),w=e.i(860205),b=e.i(790548),N=e.i(82238),v=e.i(255006),k=e.i(416493),S=e.i(185629);let C=[{id:"meta",label:"Meta (FB/IG)",icon:g.Instagram,color:"text-pink-500"},{id:"linkedin",label:"LinkedIn",icon:y.Linkedin,color:"text-blue-600"},{id:"twitter",label:"X / Twitter",icon:f.Twitter,color:"text-zinc-200"},{id:"tiktok",label:"TikTok",icon:j.Zap,color:"text-cyan-400"}];function z(){let e=(0,s.useParams)(),f=(0,s.useRouter)(),g=(0,s.useSearchParams)(),{user:y}=(0,k.useAuthStore)(),z=e.id,T=g.get("campaignId"),[I,A]=(0,t.useState)(null),[B,L]=(0,t.useState)(null),[M,P]=(0,t.useState)(!0),[E,H]=(0,t.useState)(!1),[R,_]=(0,t.useState)([]);(0,t.useEffect)(()=>{!async function(){if(z)try{let e=await (0,c.getDoc)((0,c.doc)(l.db,"funnels",z));if(e.exists()){let a=e.data();A({id:e.id,...a});let t=T||z,s=await (0,c.getDoc)((0,c.doc)(l.db,"campaigns",t)),i=s.exists()?s.data():null;if(!i||!i.copywriting){let e=(0,c.collection)(l.db,"funnels",z,"copyProposals"),a=await (0,c.getDocs)((0,c.query)(e,(0,c.where)("status","==","approved"),(0,c.limit)(1)));if(a.docs.length>0){let e=a.docs[0].data();i={...i,copywriting:{bigIdea:e.content.primary?.slice(0,500)||"Big Idea aprovada",headlines:e.content.headlines||[],mainScript:e.content.primary||"",tone:e.awarenessStage||"problem_aware",counselor_reference:e.copywriterInsights?.[0]?.copywriterName||"Conselho de Copy"}}}}L(i),i?.social?.hooks&&_(i.social.hooks)}}catch(e){console.error("Error loading data:",e)}finally{P(!1)}}()},[z]);let D=async()=>{if(!I||!B?.copywriting)return void S.notify.error("Erro","Aprove uma copy antes de gerar hooks sociais.");H(!0);try{let e=await fetch("/api/social/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({funnelId:z,userId:y?.uid,context:{objective:I.context.objective,copy:B.copywriting.mainScript,targetAudience:I.context.audience?.who}})}),a=await e.json();a.success?(_(a.hooks),S.notify.success("Hooks gerados com sucesso!")):S.notify.error("Erro",a.error)}catch(e){S.notify.error("Erro","Falha ao convocar Conselho de Social")}finally{H(!1)}},F=async()=>{if(z&&0!==R.length){P(!0);try{let e=T||z;await (0,n.updateCampaignManifesto)(e,{social:{hooks:R,platforms:["Instagram","Facebook","LinkedIn"]}}),S.notify.success("Estratégia Social Aprovada!"),f.push(`/campaigns/${e}`)}catch(e){S.notify.error("Erro","Falha ao salvar estratégia social")}finally{P(!1)}}};return M?(0,a.jsxs)("div",{className:"flex min-h-screen flex-col bg-black",children:[(0,a.jsx)(o.Header,{title:"Conselho de Social"}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)(x.Loader2,{className:"h-8 w-8 animate-spin text-emerald-500"})})]}):(0,a.jsxs)("div",{className:"flex min-h-screen flex-col bg-black",children:[(0,a.jsx)(o.Header,{title:"Social Media & Hooks",showBack:!0}),(0,a.jsxs)("div",{className:"flex-1 p-8 max-w-5xl mx-auto w-full",children:[(0,a.jsxs)(r.default,{href:`/campaigns/${T||z}`,className:"inline-flex items-center gap-2 text-zinc-400 hover:text-white mb-6 transition-colors",children:[(0,a.jsx)(m.ArrowLeft,{className:"h-4 w-4"}),"Voltar ao Comando"]}),(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-2xl bg-pink-500/10 text-pink-500",children:(0,a.jsx)(u.Share2,{className:"h-8 w-8"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"Conselho de Social"}),(0,a.jsx)("p",{className:"text-zinc-500",children:"Transformando sua copy em atenção imparável."})]})]}),B?.copywriting?(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:C.map(e=>(0,a.jsxs)("div",{className:"card-premium p-4 flex items-center gap-3",children:[(0,a.jsx)(e.icon,{className:(0,v.cn)("h-5 w-5",e.color)}),(0,a.jsx)("span",{className:"text-sm font-medium text-zinc-300",children:e.label})]},e.id))}),0===R.length?(0,a.jsxs)("div",{className:"card-premium p-12 text-center",children:[(0,a.jsx)(j.Zap,{className:"h-12 w-12 text-zinc-700 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Pronto para capturar atenção?"}),(0,a.jsxs)(d.Button,{onClick:D,disabled:E,className:"btn-accent h-12 px-8",children:[E?(0,a.jsx)(x.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}):(0,a.jsx)(h.Sparkles,{className:"mr-2 h-5 w-5"}),"Gerar Hooks Estratégicos"]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,a.jsx)(w.Target,{className:"h-5 w-5 text-emerald-400"}),"Hooks Sugeridos"]}),(0,a.jsxs)(d.Button,{variant:"ghost",onClick:D,disabled:E,className:"text-zinc-500 hover:text-white",children:[(0,a.jsx)(p.RefreshCw,{className:(0,v.cn)("h-4 w-4 mr-2",E&&"animate-spin")}),"Recriar Hooks"]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:R.map((e,t)=>(0,a.jsx)(i.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"card-premium p-6 group hover:border-emerald-500/30 transition-all",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded bg-zinc-800 text-zinc-400",children:e.style||"Padrão"}),(0,a.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded bg-emerald-500/10 text-emerald-400",children:e.platform||"Multi-channel"})]}),(0,a.jsxs)("p",{className:"text-lg text-white font-medium leading-relaxed",children:['"',e.content,'"']})]}),(0,a.jsx)(d.Button,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(b.ChevronRight,{className:"h-5 w-5"})})]})},t))}),(0,a.jsx)("div",{className:"pt-8 border-t border-white/[0.05] flex justify-end",children:(0,a.jsxs)(d.Button,{onClick:F,className:"btn-accent h-12 px-12 text-lg font-bold shadow-[0_0_30px_rgba(16,185,129,0.3)]",children:["Aprovar e Seguir para Design",(0,a.jsx)(b.ChevronRight,{className:"ml-2 h-5 w-5"})]})})]})]}):(0,a.jsxs)("div",{className:"card-premium p-8 text-center border-dashed border-amber-500/30",children:[(0,a.jsx)(N.AlertCircle,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-2",children:"Copywriting Pendente"}),(0,a.jsx)("p",{className:"text-zinc-500 mb-6",children:"Você precisa aprovar uma copy na etapa anterior para que o Conselho de Social tenha base estratégica."}),(0,a.jsx)(r.default,{href:`/funnels/${z}/copy`,children:(0,a.jsx)(d.Button,{className:"btn-accent",children:"Ir para Copywriting"})})]})]})]})]})}e.s(["default",()=>z])}]);