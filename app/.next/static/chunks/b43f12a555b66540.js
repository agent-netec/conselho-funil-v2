(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,987444,e=>{"use strict";var t=e.i(430459),a=e.i(255006);function s({className:e,type:s,...r}){return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>s])},634292,e=>{"use strict";let t=(0,e.i(946089).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],634292)},62046,e=>{"use strict";var t=e.i(249454);function a(){let{selectedBrand:e}=(0,t.useBrandStore)();return e}e.s(["useActiveBrand",()=>a])},184324,e=>{"use strict";let t=(0,e.i(946089).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["ArrowUpRight",()=>t],184324)},887109,(e,t,a)=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},318569,(e,t,a)=>{"use strict";var s=e.r(887109);function r(){}function i(){}i.resetWarningCache=r,t.exports=function(){function e(e,t,a,r,i,n){if(n!==s){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return a.PropTypes=a,a}},609724,(e,t,a)=>{t.exports=e.r(318569)()},587975,e=>{"use strict";let t=(0,e.i(946089).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],587975)},362164,374432,e=>{"use strict";let t,a;var s,r=e.i(430459),i=e.i(833145),n=e.i(603873),l=e.i(730042),o=e.i(643380),c=e.i(261698),d=e.i(614099),p=e.i(63751),m=e.i(695330),x=e.i(298802);function u(e){var t;let a,s=(t=e,(a=i.forwardRef((e,t)=>{let{children:a,...s}=e;if(i.isValidElement(a)){var r;let e,n,o=(r=a,(n=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?r.ref:(n=(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?r.props.ref:r.props.ref||r.ref),c=function(e,t){let a={...t};for(let s in t){let r=e[s],i=t[s];/^on[A-Z]/.test(s)?r&&i?a[s]=(...e)=>{let t=i(...e);return r(...e),t}:r&&(a[s]=r):"style"===s?a[s]={...r,...i}:"className"===s&&(a[s]=[r,i].filter(Boolean).join(" "))}return{...e,...a}}(s,a.props);return a.type!==i.Fragment&&(c.ref=t?(0,l.composeRefs)(t,o):o),i.cloneElement(a,c)}return i.Children.count(a)>1?i.Children.only(null):null})).displayName=`${t}.SlotClone`,a),n=i.forwardRef((e,t)=>{let{children:a,...n}=e,l=i.Children.toArray(a),o=l.find(g);if(o){let e=o.props.children,a=l.map(t=>t!==o?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,r.jsx)(s,{...n,ref:t,children:i.isValidElement(e)?i.cloneElement(e,void 0,a):null})}return(0,r.jsx)(s,{...n,ref:t,children:a})});return n.displayName=`${e}.Slot`,n}e.i(751111);var h=Symbol("radix.slottable");function g(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===h}var f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=u(`Primitive.${t}`),s=i.forwardRef((e,s)=>{let{asChild:i,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(i?a:t,{...n,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),b=e.i(865941),v=e.i(140118),j=e.i(661433),y="Dialog",[w,N]=function(e,t=[]){let a=[],s=()=>{let t=a.map(e=>i.createContext(e));return function(a){let s=a?.[e]||t;return i.useMemo(()=>({[`__scope${e}`]:{...a,[e]:s}}),[a,s])}};return s.scopeName=e,[function(t,s){let n=i.createContext(s),l=a.length;a=[...a,s];let o=t=>{let{scope:a,children:s,...o}=t,c=a?.[e]?.[l]||n,d=i.useMemo(()=>o,Object.values(o));return(0,r.jsx)(c.Provider,{value:d,children:s})};return o.displayName=t+"Provider",[o,function(a,r){let o=r?.[e]?.[l]||n,c=i.useContext(o);if(c)return c;if(void 0!==s)return s;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=a.reduce((t,{useScope:a,scopeName:s})=>{let r=a(e)[`__scope${s}`];return{...t,...r}},{});return i.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return a.scopeName=t.scopeName,a}(s,...t)]}(y),[k,z]=w(y),C=e=>{let{__scopeDialog:t,children:a,open:s,defaultOpen:n,onOpenChange:l,modal:d=!0}=e,p=i.useRef(null),m=i.useRef(null),[x,u]=(0,c.useControllableState)({prop:s,defaultProp:n??!1,onChange:l,caller:y});return(0,r.jsx)(k,{scope:t,triggerRef:p,contentRef:m,contentId:(0,o.useId)(),titleId:(0,o.useId)(),descriptionId:(0,o.useId)(),open:x,onOpenChange:u,onOpenToggle:i.useCallback(()=>u(e=>!e),[u]),modal:d,children:a})};C.displayName=y;var A="DialogTrigger",D=i.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,i=z(A,a),o=(0,l.useComposedRefs)(t,i.triggerRef);return(0,r.jsx)(f.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":K(i.open),...s,ref:o,onClick:(0,n.composeEventHandlers)(e.onClick,i.onOpenToggle)})});D.displayName=A;var T="DialogPortal",[R,E]=w(T,{forceMount:void 0}),I=e=>{let{__scopeDialog:t,forceMount:a,children:s,container:n}=e,l=z(T,t);return(0,r.jsx)(R,{scope:t,forceMount:a,children:i.Children.map(s,e=>(0,r.jsx)(x.Presence,{present:a||l.open,children:(0,r.jsx)(m.Portal,{asChild:!0,container:n,children:e})}))})};I.displayName=T;var S="DialogOverlay",_=i.forwardRef((e,t)=>{let a=E(S,e.__scopeDialog),{forceMount:s=a.forceMount,...i}=e,n=z(S,e.__scopeDialog);return n.modal?(0,r.jsx)(x.Presence,{present:s||n.open,children:(0,r.jsx)(F,{...i,ref:t})}):null});_.displayName=S;var O=u("DialogOverlay.RemoveScroll"),F=i.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,i=z(S,a);return(0,r.jsx)(v.RemoveScroll,{as:O,allowPinchZoom:!0,shards:[i.contentRef],children:(0,r.jsx)(f.div,{"data-state":K(i.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),M="DialogContent",$=i.forwardRef((e,t)=>{let a=E(M,e.__scopeDialog),{forceMount:s=a.forceMount,...i}=e,n=z(M,e.__scopeDialog);return(0,r.jsx)(x.Presence,{present:s||n.open,children:n.modal?(0,r.jsx)(P,{...i,ref:t}):(0,r.jsx)(L,{...i,ref:t})})});$.displayName=M;var P=i.forwardRef((e,t)=>{let a=z(M,e.__scopeDialog),s=i.useRef(null),o=(0,l.useComposedRefs)(t,a.contentRef,s);return i.useEffect(()=>{let e=s.current;if(e)return(0,j.hideOthers)(e)},[]),(0,r.jsx)(U,{...e,ref:o,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,n.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:(0,n.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,n.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),L=i.forwardRef((e,t)=>{let a=z(M,e.__scopeDialog),s=i.useRef(!1),n=i.useRef(!1);return(0,r.jsx)(U,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||a.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let r=t.target;a.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),U=i.forwardRef((e,t)=>{let{__scopeDialog:a,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:o,...c}=e,m=z(M,a),x=i.useRef(null),u=(0,l.useComposedRefs)(t,x);return(0,b.useFocusGuards)(),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.FocusScope,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:o,children:(0,r.jsx)(d.DismissableLayer,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":K(m.open),...c,ref:u,onDismiss:()=>m.onOpenChange(!1)})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q,{titleId:m.titleId}),(0,r.jsx)(X,{contentRef:x,descriptionId:m.descriptionId})]})]})}),B="DialogTitle",V=i.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,i=z(B,a);return(0,r.jsx)(f.h2,{id:i.titleId,...s,ref:t})});V.displayName=B;var H="DialogDescription",q=i.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,i=z(H,a);return(0,r.jsx)(f.p,{id:i.descriptionId,...s,ref:t})});q.displayName=H;var W="DialogClose",Z=i.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,i=z(W,a);return(0,r.jsx)(f.button,{type:"button",...s,ref:t,onClick:(0,n.composeEventHandlers)(e.onClick,()=>i.onOpenChange(!1))})});function K(e){return e?"open":"closed"}Z.displayName=W;var G="DialogTitleWarning",[J,Y]=(s={contentName:M,titleName:B,docsSlug:"dialog"},t=i.createContext(s),(a=e=>{let{children:a,...s}=e,n=i.useMemo(()=>s,Object.values(s));return(0,r.jsx)(t.Provider,{value:n,children:a})}).displayName=G+"Provider",[a,function(e){let a=i.useContext(t);if(a)return a;if(void 0!==s)return s;throw Error(`\`${e}\` must be used within \`${G}\``)}]),Q=({titleId:e})=>{let t=Y(G),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return i.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},X=({contentRef:e,descriptionId:t})=>{let a=Y("DialogDescriptionWarning"),s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return i.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null};e.s(["Close",()=>Z,"Content",()=>$,"Description",()=>q,"Overlay",()=>_,"Portal",()=>I,"Root",()=>C,"Title",()=>V,"Trigger",()=>D],374432);var ee=e.i(152963),ee=ee,et=e.i(255006);function ea({...e}){return(0,r.jsx)(C,{"data-slot":"dialog",...e})}function es({...e}){return(0,r.jsx)(D,{"data-slot":"dialog-trigger",...e})}function er({...e}){return(0,r.jsx)(I,{"data-slot":"dialog-portal",...e})}function ei({className:e,...t}){return(0,r.jsx)(_,{"data-slot":"dialog-overlay",className:(0,et.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function en({className:e,children:t,showCloseButton:a=!0,...s}){return(0,r.jsxs)(er,{"data-slot":"dialog-portal",children:[(0,r.jsx)(ei,{}),(0,r.jsxs)($,{"data-slot":"dialog-content",className:(0,et.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",e),...s,children:[t,a&&(0,r.jsxs)(Z,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,r.jsx)(ee.default,{}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function el({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"dialog-header",className:(0,et.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function eo({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"dialog-footer",className:(0,et.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function ec({className:e,...t}){return(0,r.jsx)(V,{"data-slot":"dialog-title",className:(0,et.cn)("text-lg leading-none font-semibold",e),...t})}function ed({className:e,...t}){return(0,r.jsx)(q,{"data-slot":"dialog-description",className:(0,et.cn)("text-muted-foreground text-sm",e),...t})}e.s(["Dialog",()=>ea,"DialogContent",()=>en,"DialogDescription",()=>ed,"DialogFooter",()=>eo,"DialogHeader",()=>el,"DialogTitle",()=>ec,"DialogTrigger",()=>es],362164)},625179,e=>{"use strict";let t=(0,e.i(946089).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],625179)},510370,e=>{"use strict";let t=(0,e.i(946089).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],510370)},805239,e=>{"use strict";let t=(0,e.i(946089).default)("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);e.s(["Layout",()=>t],805239)},151999,e=>{"use strict";let t=(0,e.i(946089).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],151999)},114773,e=>{"use strict";let t=(0,e.i(946089).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["default",()=>t])},661776,e=>{"use strict";e.i(840779);var t=e.i(970152),a=e.i(597482);e.i(570815);let s=(0,t.getStorage)(a.default);async function r(e,a,r,i){let n=`brand-assets/${r}/${a}/${Date.now()}_${i}`,l=(0,t.ref)(s,n);try{let s=e.split("&")[0].split("?")[0],n=await fetch(s),o=await n.blob();return await (0,t.uploadBytesResumable)(l,o,{contentType:o.type,customMetadata:{userId:r,brandId:a,originalName:i,uploadedAt:new Date().toISOString()}}),await (0,t.getDownloadURL)(l)}catch(e){throw console.error("Erro ao processar binário da imagem para upload:",e),Error("Falha na conversão binária da imagem gerada.")}}async function i(e,a,r){let i=Date.now(),n=e.name.split(".").pop(),l=`logo_${i}.${n}`,o=`brands/${r}/${a}/logos/${l}`,c=(0,t.ref)(s,o),d=(0,t.uploadBytesResumable)(c,e,{contentType:e.type});return new Promise((e,a)=>{d.on("state_changed",null,e=>a(e),async()=>{try{let a=await (0,t.getDownloadURL)(d.snapshot.ref);e(a)}catch(e){a(e)}})})}async function n(e,a,r,i){let n=Date.now(),l=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),o=`${n}_${l}`,c=`brand-assets/${r}/${a}/${o}`,d=(0,t.ref)(s,c),p={contentType:e.type,customMetadata:{userId:r,brandId:a,originalName:e.name,uploadedAt:new Date().toISOString()}},m=(0,t.uploadBytesResumable)(d,e,p);return new Promise((e,a)=>{m.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;i?.(Math.round(t))},e=>{a(e)},async()=>{try{let a=await (0,t.getDownloadURL)(m.snapshot.ref);e({url:a,metadata:m.snapshot.metadata})}catch(e){a(e)}})})}async function l(e){let a=(0,t.ref)(s,e);await (0,t.deleteObject)(a)}function o(e){let t=[".pdf",".doc",".docx",".txt",".md",".png",".jpg",".jpeg",".webp",".svg"];if(!["application/pdf","application/x-pdf","application/vnd.pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/markdown","image/png","image/jpeg","image/webp","image/svg+xml"].includes(e.type)){let a="."+e.name.split(".").pop()?.toLowerCase();if(!t.includes(a))return{valid:!1,error:`Formato n\xe3o suportado. Use: ${t.join(", ")}`}}return e.type.startsWith("image/"),e.size>0xa00000?{valid:!1,error:`Arquivo muito grande. M\xe1ximo: 10MB`}:0===e.size?{valid:!1,error:"O arquivo parece estar vazio ou corrompido."}:{valid:!0}}e.s(["deleteBrandAssetFromStorage",()=>l,"uploadBase64Image",()=>r,"uploadBrandAsset",()=>n,"uploadLogo",()=>i,"validateBrandAssetFile",()=>o])},619904,e=>{"use strict";e.i(240925);var t=e.i(977031),a=e.i(597482),s=e.i(661776);async function r(e,s,r,i){try{let n=(0,t.collection)(a.db,"brands",e,"audit_logs");await (0,t.addDoc)(n,{action:s,details:r,userId:i,createdAt:t.Timestamp.now()})}catch(e){console.error("Failed to log audit:",e)}}async function i(e){return(await (0,t.addDoc)((0,t.collection)(a.db,"brand_assets"),{...e,isApprovedForAI:e.isApprovedForAI??!1})).id}async function n(e){let s=(0,t.query)((0,t.collection)(a.db,"brand_assets"),(0,t.where)("brandId","==",e),(0,t.orderBy)("createdAt","desc"));return(await (0,t.getDocs)(s)).docs.map(e=>({id:e.id,...e.data()}))}async function l(e,s,i){let n=(0,t.doc)(a.db,"brand_assets",e),l=await (0,t.getDoc)(n);if(!l.exists())throw Error("Asset não encontrado");let o=l.data();await (0,t.updateDoc)(n,{isApprovedForAI:s}),await r(o.brandId,s?"APPROVE_ASSET_AI":"REVOKE_ASSET_AI",{assetId:e,assetName:o.name},i);let c=(0,t.collection)(a.db,"brand_assets",e,"chunks"),d=await (0,t.getDocs)(c);if(!d.empty){let e=(0,t.writeBatch)(a.db);d.docs.forEach(t=>{e.update(t.ref,{"metadata.isApprovedForAI":s})}),await e.commit()}}async function o(e,r){try{await (0,s.deleteBrandAssetFromStorage)(r)}catch(e){console.error("Erro ao deletar do Storage:",e)}let i=(0,t.doc)(a.db,"brand_assets",e);await (0,t.deleteDoc)(i)}e.s(["createAsset",()=>i,"deleteAsset",()=>o,"getBrandAssets",()=>n,"toggleAssetApproval",()=>l],619904)},3710,e=>{"use strict";var t=e.i(114773);e.s(["ImageIcon",()=>t.default])},557139,e=>{"use strict";let t=(0,e.i(946089).default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);e.s(["List",()=>t],557139)},848189,e=>{"use strict";var t=e.i(430459),a=e.i(833145),s=e.i(615090),r=e.i(749442),i=e.i(62046),n=e.i(860205),l=e.i(3710),o=e.i(151999),c=e.i(557354);let d=(0,e.i(946089).default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);function p({summary:e,isLoading:a}){let r=[{title:"Total de Ativos",value:a?"—":e?.total||0,subtitle:"Vetorizados no Pinecone",icon:n.Target,color:"text-emerald-400",bg:"bg-emerald-500/10",delay:.1},{title:"Análises Visuais",value:a?"—":e?.visualCount||0,subtitle:"Criativos analisados",icon:l.ImageIcon,color:"text-purple-400",bg:"bg-purple-500/10",delay:.15},{title:"Base de Conhecimento",value:a?"—":e?.knowledgeCount||0,subtitle:"Documentos e brand books",icon:o.FileText,color:"text-blue-400",bg:"bg-blue-500/10",delay:.2},{title:"Score Visual Médio",value:a?"—":e?.avgVisualScore||0,subtitle:"Média das heurísticas",icon:d,color:"text-amber-400",bg:"bg-amber-500/10",trend:{value:"+2.4%",positive:!0},delay:.25}];return(0,t.jsx)("div",{className:"grid gap-5 md:grid-cols-2 lg:grid-cols-4 mb-8",children:r.map((e,a)=>(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:e.delay},className:"card-premium card-hover p-5",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)("div",{className:`flex h-10 w-10 items-center justify-center rounded-xl ${e.bg}`,children:(0,t.jsx)(e.icon,{className:`h-5 w-5 ${e.color}`})}),e.trend&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-[10px] font-bold text-emerald-400 uppercase tracking-tighter",children:[(0,t.jsx)(c.TrendingUp,{className:"h-3 w-3"}),e.trend.value]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"stat-value",children:e.value}),(0,t.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:e.subtitle})]}),(0,t.jsx)("p",{className:"mt-3 text-[10px] text-zinc-600 font-bold uppercase tracking-widest",children:e.title})]},a))})}var m=e.i(634292),x=e.i(625179),u=e.i(82238),h=e.i(255006),g=e.i(362164),f=e.i(628626),b=e.i(651752),v=e.i(805239),j=e.i(184324),y=e.i(58333);function w({asset:e,isOpen:a,onOpenChange:r}){let i=(0,y.useRouter)();if(!e)return null;let l=[{label:"Contraste",value:e.metadata?.contrast||"85%",icon:v.Layout,color:"text-purple-400"},{label:"Legibilidade",value:e.metadata?.readability||"92%",icon:x.Eye,color:"text-blue-400"},{label:"Hook Strength",value:e.metadata?.hookStrength||"78%",icon:b.Zap,color:"text-amber-400"},{label:"Congruência",value:e.metadata?.congruence||"High",icon:n.Target,color:"text-emerald-400"}];return(0,t.jsx)(g.Dialog,{open:a,onOpenChange:r,children:(0,t.jsx)(g.DialogContent,{className:"max-w-3xl bg-zinc-950/90 backdrop-blur-2xl border-white/[0.08] text-white p-0 overflow-hidden shadow-2xl",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"h-32 w-full bg-gradient-to-br from-purple-500/20 via-emerald-500/10 to-zinc-950 border-b border-white/[0.05]"}),(0,t.jsxs)("div",{className:"px-6 pb-6 -mt-12 relative z-10",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsxs)(s.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"aspect-square rounded-2xl overflow-hidden bg-zinc-900 border border-white/[0.1] shadow-2xl flex items-center justify-center group relative",children:[e.imageUri?(0,t.jsx)("img",{src:e.imageUri,alt:e.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 text-zinc-500",children:[(0,t.jsx)(o.FileText,{className:"h-12 w-12 opacity-20"}),(0,t.jsx)("span",{className:"text-xs font-mono uppercase tracking-widest",children:"Documento de Texto"})]}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-4",children:(0,t.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-white/80",children:"Preview em Alta Fidelidade"})})]})}),(0,t.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:(0,h.cn)("px-2 py-0.5 rounded-full text-[9px] font-black uppercase tracking-widest border","visual"===e.namespace?"bg-purple-500/10 border-purple-500/20 text-purple-400":"bg-blue-500/10 border-blue-500/20 text-blue-400"),children:e.namespace}),(0,t.jsx)("span",{className:"text-[10px] text-zinc-500 font-mono uppercase tracking-widest",children:new Date(e.createdAt).toLocaleDateString("pt-BR")})]}),(0,t.jsx)("h2",{className:"text-2xl font-black tracking-tighter text-white leading-tight",children:e.name||e.assetType}),(0,t.jsxs)("p",{className:"text-sm text-zinc-400 mt-1 font-medium",children:[e.assetType," • Score de Performance: ",(0,t.jsx)("span",{className:"text-emerald-400",children:e.score})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:l.map((e,a)=>(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"p-3 rounded-xl bg-white/[0.02] border border-white/[0.05] hover:bg-white/[0.04] transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(e.icon,{className:(0,h.cn)("h-3.5 w-3.5",e.color)}),(0,t.jsx)("span",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:e.label})]}),(0,t.jsx)("span",{className:"text-sm font-bold text-white",children:e.value})]},e.label))}),(0,t.jsxs)("div",{className:"p-4 rounded-xl bg-emerald-500/[0.03] border border-emerald-500/10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("span",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest",children:"Métricas de Campanha"}),(0,t.jsx)(c.TrendingUp,{className:"h-4 w-4 text-emerald-500"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[9px] text-zinc-500 uppercase font-bold",children:"CTR"}),(0,t.jsxs)("p",{className:"text-lg font-black text-white",children:[e.metrics.ctr,"%"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-[9px] text-zinc-500 uppercase font-bold",children:"Conversão"}),(0,t.jsxs)("p",{className:"text-lg font-black text-white",children:[e.metrics.conversion,"%"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-[9px] text-zinc-500 uppercase font-bold",children:"ROI"}),(0,t.jsxs)("p",{className:"text-lg font-black text-white",children:[e.metrics.roi,"x"]})]})]})]}),(0,t.jsxs)("button",{onClick:()=>{let t=encodeURIComponent(`Gostaria de um conselho sobre o ativo: ${e.name||e.assetType}. Ele tem um score de ${e.score}.`);i.push(`/chat?mode=general&initialMessage=${t}`),r(!1)},className:"w-full group relative flex items-center justify-center gap-3 h-12 rounded-xl bg-white text-black font-black text-xs uppercase tracking-widest overflow-hidden transition-all hover:scale-[1.02] active:scale-[0.98]",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-400 to-purple-500 opacity-0 group-hover:opacity-10 transition-opacity"}),(0,t.jsx)(f.MessageSquare,{className:"h-4 w-4"}),"Consultar Conselho sobre este Ativo",(0,t.jsx)(j.ArrowUpRight,{className:"h-3.5 w-3.5 transition-transform group-hover:translate-x-0.5 group-hover:-translate-y-0.5"})]})]})]}),e.strategicAdvice&&(0,t.jsxs)("div",{className:"mt-8 p-4 rounded-2xl bg-zinc-900/50 border border-white/[0.05] relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:(0,t.jsx)(b.Zap,{className:"h-12 w-12 text-amber-500"})}),(0,t.jsx)("h3",{className:"text-[10px] font-black text-amber-500 uppercase tracking-[0.2em] mb-2",children:"Conselho Estratégico"}),(0,t.jsxs)("p",{className:"text-sm text-zinc-300 leading-relaxed italic",children:['"',e.strategicAdvice,'"']})]})]})]})})})}function N({assets:e,isLoading:r,viewMode:i="list"}){let[n,d]=(0,a.useState)(null),[p,g]=(0,a.useState)(!1),f=e=>{d(e),g(!0)};return r?(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-16 w-full animate-pulse rounded-lg bg-zinc-800/50"},e))}):0===e.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-zinc-800/50",children:(0,t.jsx)(u.AlertCircle,{className:"h-6 w-6 text-zinc-500"})}),(0,t.jsx)("h3",{className:"mt-4 text-sm font-medium text-white",children:"Nenhum ativo encontrado"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-zinc-500 max-w-[200px]",children:"Analise seus primeiros criativos ou suba brand books para ver as métricas."})]}):(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("div",{className:(0,h.cn)("grid grid-cols-1 gap-3 md:hidden","grid"===i&&"hidden"),children:e.map((e,a)=>(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"p-4 rounded-xl bg-zinc-900/50 border border-white/[0.05]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:(0,h.cn)("flex h-10 w-10 items-center justify-center rounded-lg border","visual"===e.namespace?"bg-purple-500/10 border-purple-500/20":"bg-blue-500/10 border-blue-500/20"),children:"visual"===e.namespace?(0,t.jsx)(l.ImageIcon,{className:"h-5 w-5 text-purple-400"}):(0,t.jsx)(o.FileText,{className:"h-5 w-5 text-blue-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-bold text-white line-clamp-1",children:e.name||e.assetType}),(0,t.jsxs)("p",{className:"text-[10px] text-zinc-500 uppercase",children:[e.assetType," • ",new Date(e.createdAt).toLocaleDateString("pt-BR")]})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsx)("span",{className:(0,h.cn)("text-xs font-bold px-2 py-0.5 rounded-full",e.score>=80?"text-emerald-400 bg-emerald-500/10":e.score>=50?"text-amber-400 bg-amber-500/10":"text-red-400 bg-red-500/10"),children:e.score})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-3 border-t border-white/[0.05]",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] text-zinc-500 uppercase tracking-widest mb-1",children:"CTR"}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(c.TrendingUp,{className:"h-3 w-3 text-emerald-400"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-zinc-200",children:[e.metrics.ctr,"%"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] text-zinc-500 uppercase tracking-widest mb-1",children:"Conversão"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-zinc-200",children:[e.metrics.conversion,"%"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-3 border-t border-white/[0.05]",children:[(0,t.jsxs)("button",{onClick:()=>f(e),className:"flex-1 flex items-center justify-center gap-2 h-9 rounded-lg bg-zinc-800 text-xs font-medium text-zinc-300 transition-colors hover:bg-zinc-700",children:[(0,t.jsx)(x.Eye,{className:"h-3.5 w-3.5"}),"Visualizar"]}),e.imageUri&&(0,t.jsx)("a",{href:e.imageUri,target:"_blank",rel:"noopener noreferrer",className:"flex h-9 w-9 items-center justify-center rounded-lg bg-zinc-800 text-zinc-300",children:(0,t.jsx)(m.ExternalLink,{className:"h-3.5 w-3.5"})})]})]},e.id))}),"grid"===i&&(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-4",children:e.map((e,a)=>(0,t.jsxs)(s.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.03*a},className:"group relative flex flex-col rounded-2xl border border-white/[0.05] bg-zinc-900/40 hover:bg-zinc-900/60 hover:border-white/[0.1] transition-all overflow-hidden shadow-sm",children:[(0,t.jsxs)("div",{className:"p-4 flex items-start justify-between",children:[(0,t.jsx)("div",{className:(0,h.cn)("flex h-10 w-10 items-center justify-center rounded-xl border shadow-inner","visual"===e.namespace?"bg-purple-500/10 border-purple-500/20":"bg-blue-500/10 border-blue-500/20"),children:"visual"===e.namespace?(0,t.jsx)(l.ImageIcon,{className:"h-5 w-5 text-purple-400"}):(0,t.jsx)(o.FileText,{className:"h-5 w-5 text-blue-400"})}),(0,t.jsx)("div",{className:"flex flex-col items-end",children:(0,t.jsxs)("span",{className:(0,h.cn)("text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wider",e.score>=80?"text-emerald-400 bg-emerald-500/10":e.score>=50?"text-amber-400 bg-amber-500/10":"text-red-400 bg-red-500/10"),children:["Score ",e.score]})})]}),(0,t.jsxs)("div",{className:"px-4 pb-4 flex-1",children:[(0,t.jsx)("h4",{className:"text-sm font-bold text-white line-clamp-2 min-h-[40px] leading-tight mb-1 group-hover:text-emerald-400 transition-colors",children:e.name||e.assetType}),(0,t.jsxs)("p",{className:"text-[10px] text-zinc-500 uppercase tracking-tight",children:[e.assetType," • ",new Date(e.createdAt).toLocaleDateString("pt-BR")]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 border-t border-white/[0.05] bg-white/[0.01]",children:[(0,t.jsxs)("div",{className:"p-3 border-r border-white/[0.05] text-center",children:[(0,t.jsx)("p",{className:"text-[9px] text-zinc-500 uppercase font-bold mb-1",children:"CTR"}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,t.jsx)(c.TrendingUp,{className:"h-3 w-3 text-emerald-400"}),(0,t.jsxs)("span",{className:"text-xs font-bold text-zinc-200",children:[e.metrics.ctr,"%"]})]})]}),(0,t.jsxs)("div",{className:"p-3 text-center",children:[(0,t.jsx)("p",{className:"text-[9px] text-zinc-500 uppercase font-bold mb-1",children:"Conv."}),(0,t.jsxs)("span",{className:"text-xs font-bold text-zinc-200",children:[e.metrics.conversion,"%"]})]})]}),(0,t.jsxs)("div",{className:"p-2 bg-zinc-950/50 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsxs)("button",{onClick:()=>f(e),className:"flex-1 h-8 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-[10px] font-bold text-zinc-300 flex items-center justify-center gap-1.5 transition-all",children:[(0,t.jsx)(x.Eye,{className:"h-3.5 w-3.5"})," Detalhes"]}),e.imageUri&&(0,t.jsx)("a",{href:e.imageUri,target:"_blank",rel:"noopener noreferrer",className:"h-8 w-8 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-zinc-300 flex items-center justify-center transition-all",children:(0,t.jsx)(m.ExternalLink,{className:"h-3.5 w-3.5"})})]})]},e.id))}),"list"===i&&(0,t.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left text-sm text-zinc-400",children:[(0,t.jsx)("thead",{className:"text-[10px] uppercase tracking-widest text-zinc-500 border-b border-white/[0.05]",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Ativo"}),(0,t.jsx)("th",{className:"px-4 py-3 font-semibold text-center",children:"Tipo"}),(0,t.jsx)("th",{className:"px-4 py-3 font-semibold text-center",children:"Score"}),(0,t.jsx)("th",{className:"px-4 py-3 font-semibold text-center",children:"CTR"}),(0,t.jsx)("th",{className:"px-4 py-3 font-semibold text-center",children:"Conversão"}),(0,t.jsx)("th",{className:"px-4 py-3 font-semibold text-right",children:"Ação"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-white/[0.02]",children:e.map((e,a)=>(0,t.jsxs)(s.motion.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*a},className:"group hover:bg-white/[0.02] transition-colors",children:[(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:(0,h.cn)("flex h-8 w-8 items-center justify-center rounded-lg border","visual"===e.namespace?"bg-purple-500/10 border-purple-500/20":"bg-blue-500/10 border-blue-500/20"),children:"visual"===e.namespace?(0,t.jsx)(l.ImageIcon,{className:"h-4 w-4 text-purple-400"}):(0,t.jsx)(o.FileText,{className:"h-4 w-4 text-blue-400"})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium text-white line-clamp-1 max-w-[200px]",children:e.name||e.assetType}),(0,t.jsx)("span",{className:"text-[10px] text-zinc-500 uppercase",children:new Date(e.createdAt).toLocaleDateString("pt-BR")})]})]})}),(0,t.jsx)("td",{className:"px-4 py-4 text-center",children:(0,t.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold uppercase bg-zinc-800 text-zinc-400 border border-white/[0.05]",children:e.assetType})}),(0,t.jsx)("td",{className:"px-4 py-4 text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("div",{className:"h-1.5 w-12 rounded-full bg-zinc-800 overflow-hidden",children:(0,t.jsx)("div",{className:(0,h.cn)("h-full rounded-full",e.score>=80?"bg-emerald-500":e.score>=50?"bg-amber-500":"bg-red-500"),style:{width:`${e.score}%`}})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:e.score})]})}),(0,t.jsx)("td",{className:"px-4 py-4 text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,t.jsx)(c.TrendingUp,{className:"h-3 w-3 text-emerald-400"}),(0,t.jsxs)("span",{className:"font-medium text-zinc-300",children:[e.metrics.ctr,"%"]})]})}),(0,t.jsxs)("td",{className:"px-4 py-4 text-center font-medium text-zinc-300",children:[e.metrics.conversion,"%"]}),(0,t.jsx)("td",{className:"px-4 py-4 text-right",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>f(e),className:"p-1.5 rounded-md hover:bg-zinc-800 text-zinc-500 hover:text-white transition-colors",children:(0,t.jsx)(x.Eye,{className:"h-4 w-4"})}),e.imageUri&&(0,t.jsx)("a",{href:e.imageUri,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-md hover:bg-zinc-800 text-zinc-500 hover:text-white transition-colors",children:(0,t.jsx)(m.ExternalLink,{className:"h-4 w-4"})})]})})]},e.id))})]})}),(0,t.jsx)(w,{asset:n,isOpen:p,onOpenChange:g})]})}var k=e.i(800598),z=e.i(201935),C=e.i(908773),A=e.i(437002),D=e.i(557139),T=e.i(20049),R=e.i(587975),E=e.i(543609),I=e.i(590439),S=e.i(67340),_=e.i(416493),O=e.i(661776),F=e.i(619904);e.i(240925);var M=e.i(977031);function $(){let{user:e}=(0,_.useAuthStore)(),{assets:n,summary:l,isLoading:o,refresh:c,activeBrand:d}=function(){let e=(0,i.useActiveBrand)(),[t,s]=(0,a.useState)([]),[r,n]=(0,a.useState)(null),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),p=(0,a.useCallback)(async()=>{if(e?.id){o(!0),d(null);try{let t=await fetch(`/api/assets/metrics?brandId=${e.id}`);if(!t.ok)throw Error("Falha ao carregar métricas do dashboard");let a=await t.json();s(a.assets||[]),n(a.summary||null)}catch(e){console.error("[useAssetMetrics] Error:",e),d(e.message||"Erro desconhecido ao carregar métricas")}finally{o(!1)}}},[e?.id]);return(0,a.useEffect)(()=>{p()},[p]),{assets:t,summary:r,isLoading:l,error:c,refresh:p,activeBrand:e}}(),[m,x]=(0,a.useState)("all"),[u,f]=(0,a.useState)(""),[b,v]=(0,a.useState)(!1),[j,y]=(0,a.useState)(!1),[w,$]=(0,a.useState)("list"),P=n.filter(e=>{let t="all"===m||e.namespace===m,a=""===u||(e.name||e.assetType).toLowerCase().includes(u.toLowerCase())||(e.strategicAdvice||"").toLowerCase().includes(u.toLowerCase());return t&&a}),L=async e=>{try{let t=await fetch("/api/ingest/process-worker",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assetId:e,namespace:`brand-${d?.id}`})});if(!t.ok){let e=await t.json();throw Error(e.error||e.message||"Erro no processamento remoto.")}await c(),I.toast.success("Arquivo vetorizado com sucesso!")}catch(e){console.error("Erro ao processar asset:",e),I.toast.error("O upload foi feito, mas o processamento falhou.")}},U=async t=>{if(!e||!d)return;let a=I.toast.loading(`Fazendo upload de ${t.name}...`);y(!0);try{let{url:s}=await (0,O.uploadBrandAsset)(t,d.id,e.uid),r=await (0,F.createAsset)({brandId:d.id,userId:e.uid,name:t.name,originalName:t.name,type:t.type.includes("pdf")?"guideline":t.type.startsWith("image/")?"image":"other",mimeType:t.type,size:t.size,url:s,status:"uploaded",isApprovedForAI:!0,createdAt:M.Timestamp.now()});I.toast.loading("Iniciando extração e vetorização...",{id:a}),await L(r),v(!1),I.toast.dismiss(a)}catch(e){console.error("Erro no upload:",e),I.toast.error("Falha ao subir arquivo.",{id:a})}finally{y(!1)}},B=async t=>{if(!e||!d)return;let a=I.toast.loading(`Adicionando URL estrat\xe9gica...`);y(!0);try{let s=await (0,F.createAsset)({brandId:d.id,userId:e.uid,name:t.replace(/^https?:\/\//,"").split("/")[0],originalName:t,type:"url",mimeType:"text/html",size:0,url:t,sourceUrl:t,status:"uploaded",isApprovedForAI:!0,createdAt:M.Timestamp.now()});I.toast.loading("Fazendo scraping e vetorização...",{id:a}),await L(s),v(!1),I.toast.dismiss(a)}catch(e){console.error("Erro ao adicionar URL:",e),I.toast.error("Falha ao adicionar URL.",{id:a})}finally{y(!1)}};return(0,t.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,t.jsx)(r.Header,{title:"Ativos & Performance"}),(0,t.jsxs)("div",{className:"flex-1 p-8",children:[(0,t.jsxs)("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,t.jsxs)(s.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[(0,t.jsx)("h2",{className:"text-2xl font-bold tracking-tight text-white",children:"Inteligência de Ativos"}),(0,t.jsx)("p",{className:"text-sm text-zinc-400",children:d?`Monitorando performance da marca ${d.name}`:"Selecione uma marca para ver as métricas"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(g.Dialog,{open:b,onOpenChange:v,children:[(0,t.jsx)(g.DialogTrigger,{asChild:!0,children:(0,t.jsxs)("button",{disabled:!d,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-emerald-500 text-sm font-bold text-black hover:bg-emerald-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(T.Plus,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Adicionar Ativo"})]})}),(0,t.jsxs)(g.DialogContent,{className:"bg-zinc-950 border-white/[0.05] sm:max-w-[500px]",children:[(0,t.jsx)(g.DialogHeader,{children:(0,t.jsxs)(g.DialogTitle,{className:"text-white flex items-center gap-2",children:[(0,t.jsx)(E.ShieldCheck,{className:"h-5 w-5 text-emerald-500"}),"Alimentar Inteligência"]})}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)(S.AssetUploader,{brandId:d?.id||"",onUploadFile:U,onAddUrl:B}),j&&(0,t.jsxs)("div",{className:"mt-4 p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center gap-3",children:[(0,t.jsx)(R.Loader2,{className:"h-5 w-5 text-emerald-500 animate-spin"}),(0,t.jsx)("p",{className:"text-sm text-emerald-200",children:"Processando conhecimento..."})]})]})]})]}),(0,t.jsx)("div",{className:"h-8 w-px bg-white/[0.05] mx-1"}),(0,t.jsxs)("button",{onClick:async()=>{let e=I.toast.loading("Sincronizando ativos...");await c(),I.toast.success("Ativos atualizados",{id:e})},disabled:o,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-zinc-800 text-sm font-medium text-zinc-300 hover:text-white hover:bg-zinc-700 transition-all border border-white/[0.05]",children:[(0,t.jsx)(k.RefreshCw,{className:(0,h.cn)("h-4 w-4",o&&"animate-spin")}),(0,t.jsx)("span",{children:"Sincronizar"})]}),(0,t.jsx)("button",{onClick:()=>{if(0===P.length)return void I.toast.error("Nenhum ativo para exportar");let e=new Blob([["Nome,Tipo,Score,CTR,Conversão,Namespace,Data",...P.map(e=>[e.name||e.assetType,e.assetType,e.score,e.metrics.ctr,e.metrics.conversion,e.namespace,new Date(e.createdAt).toLocaleDateString("pt-BR")]).map(e=>e.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),a=URL.createObjectURL(e);t.setAttribute("href",a),t.setAttribute("download",`ativos-performance-${d?.name||"geral"}.csv`),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t),I.toast.success("Exportação concluída")},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-zinc-800 text-sm font-medium text-zinc-300 hover:text-white hover:bg-zinc-700 transition-all border border-white/[0.05]",children:(0,t.jsx)("span",{children:"Exportar"})})]})]}),(0,t.jsx)(p,{summary:l,isLoading:o}),(0,t.jsxs)("div",{className:"mb-6 flex flex-col lg:flex-row items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 p-1 rounded-xl bg-zinc-900/80 border border-white/[0.04]",children:[(0,t.jsx)("button",{onClick:()=>x("all"),className:(0,h.cn)("px-4 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all","all"===m?"bg-zinc-800 text-white shadow-lg":"text-zinc-500 hover:text-zinc-300"),children:"Todos"}),(0,t.jsx)("button",{onClick:()=>x("visual"),className:(0,h.cn)("px-4 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all","visual"===m?"bg-purple-500/20 text-purple-400":"text-zinc-500 hover:text-zinc-300"),children:"Visual"}),(0,t.jsx)("button",{onClick:()=>x("knowledge"),className:(0,h.cn)("px-4 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all","knowledge"===m?"bg-blue-500/20 text-blue-400":"text-zinc-500 hover:text-zinc-300"),children:"Conhecimento"})]}),(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-3 w-full lg:max-w-md",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(C.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-500"}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar por nome ou heurística...",value:u,onChange:e=>f(e.target.value),className:"w-full h-10 pl-10 pr-4 rounded-xl bg-zinc-900 border border-white/[0.05] text-sm text-white placeholder:text-zinc-600 focus:outline-none focus:ring-1 focus:ring-emerald-500/50"})]}),(0,t.jsx)("button",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-zinc-900 border border-white/[0.05] text-zinc-400 hover:text-white",children:(0,t.jsx)(z.Filter,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"card-premium overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-5 border-b border-white/[0.04] bg-white/[0.01]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:"Ativos Vectorizados"}),(0,t.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-zinc-800 text-[10px] text-zinc-400 font-mono",children:P.length})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>$("list"),className:(0,h.cn)("p-1.5 rounded-md transition-all","list"===w?"bg-zinc-800 text-white":"text-zinc-500 hover:text-white"),children:(0,t.jsx)(D.List,{className:"h-4 w-4"})}),(0,t.jsx)("button",{onClick:()=>$("grid"),className:(0,h.cn)("p-1.5 rounded-md transition-all","grid"===w?"bg-zinc-800 text-white":"text-zinc-500 hover:text-white"),children:(0,t.jsx)(A.LayoutGrid,{className:"h-4 w-4"})})]})]}),(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)(N,{assets:P,isLoading:o,viewMode:w})})]})]})]})}e.s(["default",()=>$],848189)}]);