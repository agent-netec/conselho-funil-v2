(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,602851,e=>{"use strict";let t=(0,e.i(946089).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>t],602851)},151999,e=>{"use strict";let t=(0,e.i(946089).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],151999)},151763,e=>{"use strict";let t=(0,e.i(946089).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],151763)},587975,e=>{"use strict";let t=(0,e.i(946089).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],587975)},362164,374432,e=>{"use strict";let t,s;var a,r=e.i(430459),i=e.i(833145),n=e.i(603873),l=e.i(730042),o=e.i(643380),c=e.i(261698),d=e.i(614099),m=e.i(63751),x=e.i(695330),u=e.i(298802);function p(e){var t;let s,a=(t=e,(s=i.forwardRef((e,t)=>{let{children:s,...a}=e;if(i.isValidElement(s)){var r;let e,n,o=(r=s,(n=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?r.ref:(n=(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?r.props.ref:r.props.ref||r.ref),c=function(e,t){let s={...t};for(let a in t){let r=e[a],i=t[a];/^on[A-Z]/.test(a)?r&&i?s[a]=(...e)=>{let t=i(...e);return r(...e),t}:r&&(s[a]=r):"style"===a?s[a]={...r,...i}:"className"===a&&(s[a]=[r,i].filter(Boolean).join(" "))}return{...e,...s}}(a,s.props);return s.type!==i.Fragment&&(c.ref=t?(0,l.composeRefs)(t,o):o),i.cloneElement(s,c)}return i.Children.count(s)>1?i.Children.only(null):null})).displayName=`${t}.SlotClone`,s),n=i.forwardRef((e,t)=>{let{children:s,...n}=e,l=i.Children.toArray(s),o=l.find(f);if(o){let e=o.props.children,s=l.map(t=>t!==o?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,r.jsx)(a,{...n,ref:t,children:i.isValidElement(e)?i.cloneElement(e,void 0,s):null})}return(0,r.jsx)(a,{...n,ref:t,children:s})});return n.displayName=`${e}.Slot`,n}e.i(751111);var h=Symbol("radix.slottable");function f(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===h}var g=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=p(`Primitive.${t}`),a=i.forwardRef((e,a)=>{let{asChild:i,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(i?s:t,{...n,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),j=e.i(865941),b=e.i(140118),v=e.i(661433),y="Dialog",[N,w]=function(e,t=[]){let s=[],a=()=>{let t=s.map(e=>i.createContext(e));return function(s){let a=s?.[e]||t;return i.useMemo(()=>({[`__scope${e}`]:{...s,[e]:a}}),[s,a])}};return a.scopeName=e,[function(t,a){let n=i.createContext(a),l=s.length;s=[...s,a];let o=t=>{let{scope:s,children:a,...o}=t,c=s?.[e]?.[l]||n,d=i.useMemo(()=>o,Object.values(o));return(0,r.jsx)(c.Provider,{value:d,children:a})};return o.displayName=t+"Provider",[o,function(s,r){let o=r?.[e]?.[l]||n,c=i.useContext(o);if(c)return c;if(void 0!==a)return a;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=s.reduce((t,{useScope:s,scopeName:a})=>{let r=s(e)[`__scope${a}`];return{...t,...r}},{});return i.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return s.scopeName=t.scopeName,s}(a,...t)]}(y),[C,k]=N(y),$=e=>{let{__scopeDialog:t,children:s,open:a,defaultOpen:n,onOpenChange:l,modal:d=!0}=e,m=i.useRef(null),x=i.useRef(null),[u,p]=(0,c.useControllableState)({prop:a,defaultProp:n??!1,onChange:l,caller:y});return(0,r.jsx)(C,{scope:t,triggerRef:m,contentRef:x,contentId:(0,o.useId)(),titleId:(0,o.useId)(),descriptionId:(0,o.useId)(),open:u,onOpenChange:p,onOpenToggle:i.useCallback(()=>p(e=>!e),[p]),modal:d,children:s})};$.displayName=y;var z="DialogTrigger",R=i.forwardRef((e,t)=>{let{__scopeDialog:s,...a}=e,i=k(z,s),o=(0,l.useComposedRefs)(t,i.triggerRef);return(0,r.jsx)(g.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":G(i.open),...a,ref:o,onClick:(0,n.composeEventHandlers)(e.onClick,i.onOpenToggle)})});R.displayName=z;var D="DialogPortal",[E,S]=N(D,{forceMount:void 0}),I=e=>{let{__scopeDialog:t,forceMount:s,children:a,container:n}=e,l=k(D,t);return(0,r.jsx)(E,{scope:t,forceMount:s,children:i.Children.map(a,e=>(0,r.jsx)(u.Presence,{present:s||l.open,children:(0,r.jsx)(x.Portal,{asChild:!0,container:n,children:e})}))})};I.displayName=D;var P="DialogOverlay",F=i.forwardRef((e,t)=>{let s=S(P,e.__scopeDialog),{forceMount:a=s.forceMount,...i}=e,n=k(P,e.__scopeDialog);return n.modal?(0,r.jsx)(u.Presence,{present:a||n.open,children:(0,r.jsx)(O,{...i,ref:t})}):null});F.displayName=P;var T=p("DialogOverlay.RemoveScroll"),O=i.forwardRef((e,t)=>{let{__scopeDialog:s,...a}=e,i=k(P,s);return(0,r.jsx)(b.RemoveScroll,{as:T,allowPinchZoom:!0,shards:[i.contentRef],children:(0,r.jsx)(g.div,{"data-state":G(i.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),A="DialogContent",_=i.forwardRef((e,t)=>{let s=S(A,e.__scopeDialog),{forceMount:a=s.forceMount,...i}=e,n=k(A,e.__scopeDialog);return(0,r.jsx)(u.Presence,{present:a||n.open,children:n.modal?(0,r.jsx)(B,{...i,ref:t}):(0,r.jsx)(M,{...i,ref:t})})});_.displayName=A;var B=i.forwardRef((e,t)=>{let s=k(A,e.__scopeDialog),a=i.useRef(null),o=(0,l.useComposedRefs)(t,s.contentRef,a);return i.useEffect(()=>{let e=a.current;if(e)return(0,v.hideOthers)(e)},[]),(0,r.jsx)(H,{...e,ref:o,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,n.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:(0,n.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;(2===t.button||s)&&e.preventDefault()}),onFocusOutside:(0,n.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),M=i.forwardRef((e,t)=>{let s=k(A,e.__scopeDialog),a=i.useRef(!1),n=i.useRef(!1);return(0,r.jsx)(H,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||s.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let r=t.target;s.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),H=i.forwardRef((e,t)=>{let{__scopeDialog:s,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:o,...c}=e,x=k(A,s),u=i.useRef(null),p=(0,l.useComposedRefs)(t,u);return(0,j.useFocusGuards)(),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.FocusScope,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:o,children:(0,r.jsx)(d.DismissableLayer,{role:"dialog",id:x.contentId,"aria-describedby":x.descriptionId,"aria-labelledby":x.titleId,"data-state":G(x.open),...c,ref:p,onDismiss:()=>x.onOpenChange(!1)})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X,{titleId:x.titleId}),(0,r.jsx)(Y,{contentRef:u,descriptionId:x.descriptionId})]})]})}),L="DialogTitle",U=i.forwardRef((e,t)=>{let{__scopeDialog:s,...a}=e,i=k(L,s);return(0,r.jsx)(g.h2,{id:i.titleId,...a,ref:t})});U.displayName=L;var q="DialogDescription",V=i.forwardRef((e,t)=>{let{__scopeDialog:s,...a}=e,i=k(q,s);return(0,r.jsx)(g.p,{id:i.descriptionId,...a,ref:t})});V.displayName=q;var W="DialogClose",K=i.forwardRef((e,t)=>{let{__scopeDialog:s,...a}=e,i=k(W,s);return(0,r.jsx)(g.button,{type:"button",...a,ref:t,onClick:(0,n.composeEventHandlers)(e.onClick,()=>i.onOpenChange(!1))})});function G(e){return e?"open":"closed"}K.displayName=W;var Z="DialogTitleWarning",[J,Q]=(a={contentName:A,titleName:L,docsSlug:"dialog"},t=i.createContext(a),(s=e=>{let{children:s,...a}=e,n=i.useMemo(()=>a,Object.values(a));return(0,r.jsx)(t.Provider,{value:n,children:s})}).displayName=Z+"Provider",[s,function(e){let s=i.useContext(t);if(s)return s;if(void 0!==a)return a;throw Error(`\`${e}\` must be used within \`${Z}\``)}]),X=({titleId:e})=>{let t=Q(Z),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return i.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},Y=({contentRef:e,descriptionId:t})=>{let s=Q("DialogDescriptionWarning"),a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${s.contentName}}.`;return i.useEffect(()=>{let s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null};e.s(["Close",()=>K,"Content",()=>_,"Description",()=>V,"Overlay",()=>F,"Portal",()=>I,"Root",()=>$,"Title",()=>U,"Trigger",()=>R],374432);var ee=e.i(152963),ee=ee,et=e.i(255006);function es({...e}){return(0,r.jsx)($,{"data-slot":"dialog",...e})}function ea({...e}){return(0,r.jsx)(R,{"data-slot":"dialog-trigger",...e})}function er({...e}){return(0,r.jsx)(I,{"data-slot":"dialog-portal",...e})}function ei({className:e,...t}){return(0,r.jsx)(F,{"data-slot":"dialog-overlay",className:(0,et.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function en({className:e,children:t,showCloseButton:s=!0,...a}){return(0,r.jsxs)(er,{"data-slot":"dialog-portal",children:[(0,r.jsx)(ei,{}),(0,r.jsxs)(_,{"data-slot":"dialog-content",className:(0,et.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",e),...a,children:[t,s&&(0,r.jsxs)(K,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,r.jsx)(ee.default,{}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function el({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"dialog-header",className:(0,et.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function eo({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"dialog-footer",className:(0,et.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function ec({className:e,...t}){return(0,r.jsx)(U,{"data-slot":"dialog-title",className:(0,et.cn)("text-lg leading-none font-semibold",e),...t})}function ed({className:e,...t}){return(0,r.jsx)(V,{"data-slot":"dialog-description",className:(0,et.cn)("text-muted-foreground text-sm",e),...t})}e.s(["Dialog",()=>es,"DialogContent",()=>en,"DialogDescription",()=>ed,"DialogFooter",()=>eo,"DialogHeader",()=>el,"DialogTitle",()=>ec,"DialogTrigger",()=>ea],362164)},144837,e=>{"use strict";var t=e.i(430459),s=e.i(255006);function a({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},569995,e=>{"use strict";let t=(0,e.i(946089).default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);e.s(["Lightbulb",()=>t],569995)},329075,e=>{"use strict";let t=(0,e.i(946089).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],329075)},365489,e=>{"use strict";var t=e.i(430459),s=e.i(833145),a=e.i(58333),r=e.i(533763),i=e.i(615090),n=e.i(749442),l=e.i(54203),o=e.i(91435),c=e.i(360619),d=e.i(800598),m=e.i(143957),x=e.i(860205),u=e.i(569995),p=e.i(281853),h=e.i(151999),f=e.i(151763),g=e.i(651752),j=e.i(602851),b=e.i(557354),v=e.i(628626),y=e.i(188645),N=e.i(587975),w=e.i(329075);e.i(240925);var C=e.i(977031),k=e.i(597482),$=e.i(255006),z=e.i(362164),R=e.i(144837);function D(e,t){let s=t.scorecard,a=s?.overall||"N/A",r=new Date().toLocaleDateString("pt-BR"),i=`# ${t.name}

> Funil: ${e.name} | Exportado em ${r}

---

**Score Geral:** ${"number"==typeof a?a.toFixed(1):a}/10

${t.summary||""}

`;return t.strategy?.rationale&&(i+=`## üí° Racional Estrat\xe9gico

${t.strategy.rationale}

`),t.architecture?.stages?.length&&(i+=`## üèóÔ∏è Arquitetura do Funil

`,t.architecture.stages.forEach(e=>{i+=`- **${e.order}. ${e.name}** (${e.type}) - ${e.objective||""}
`}),i+="\n"),s&&(i+=`## üìä Scorecard

- Clareza: ${s.clarity||"-"}
- For\xe7a da Oferta: ${s.offerStrength||"-"}
- Qualifica\xe7\xe3o: ${s.qualification||"-"}
- Fric\xe7\xe3o: ${s.friction||"-"}
- Potencial LTV: ${s.ltvPotential||"-"}
- ROI Esperado: ${s.expectedRoi||"-"}

`),t.strategy?.risks?.length&&(i+=`## ‚ö†Ô∏è Riscos

${t.strategy.risks.map(e=>`- ${e}`).join("\n")}

`),t.strategy?.recommendations?.length&&(i+=`## ‚úÖ Recomenda\xe7\xf5es

${t.strategy.recommendations.map(e=>`- ${e}`).join("\n")}

`),t.assets?.headlines?.length&&(i+=`## üìù Headlines

${t.assets.headlines.map(e=>`- ${e}`).join("\n")}

`),t.assets?.hooks?.length&&(i+=`## üé£ Hooks

${t.assets.hooks.map(e=>`- ${e}`).join("\n")}

`),t.assets?.ctas?.length&&(i+=`## üéØ CTAs

${t.assets.ctas.map(e=>`- ${e}`).join("\n")}

`),i+=`---

*Documento gerado pelo Conselho de Funil*`}let E={russell_brunson:{name:"Russell Brunson",role:"Arquitetura",color:"text-blue-400"},dan_kennedy:{name:"Dan Kennedy",role:"Copy & Oferta",color:"text-amber-400"},frank_kern:{name:"Frank Kern",role:"Psicologia",color:"text-purple-400"},sam_ovens:{name:"Sam Ovens",role:"Aquisi√ß√£o",color:"text-green-400"},ryan_deiss:{name:"Ryan Deiss",role:"LTV",color:"text-rose-400"},perry_belcher:{name:"Perry Belcher",role:"Monetiza√ß√£o",color:"text-orange-400"}},S={ad:"üì£",landing:"üéØ",quiz:"‚ùì",vsl:"üé¨",checkout:"üí≥",email:"üìß",call:"üìû",webinar:"üé•",default:"üìç"};function I({label:e,value:s,max:a=10,color:r}){let n=s/a*100;return(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-zinc-400",children:e}),(0,t.jsx)("span",{className:(0,$.cn)("font-semibold",r),children:s.toFixed(1)})]}),(0,t.jsx)("div",{className:"h-2 bg-zinc-800 rounded-full overflow-hidden",children:(0,t.jsx)(i.motion.div,{initial:{width:0},animate:{width:`${n}%`},transition:{duration:.5,ease:"easeOut"},className:(0,$.cn)("h-full rounded-full",r.replace("text","bg"))})})]})}function P({stage:e,index:s}){let a=S[e.type?.toLowerCase()]||S.default;return(0,t.jsxs)(i.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*s},className:"flex items-start gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-zinc-800/50 text-2xl",children:a}),s<6&&(0,t.jsx)("div",{className:"w-0.5 h-8 bg-zinc-800 my-2"})]}),(0,t.jsxs)("div",{className:"flex-1 pb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsxs)("span",{className:"text-xs text-zinc-500 font-mono",children:["ETAPA ",e.order]}),(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-zinc-800 text-zinc-400 uppercase",children:e.type})]}),(0,t.jsx)("h4",{className:"text-white font-medium mb-1",children:e.name}),e.objective&&(0,t.jsx)("p",{className:"text-sm text-zinc-400 mb-2",children:e.objective}),e.description&&(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:e.description}),e.metrics&&(0,t.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs",children:[e.metrics.expectedConversion&&(0,t.jsxs)("span",{className:"text-emerald-400",children:["Conv: ",e.metrics.expectedConversion]}),e.metrics.kpi&&(0,t.jsxs)("span",{className:"text-zinc-500",children:["KPI: ",e.metrics.kpi]})]})]})]})}function F(){let e=(0,a.useParams)(),S=(0,a.useRouter)(),[F,T]=(0,s.useState)(null),[O,A]=(0,s.useState)(null),[_,B]=(0,s.useState)(!0),[M,H]=(0,s.useState)(!1),[L,U]=(0,s.useState)(!1),[q,V]=(0,s.useState)(!1),[W,K]=(0,s.useState)(!1),[G,Z]=(0,s.useState)(null),[J,Q]=(0,s.useState)("");(0,s.useEffect)(()=>{!async function(){if(e.id&&e.proposalId)try{let t=await (0,C.getDoc)((0,C.doc)(k.db,"funnels",e.id));t.exists()&&T({id:t.id,...t.data()});let s=await (0,C.getDoc)((0,C.doc)(k.db,"funnels",e.id,"proposals",e.proposalId));s.exists()&&A({id:s.id,...s.data()})}catch(e){console.error("Error loading data:",e)}finally{B(!1)}}()},[e.id,e.proposalId]);let X=async e=>{if(F&&O){if("adjust"===e||"kill"===e){Z(e),Q(""),K(!0);return}await Y("execute","Proposta aprovada para execu√ß√£o",[])}},Y=async(e,t,s)=>{if(F&&O){H(!0),K(!1);try{let a=await fetch("/api/decisions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({funnelId:F.id,proposalId:O.id,type:e,userId:F.userId||"anonymous",userName:"Voc√™",reason:t,adjustments:"adjust"===e?s:[]})});if(!a.ok){let e=await a.json().catch(()=>({}));throw console.error("API Error:",e),Error(e.error||"Failed to save decision")}S.push(`/funnels/${F.id}`)}catch(e){console.error("Error updating decision:",e),alert("Erro ao salvar decis√£o. Tente novamente.")}finally{H(!1)}}},ee=e=>{let t=O?.assets?.[e];t&&(navigator.clipboard.writeText(t.join("\n")),alert(`${e} copiados!`))},et=async e=>{if(F&&O)try{let t=D(F,O);if("markdown"===e){let e=new Blob([t],{type:"text/markdown"}),s=window.URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download=`${O.name.replace(/[^a-zA-Z0-9]/g,"_")}.md`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s)}else{let e=D(F,O).replace(/^#### (.+)$/gm,"<h4>$1</h4>").replace(/^### (.+)$/gm,"<h3>$1</h3>").replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^> (.+)$/gm,"<blockquote>$1</blockquote>").replace(/^---$/gm,"<hr>").replace(/\|(.+)\|/g,e=>{let t=e.split("|").filter(e=>e.trim());return t.some(e=>e.includes("---"))?"":`<tr>${t.map(e=>`<td>${e.trim().replace(/\*\*/g,"")}</td>`).join("")}</tr>`}).replace(/(<tr>.*<\/tr>\n?)+/g,"<table>$&</table>").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/(<li>.*<\/li>\n?)+/g,"<ul>$&</ul>").replace(/\n\n/g,"<br><br>"),t=`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>${O.name} - Export</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; max-width: 800px; margin: 0 auto; padding: 40px 20px; line-height: 1.6; color: #1a1a1a; }
    h1 { color: #10b981; border-bottom: 2px solid #10b981; padding-bottom: 10px; }
    h2 { color: #374151; margin-top: 30px; }
    h3 { color: #4b5563; }
    h4 { color: #6b7280; }
    table { border-collapse: collapse; width: 100%; margin: 15px 0; }
    th, td { border: 1px solid #e5e7eb; padding: 10px; text-align: left; }
    th { background: #f9fafb; }
    blockquote { border-left: 3px solid #10b981; padding-left: 15px; color: #6b7280; }
    hr { border: none; border-top: 1px solid #e5e7eb; margin: 30px 0; }
    ul { padding-left: 25px; }
    li { margin: 5px 0; }
    .print-btn { position: fixed; top: 20px; right: 20px; padding: 10px 20px; background: #10b981; color: white; border: none; border-radius: 8px; cursor: pointer; z-index: 1000; }
    @media print { .print-btn { display: none; } }
  </style>
</head>
<body>
  <button class="print-btn" onclick="window.print()">üñ®Ô∏è Imprimir PDF</button>
  ${e}
</body>
</html>`,s=new Blob([t],{type:"text/html"}),a=URL.createObjectURL(s);window.open(a,"_blank")}}catch(e){console.error("Export error:",e),alert("Erro ao exportar. Tente novamente.")}},es=async()=>{if(F&&O){U(!0);try{if(!(await fetch("/api/library",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({funnelId:F.id,proposalId:O.id,name:O.name,description:O.summary,tags:[F.context.objective,F.context.channel?.main].filter(Boolean)})})).ok)throw Error("Failed to save to library");V(!0),alert("‚úÖ Salvo na biblioteca com sucesso!")}catch(e){console.error("Error saving to library:",e),alert("Erro ao salvar na biblioteca. Tente novamente.")}finally{U(!1)}}};if(_)return(0,t.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,t.jsx)(n.Header,{title:"Carregando...",showBack:!0}),(0,t.jsx)("div",{className:"flex-1 p-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-6 max-w-4xl mx-auto",children:[(0,t.jsx)("div",{className:"h-32 rounded-xl bg-zinc-800/50"}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsx)("div",{className:"h-64 rounded-xl bg-zinc-800/50"}),(0,t.jsx)("div",{className:"h-64 rounded-xl bg-zinc-800/50"})]})]})})]});if(!O||!F)return(0,t.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,t.jsx)(n.Header,{title:"Proposta n√£o encontrada",showBack:!0}),(0,t.jsx)("div",{className:"flex-1 p-8 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-zinc-800/50 mb-4",children:(0,t.jsx)(h.FileText,{className:"h-8 w-8 text-zinc-600"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-white",children:"Proposta n√£o encontrada"}),(0,t.jsx)(r.default,{href:`/funnels/${e.id}`,children:(0,t.jsx)(l.Button,{className:"mt-6 btn-accent",children:"Voltar para o Funil"})})]})})]});let ea=O.scorecard,er=ea?.overall||0;return(0,t.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,t.jsx)(n.Header,{title:O.name,subtitle:F.name,showBack:!0,actions:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(l.Button,{variant:"ghost",className:"btn-ghost",onClick:()=>et("markdown"),children:[(0,t.jsx)(h.FileText,{className:"mr-2 h-4 w-4"}),"MD"]}),(0,t.jsxs)(l.Button,{variant:"ghost",className:"btn-ghost",onClick:()=>et("pdf"),children:[(0,t.jsx)(w.Download,{className:"mr-2 h-4 w-4"}),"PDF"]}),(0,t.jsx)(r.default,{href:`/chat?funnelId=${F.id}&proposalId=${O.id}`,children:(0,t.jsxs)(l.Button,{variant:"outline",className:"btn-ghost",children:[(0,t.jsx)(v.MessageSquare,{className:"mr-2 h-4 w-4"}),"Perguntar ao Conselho"]})})]})}),(0,t.jsx)("div",{className:"flex-1 p-8",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card-premium p-6 mb-8",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start gap-6",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-zinc-300 text-lg leading-relaxed mb-4",children:O.summary}),O.strategy?.rationale&&(0,t.jsxs)("div",{className:"p-4 bg-zinc-800/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-zinc-400 mb-2",children:[(0,t.jsx)(u.Lightbulb,{className:"h-4 w-4"}),"Racional Estrat√©gico"]}),(0,t.jsx)("p",{className:"text-zinc-300 text-sm",children:O.strategy.rationale})]})]}),ea&&(0,t.jsxs)("div",{className:"md:w-64 p-5 bg-zinc-800/30 rounded-xl",children:[(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)("div",{className:(0,$.cn)("text-5xl font-bold",er>=7.5?"text-emerald-400":er>=6?"text-amber-400":"text-red-400"),children:er.toFixed(1)}),(0,t.jsx)("div",{className:"text-sm text-zinc-500",children:"Score Geral"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(I,{label:"Clareza",value:ea.clarity,color:"text-blue-400"}),(0,t.jsx)(I,{label:"For√ßa da Oferta",value:ea.offerStrength,color:"text-amber-400"}),(0,t.jsx)(I,{label:"Qualifica√ß√£o",value:ea.qualification,color:"text-green-400"}),(0,t.jsx)(I,{label:"Fric√ß√£o",value:10-ea.friction,color:"text-purple-400"}),(0,t.jsx)(I,{label:"Potencial LTV",value:ea.ltvPotential,color:"text-rose-400"}),(0,t.jsx)(I,{label:"ROI Esperado",value:ea.expectedRoi,color:"text-emerald-400"})]})]})]})}),(0,t.jsxs)("div",{className:"grid gap-8 lg:grid-cols-2",children:[(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card-premium p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2 mb-6",children:[(0,t.jsx)(x.Target,{className:"h-5 w-5 text-emerald-400"}),"Arquitetura do Funil"]}),(0,t.jsx)("div",{className:"space-y-0",children:O.architecture?.stages?.map((e,s)=>(0,t.jsx)(P,{stage:e,index:s},s))})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[O.strategy?.counselorInsights&&O.strategy.counselorInsights.length>0&&(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"card-premium p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2 mb-4",children:[(0,t.jsx)(j.Users,{className:"h-5 w-5 text-blue-400"}),"Insights dos Conselheiros"]}),(0,t.jsx)("div",{className:"space-y-4",children:O.strategy.counselorInsights.map((e,s)=>{let a=E[e.counselor]||{name:e.counselor,role:"",color:"text-zinc-400"};return(0,t.jsxs)("div",{className:"p-4 bg-zinc-800/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:(0,$.cn)("font-medium",a.color),children:a.name}),a.role&&(0,t.jsxs)("span",{className:"text-xs text-zinc-500",children:["(",a.role,")"]})]}),(0,t.jsx)("p",{className:"text-sm text-zinc-300",children:e.insight})]},s)})})]}),(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card-premium p-6",children:(0,t.jsxs)("div",{className:"grid gap-6",children:[O.strategy?.risks&&O.strategy.risks.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-red-400 flex items-center gap-2 mb-3",children:[(0,t.jsx)(p.AlertTriangle,{className:"h-4 w-4"}),"Riscos Identificados"]}),(0,t.jsx)("ul",{className:"space-y-2",children:O.strategy.risks.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm text-zinc-400",children:[(0,t.jsx)("span",{className:"text-red-400/50",children:"‚Ä¢"}),e]},s))})]}),O.strategy?.recommendations&&O.strategy.recommendations.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-emerald-400 flex items-center gap-2 mb-3",children:[(0,t.jsx)(b.TrendingUp,{className:"h-4 w-4"}),"Recomenda√ß√µes"]}),(0,t.jsx)("ul",{className:"space-y-2",children:O.strategy.recommendations.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm text-zinc-400",children:[(0,t.jsx)("span",{className:"text-emerald-400/50",children:"‚Ä¢"}),e]},s))})]})]})})]})]}),O.assets&&(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"card-premium p-6 mt-8",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2 mb-6",children:[(0,t.jsx)(g.Zap,{className:"h-5 w-5 text-amber-400"}),"Assets Gerados"]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[O.assets.headlines&&O.assets.headlines.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-zinc-400",children:"Headlines"}),(0,t.jsxs)(l.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>ee("headlines"),children:[(0,t.jsx)(f.Copy,{className:"h-3 w-3 mr-1"}),"Copiar"]})]}),(0,t.jsx)("div",{className:"space-y-2",children:O.assets.headlines.map((e,s)=>(0,t.jsx)("div",{className:"p-3 bg-zinc-800/30 rounded-lg text-sm text-zinc-300",children:e},s))})]}),O.assets.hooks&&O.assets.hooks.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-zinc-400",children:"Hooks"}),(0,t.jsxs)(l.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>ee("hooks"),children:[(0,t.jsx)(f.Copy,{className:"h-3 w-3 mr-1"}),"Copiar"]})]}),(0,t.jsx)("div",{className:"space-y-2",children:O.assets.hooks.map((e,s)=>(0,t.jsx)("div",{className:"p-3 bg-zinc-800/30 rounded-lg text-sm text-zinc-300",children:e},s))})]}),O.assets.ctas&&O.assets.ctas.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-zinc-400",children:"CTAs"}),(0,t.jsxs)(l.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>ee("ctas"),children:[(0,t.jsx)(f.Copy,{className:"h-3 w-3 mr-1"}),"Copiar"]})]}),(0,t.jsx)("div",{className:"space-y-2",children:O.assets.ctas.map((e,s)=>(0,t.jsx)("div",{className:"p-3 bg-zinc-800/30 rounded-lg text-sm text-zinc-300 font-medium",children:e},s))})]})]})]}),"review"===F.status&&(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card-premium p-6 mt-8",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Sua Decis√£o"}),(0,t.jsx)("p",{className:"text-zinc-400 text-sm mb-6",children:"Analise a proposta e decida se quer executar, solicitar ajustes ou descartar."}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)(l.Button,{onClick:()=>X("execute"),disabled:M,className:"flex-1 h-12 bg-emerald-600 hover:bg-emerald-500 text-white",children:[(0,t.jsx)(o.CheckCircle2,{className:"mr-2 h-5 w-5"}),"EXECUTAR"]}),(0,t.jsxs)(l.Button,{onClick:()=>X("adjust"),disabled:M,variant:"outline",className:"flex-1 h-12 border-amber-500/50 text-amber-400 hover:bg-amber-500/10",children:[(0,t.jsx)(d.RefreshCw,{className:"mr-2 h-5 w-5"}),"AJUSTAR"]}),(0,t.jsxs)(l.Button,{onClick:()=>X("kill"),disabled:M,variant:"outline",className:"flex-1 h-12 border-red-500/50 text-red-400 hover:bg-red-500/10",children:[(0,t.jsx)(c.XCircle,{className:"mr-2 h-5 w-5"}),"MATAR"]})]})]}),"approved"===F.status&&(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card-premium p-6 mt-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-white mb-1 flex items-center gap-2",children:[(0,t.jsx)(y.Library,{className:"h-5 w-5 text-emerald-400"}),"Salvar na Biblioteca"]}),(0,t.jsx)("p",{className:"text-zinc-400 text-sm",children:"Transforme este funil em um template reutiliz√°vel para criar novos funis mais r√°pido."})]}),(0,t.jsx)(l.Button,{onClick:es,disabled:L||q,className:(0,$.cn)("h-11",q?"bg-emerald-600 text-white":"btn-accent"),children:L?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.CheckCircle2,{className:"mr-2 h-4 w-4"}),"Salvo!"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Library,{className:"mr-2 h-4 w-4"}),"Salvar Template"]})})]})}),"approved"===F.status&&(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},className:"card-premium p-6 mt-4 border-violet-500/20 bg-gradient-to-br from-violet-500/5 to-transparent",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-white mb-1 flex items-center gap-2",children:[(0,t.jsx)(m.Sparkles,{className:"h-5 w-5 text-violet-400"}),"Gerar Copy"]}),(0,t.jsx)("p",{className:"text-zinc-400 text-sm",children:"Ative o Conselho de Copywriting para criar headlines, emails, ofertas, VSL e mais."})]}),(0,t.jsx)(r.default,{href:`/funnels/${F.id}/copy?proposalId=${O.id}`,children:(0,t.jsxs)(l.Button,{className:"h-11 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500",children:[(0,t.jsx)(m.Sparkles,{className:"mr-2 h-4 w-4"}),"Conselho de Copy"]})})]})})]})}),(0,t.jsx)(z.Dialog,{open:W,onOpenChange:K,children:(0,t.jsxs)(z.DialogContent,{className:"bg-zinc-900 border-zinc-800",children:[(0,t.jsx)(z.DialogHeader,{children:(0,t.jsx)(z.DialogTitle,{className:"text-white",children:"adjust"===G?"Solicitar Ajustes":"Descartar Proposta"})}),(0,t.jsx)("div",{className:"py-4",children:(0,t.jsx)(R.Textarea,{value:J,onChange:e=>Q(e.target.value),placeholder:"adjust"===G?"Quais ajustes s√£o necess√°rios? (separe por v√≠rgula)":"Por que esta proposta deve ser descartada?",className:"min-h-[100px] bg-zinc-800 border-zinc-700 text-white"})}),(0,t.jsxs)(z.DialogFooter,{children:[(0,t.jsx)(l.Button,{variant:"ghost",onClick:()=>K(!1),children:"Cancelar"}),(0,t.jsx)(l.Button,{onClick:()=>{if(J.trim()&&G)if("adjust"===G){let e=J.split(",").map(e=>e.trim()).filter(Boolean);Y("adjust",`Ajustes: ${e.join(", ")}`,e)}else Y("kill",J,[])},disabled:!J.trim(),className:"adjust"===G?"bg-amber-600 hover:bg-amber-500":"bg-red-600 hover:bg-red-500",children:"adjust"===G?"Solicitar Ajustes":"Descartar"})]})]})})]})}e.s(["default",()=>F])}]);